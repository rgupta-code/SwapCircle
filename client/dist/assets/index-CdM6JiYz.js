import{_ as H,a as rt,j as e,u as us,b as ds,B as p,T as h,D as ye,L as hs,c as fs,d as St,e as ps,A as Rn,C as X,f as In,I as Pe,M as Pn,g as A,S as Dt,h as Rt,i as Nt,k as _n,l as mt,m as tt,n as En,o as N,P as Dr,p as kn,q as Nr,H as An,r as Tn,s as Fn,E as Dn,G as I,t as Nn,v as Ee,w as st,x as Be,y as Q,z as Mn,F as Un,J as Ln,K as Bn,N as ae,O as qn,Q as me,R as K,U as ve,V as ms,W as Wn,X as xs,Y as be,Z as je,$ as we,a0 as Mr,a1 as lr,a2 as cr,a3 as Ve,a4 as Ne,a5 as Me,a6 as Ue,a7 as Le,a8 as gs,a9 as ys,aa as $n,ab as zn,ac as vs,ad as bs,ae as js,af as ws,ag as Qn,ah as Vn,ai as rr,aj as sr,ak as Hn,al as Kn,am as dt,an as Gn,ao as nr,ap as Jn,aq as Yn,ar as Xn,as as Zn,at as Cs,au as Ss,av as ei,aw as ti,ax as ri,ay as Ur,az as si,aA as ni,aB as Re,aC as Lr,aD as ii,aE as ai,aF as oi}from"./mui-Cyh7QsRd.js";import{c as li,b as ci,a as ne,r as O}from"./vendor-DFrXMbSk.js";import{u as Ae,a as ui,O as di,L as Os,b as wr,R as hi,c as de,N as It,B as fi}from"./router-BBU1eTgR.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var ur={},Br=li;ur.createRoot=Br.createRoot,ur.hydrateRoot=Br.hydrateRoot;var nt=function(){function t(){this.listeners=[]}var r=t.prototype;return r.subscribe=function(s){var i=this,a=s||function(){};return this.listeners.push(a),this.onSubscribe(),function(){i.listeners=i.listeners.filter(function(o){return o!==a}),i.onUnsubscribe()}},r.hasListeners=function(){return this.listeners.length>0},r.onSubscribe=function(){},r.onUnsubscribe=function(){},t}(),Mt=typeof window>"u";function ue(){}function pi(t,r){return typeof t=="function"?t(r):t}function dr(t){return typeof t=="number"&&t>=0&&t!==1/0}function Ut(t){return Array.isArray(t)?t:[t]}function Rs(t,r){return Math.max(t+(r||0)-Date.now(),0)}function Pt(t,r,n){return gt(t)?typeof r=="function"?H({},n,{queryKey:t,queryFn:r}):H({},r,{queryKey:t}):t}function mi(t,r,n){return gt(t)?typeof r=="function"?H({},n,{mutationKey:t,mutationFn:r}):H({},r,{mutationKey:t}):typeof t=="function"?H({},r,{mutationFn:t}):H({},t)}function Fe(t,r,n){return gt(t)?[H({},r,{queryKey:t}),n]:[t||{},r]}function xi(t,r){if(t===!0&&r===!0||t==null&&r==null)return"all";if(t===!1&&r===!1)return"none";var n=t??!r;return n?"active":"inactive"}function qr(t,r){var n=t.active,s=t.exact,i=t.fetching,a=t.inactive,o=t.predicate,l=t.queryKey,u=t.stale;if(gt(l)){if(s){if(r.queryHash!==Cr(l,r.options))return!1}else if(!Lt(r.queryKey,l))return!1}var c=xi(n,a);if(c==="none")return!1;if(c!=="all"){var d=r.isActive();if(c==="active"&&!d||c==="inactive"&&d)return!1}return!(typeof u=="boolean"&&r.isStale()!==u||typeof i=="boolean"&&r.isFetching()!==i||o&&!o(r))}function Wr(t,r){var n=t.exact,s=t.fetching,i=t.predicate,a=t.mutationKey;if(gt(a)){if(!r.options.mutationKey)return!1;if(n){if(He(r.options.mutationKey)!==He(a))return!1}else if(!Lt(r.options.mutationKey,a))return!1}return!(typeof s=="boolean"&&r.state.status==="loading"!==s||i&&!i(r))}function Cr(t,r){var n=(r==null?void 0:r.queryKeyHashFn)||He;return n(t)}function He(t){var r=Ut(t);return gi(r)}function gi(t){return JSON.stringify(t,function(r,n){return hr(n)?Object.keys(n).sort().reduce(function(s,i){return s[i]=n[i],s},{}):n})}function Lt(t,r){return Is(Ut(t),Ut(r))}function Is(t,r){return t===r?!0:typeof t!=typeof r?!1:t&&r&&typeof t=="object"&&typeof r=="object"?!Object.keys(r).some(function(n){return!Is(t[n],r[n])}):!1}function Bt(t,r){if(t===r)return t;var n=Array.isArray(t)&&Array.isArray(r);if(n||hr(t)&&hr(r)){for(var s=n?t.length:Object.keys(t).length,i=n?r:Object.keys(r),a=i.length,o=n?[]:{},l=0,u=0;u<a;u++){var c=n?u:i[u];o[c]=Bt(t[c],r[c]),o[c]===t[c]&&l++}return s===a&&l===s?t:o}return r}function yi(t,r){if(t&&!r||r&&!t)return!1;for(var n in t)if(t[n]!==r[n])return!1;return!0}function hr(t){if(!$r(t))return!1;var r=t.constructor;if(typeof r>"u")return!0;var n=r.prototype;return!(!$r(n)||!n.hasOwnProperty("isPrototypeOf"))}function $r(t){return Object.prototype.toString.call(t)==="[object Object]"}function gt(t){return typeof t=="string"||Array.isArray(t)}function vi(t){return new Promise(function(r){setTimeout(r,t)})}function zr(t){Promise.resolve().then(t).catch(function(r){return setTimeout(function(){throw r})})}function Ps(){if(typeof AbortController=="function")return new AbortController}var bi=function(t){rt(r,t);function r(){var s;return s=t.call(this)||this,s.setup=function(i){var a;if(!Mt&&((a=window)!=null&&a.addEventListener)){var o=function(){return i()};return window.addEventListener("visibilitychange",o,!1),window.addEventListener("focus",o,!1),function(){window.removeEventListener("visibilitychange",o),window.removeEventListener("focus",o)}}},s}var n=r.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){if(!this.hasListeners()){var i;(i=this.cleanup)==null||i.call(this),this.cleanup=void 0}},n.setEventListener=function(i){var a,o=this;this.setup=i,(a=this.cleanup)==null||a.call(this),this.cleanup=i(function(l){typeof l=="boolean"?o.setFocused(l):o.onFocus()})},n.setFocused=function(i){this.focused=i,i&&this.onFocus()},n.onFocus=function(){this.listeners.forEach(function(i){i()})},n.isFocused=function(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)},r}(nt),ht=new bi,ji=function(t){rt(r,t);function r(){var s;return s=t.call(this)||this,s.setup=function(i){var a;if(!Mt&&((a=window)!=null&&a.addEventListener)){var o=function(){return i()};return window.addEventListener("online",o,!1),window.addEventListener("offline",o,!1),function(){window.removeEventListener("online",o),window.removeEventListener("offline",o)}}},s}var n=r.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){if(!this.hasListeners()){var i;(i=this.cleanup)==null||i.call(this),this.cleanup=void 0}},n.setEventListener=function(i){var a,o=this;this.setup=i,(a=this.cleanup)==null||a.call(this),this.cleanup=i(function(l){typeof l=="boolean"?o.setOnline(l):o.onOnline()})},n.setOnline=function(i){this.online=i,i&&this.onOnline()},n.onOnline=function(){this.listeners.forEach(function(i){i()})},n.isOnline=function(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine},r}(nt),_t=new ji;function wi(t){return Math.min(1e3*Math.pow(2,t),3e4)}function qt(t){return typeof(t==null?void 0:t.cancel)=="function"}var _s=function(r){this.revert=r==null?void 0:r.revert,this.silent=r==null?void 0:r.silent};function Et(t){return t instanceof _s}var Es=function(r){var n=this,s=!1,i,a,o,l;this.abort=r.abort,this.cancel=function(j){return i==null?void 0:i(j)},this.cancelRetry=function(){s=!0},this.continueRetry=function(){s=!1},this.continue=function(){return a==null?void 0:a()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(j,C){o=j,l=C});var u=function(C){n.isResolved||(n.isResolved=!0,r.onSuccess==null||r.onSuccess(C),a==null||a(),o(C))},c=function(C){n.isResolved||(n.isResolved=!0,r.onError==null||r.onError(C),a==null||a(),l(C))},d=function(){return new Promise(function(C){a=C,n.isPaused=!0,r.onPause==null||r.onPause()}).then(function(){a=void 0,n.isPaused=!1,r.onContinue==null||r.onContinue()})},f=function j(){if(!n.isResolved){var C;try{C=r.fn()}catch(x){C=Promise.reject(x)}i=function(v){if(!n.isResolved&&(c(new _s(v)),n.abort==null||n.abort(),qt(C)))try{C.cancel()}catch{}},n.isTransportCancelable=qt(C),Promise.resolve(C).then(u).catch(function(x){var v,S;if(!n.isResolved){var m=(v=r.retry)!=null?v:3,_=(S=r.retryDelay)!=null?S:wi,R=typeof _=="function"?_(n.failureCount,x):_,L=m===!0||typeof m=="number"&&n.failureCount<m||typeof m=="function"&&m(n.failureCount,x);if(s||!L){c(x);return}n.failureCount++,r.onFail==null||r.onFail(n.failureCount,x),vi(R).then(function(){if(!ht.isFocused()||!_t.isOnline())return d()}).then(function(){s?c(x):j()})}})}};f()},Ci=function(){function t(){this.queue=[],this.transactions=0,this.notifyFn=function(n){n()},this.batchNotifyFn=function(n){n()}}var r=t.prototype;return r.batch=function(s){var i;this.transactions++;try{i=s()}finally{this.transactions--,this.transactions||this.flush()}return i},r.schedule=function(s){var i=this;this.transactions?this.queue.push(s):zr(function(){i.notifyFn(s)})},r.batchCalls=function(s){var i=this;return function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];i.schedule(function(){s.apply(void 0,o)})}},r.flush=function(){var s=this,i=this.queue;this.queue=[],i.length&&zr(function(){s.batchNotifyFn(function(){i.forEach(function(a){s.notifyFn(a)})})})},r.setNotifyFunction=function(s){this.notifyFn=s},r.setBatchNotifyFunction=function(s){this.batchNotifyFn=s},t}(),te=new Ci,ks=console;function Wt(){return ks}function Si(t){ks=t}var Oi=function(){function t(n){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=n.defaultOptions,this.setOptions(n.options),this.observers=[],this.cache=n.cache,this.queryKey=n.queryKey,this.queryHash=n.queryHash,this.initialState=n.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=n.meta,this.scheduleGc()}var r=t.prototype;return r.setOptions=function(s){var i;this.options=H({},this.defaultOptions,s),this.meta=s==null?void 0:s.meta,this.cacheTime=Math.max(this.cacheTime||0,(i=this.options.cacheTime)!=null?i:5*60*1e3)},r.setDefaultOptions=function(s){this.defaultOptions=s},r.scheduleGc=function(){var s=this;this.clearGcTimeout(),dr(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){s.optionalRemove()},this.cacheTime))},r.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},r.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},r.setData=function(s,i){var a,o,l=this.state.data,u=pi(s,l);return(a=(o=this.options).isDataEqual)!=null&&a.call(o,l,u)?u=l:this.options.structuralSharing!==!1&&(u=Bt(l,u)),this.dispatch({data:u,type:"success",dataUpdatedAt:i==null?void 0:i.updatedAt}),u},r.setState=function(s,i){this.dispatch({type:"setState",state:s,setStateOptions:i})},r.cancel=function(s){var i,a=this.promise;return(i=this.retryer)==null||i.cancel(s),a?a.then(ue).catch(ue):Promise.resolve()},r.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},r.reset=function(){this.destroy(),this.setState(this.initialState)},r.isActive=function(){return this.observers.some(function(s){return s.options.enabled!==!1})},r.isFetching=function(){return this.state.isFetching},r.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(s){return s.getCurrentResult().isStale})},r.isStaleByTime=function(s){return s===void 0&&(s=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!Rs(this.state.dataUpdatedAt,s)},r.onFocus=function(){var s,i=this.observers.find(function(a){return a.shouldFetchOnWindowFocus()});i&&i.refetch(),(s=this.retryer)==null||s.continue()},r.onOnline=function(){var s,i=this.observers.find(function(a){return a.shouldFetchOnReconnect()});i&&i.refetch(),(s=this.retryer)==null||s.continue()},r.addObserver=function(s){this.observers.indexOf(s)===-1&&(this.observers.push(s),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:s}))},r.removeObserver=function(s){this.observers.indexOf(s)!==-1&&(this.observers=this.observers.filter(function(i){return i!==s}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:s}))},r.getObserversCount=function(){return this.observers.length},r.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},r.fetch=function(s,i){var a=this,o,l,u;if(this.state.isFetching){if(this.state.dataUpdatedAt&&(i!=null&&i.cancelRefetch))this.cancel({silent:!0});else if(this.promise){var c;return(c=this.retryer)==null||c.continueRetry(),this.promise}}if(s&&this.setOptions(s),!this.options.queryFn){var d=this.observers.find(function(_){return _.options.queryFn});d&&this.setOptions(d.options)}var f=Ut(this.queryKey),j=Ps(),C={queryKey:f,pageParam:void 0,meta:this.meta};Object.defineProperty(C,"signal",{enumerable:!0,get:function(){if(j)return a.abortSignalConsumed=!0,j.signal}});var x=function(){return a.options.queryFn?(a.abortSignalConsumed=!1,a.options.queryFn(C)):Promise.reject("Missing queryFn")},v={fetchOptions:i,options:this.options,queryKey:f,state:this.state,fetchFn:x,meta:this.meta};if((o=this.options.behavior)!=null&&o.onFetch){var S;(S=this.options.behavior)==null||S.onFetch(v)}if(this.revertState=this.state,!this.state.isFetching||this.state.fetchMeta!==((l=v.fetchOptions)==null?void 0:l.meta)){var m;this.dispatch({type:"fetch",meta:(m=v.fetchOptions)==null?void 0:m.meta})}return this.retryer=new Es({fn:v.fetchFn,abort:j==null||(u=j.abort)==null?void 0:u.bind(j),onSuccess:function(R){a.setData(R),a.cache.config.onSuccess==null||a.cache.config.onSuccess(R,a),a.cacheTime===0&&a.optionalRemove()},onError:function(R){Et(R)&&R.silent||a.dispatch({type:"error",error:R}),Et(R)||(a.cache.config.onError==null||a.cache.config.onError(R,a),Wt().error(R)),a.cacheTime===0&&a.optionalRemove()},onFail:function(){a.dispatch({type:"failed"})},onPause:function(){a.dispatch({type:"pause"})},onContinue:function(){a.dispatch({type:"continue"})},retry:v.options.retry,retryDelay:v.options.retryDelay}),this.promise=this.retryer.promise,this.promise},r.dispatch=function(s){var i=this;this.state=this.reducer(this.state,s),te.batch(function(){i.observers.forEach(function(a){a.onQueryUpdate(s)}),i.cache.notify({query:i,type:"queryUpdated",action:s})})},r.getDefaultState=function(s){var i=typeof s.initialData=="function"?s.initialData():s.initialData,a=typeof s.initialData<"u",o=a?typeof s.initialDataUpdatedAt=="function"?s.initialDataUpdatedAt():s.initialDataUpdatedAt:0,l=typeof i<"u";return{data:i,dataUpdateCount:0,dataUpdatedAt:l?o??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:l?"success":"idle"}},r.reducer=function(s,i){var a,o;switch(i.type){case"failed":return H({},s,{fetchFailureCount:s.fetchFailureCount+1});case"pause":return H({},s,{isPaused:!0});case"continue":return H({},s,{isPaused:!1});case"fetch":return H({},s,{fetchFailureCount:0,fetchMeta:(a=i.meta)!=null?a:null,isFetching:!0,isPaused:!1},!s.dataUpdatedAt&&{error:null,status:"loading"});case"success":return H({},s,{data:i.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:(o=i.dataUpdatedAt)!=null?o:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var l=i.error;return Et(l)&&l.revert&&this.revertState?H({},this.revertState):H({},s,{error:l,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return H({},s,{isInvalidated:!0});case"setState":return H({},s,i.state);default:return s}},t}(),Ri=function(t){rt(r,t);function r(s){var i;return i=t.call(this)||this,i.config=s||{},i.queries=[],i.queriesMap={},i}var n=r.prototype;return n.build=function(i,a,o){var l,u=a.queryKey,c=(l=a.queryHash)!=null?l:Cr(u,a),d=this.get(c);return d||(d=new Oi({cache:this,queryKey:u,queryHash:c,options:i.defaultQueryOptions(a),state:o,defaultOptions:i.getQueryDefaults(u),meta:a.meta}),this.add(d)),d},n.add=function(i){this.queriesMap[i.queryHash]||(this.queriesMap[i.queryHash]=i,this.queries.push(i),this.notify({type:"queryAdded",query:i}))},n.remove=function(i){var a=this.queriesMap[i.queryHash];a&&(i.destroy(),this.queries=this.queries.filter(function(o){return o!==i}),a===i&&delete this.queriesMap[i.queryHash],this.notify({type:"queryRemoved",query:i}))},n.clear=function(){var i=this;te.batch(function(){i.queries.forEach(function(a){i.remove(a)})})},n.get=function(i){return this.queriesMap[i]},n.getAll=function(){return this.queries},n.find=function(i,a){var o=Fe(i,a),l=o[0];return typeof l.exact>"u"&&(l.exact=!0),this.queries.find(function(u){return qr(l,u)})},n.findAll=function(i,a){var o=Fe(i,a),l=o[0];return Object.keys(l).length>0?this.queries.filter(function(u){return qr(l,u)}):this.queries},n.notify=function(i){var a=this;te.batch(function(){a.listeners.forEach(function(o){o(i)})})},n.onFocus=function(){var i=this;te.batch(function(){i.queries.forEach(function(a){a.onFocus()})})},n.onOnline=function(){var i=this;te.batch(function(){i.queries.forEach(function(a){a.onOnline()})})},r}(nt),Ii=function(){function t(n){this.options=H({},n.defaultOptions,n.options),this.mutationId=n.mutationId,this.mutationCache=n.mutationCache,this.observers=[],this.state=n.state||As(),this.meta=n.meta}var r=t.prototype;return r.setState=function(s){this.dispatch({type:"setState",state:s})},r.addObserver=function(s){this.observers.indexOf(s)===-1&&this.observers.push(s)},r.removeObserver=function(s){this.observers=this.observers.filter(function(i){return i!==s})},r.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(ue).catch(ue)):Promise.resolve()},r.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},r.execute=function(){var s=this,i,a=this.state.status==="loading",o=Promise.resolve();return a||(this.dispatch({type:"loading",variables:this.options.variables}),o=o.then(function(){s.mutationCache.config.onMutate==null||s.mutationCache.config.onMutate(s.state.variables,s)}).then(function(){return s.options.onMutate==null?void 0:s.options.onMutate(s.state.variables)}).then(function(l){l!==s.state.context&&s.dispatch({type:"loading",context:l,variables:s.state.variables})})),o.then(function(){return s.executeMutation()}).then(function(l){i=l,s.mutationCache.config.onSuccess==null||s.mutationCache.config.onSuccess(i,s.state.variables,s.state.context,s)}).then(function(){return s.options.onSuccess==null?void 0:s.options.onSuccess(i,s.state.variables,s.state.context)}).then(function(){return s.options.onSettled==null?void 0:s.options.onSettled(i,null,s.state.variables,s.state.context)}).then(function(){return s.dispatch({type:"success",data:i}),i}).catch(function(l){return s.mutationCache.config.onError==null||s.mutationCache.config.onError(l,s.state.variables,s.state.context,s),Wt().error(l),Promise.resolve().then(function(){return s.options.onError==null?void 0:s.options.onError(l,s.state.variables,s.state.context)}).then(function(){return s.options.onSettled==null?void 0:s.options.onSettled(void 0,l,s.state.variables,s.state.context)}).then(function(){throw s.dispatch({type:"error",error:l}),l})})},r.executeMutation=function(){var s=this,i;return this.retryer=new Es({fn:function(){return s.options.mutationFn?s.options.mutationFn(s.state.variables):Promise.reject("No mutationFn found")},onFail:function(){s.dispatch({type:"failed"})},onPause:function(){s.dispatch({type:"pause"})},onContinue:function(){s.dispatch({type:"continue"})},retry:(i=this.options.retry)!=null?i:0,retryDelay:this.options.retryDelay}),this.retryer.promise},r.dispatch=function(s){var i=this;this.state=Pi(this.state,s),te.batch(function(){i.observers.forEach(function(a){a.onMutationUpdate(s)}),i.mutationCache.notify(i)})},t}();function As(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}function Pi(t,r){switch(r.type){case"failed":return H({},t,{failureCount:t.failureCount+1});case"pause":return H({},t,{isPaused:!0});case"continue":return H({},t,{isPaused:!1});case"loading":return H({},t,{context:r.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:r.variables});case"success":return H({},t,{data:r.data,error:null,status:"success",isPaused:!1});case"error":return H({},t,{data:void 0,error:r.error,failureCount:t.failureCount+1,isPaused:!1,status:"error"});case"setState":return H({},t,r.state);default:return t}}var _i=function(t){rt(r,t);function r(s){var i;return i=t.call(this)||this,i.config=s||{},i.mutations=[],i.mutationId=0,i}var n=r.prototype;return n.build=function(i,a,o){var l=new Ii({mutationCache:this,mutationId:++this.mutationId,options:i.defaultMutationOptions(a),state:o,defaultOptions:a.mutationKey?i.getMutationDefaults(a.mutationKey):void 0,meta:a.meta});return this.add(l),l},n.add=function(i){this.mutations.push(i),this.notify(i)},n.remove=function(i){this.mutations=this.mutations.filter(function(a){return a!==i}),i.cancel(),this.notify(i)},n.clear=function(){var i=this;te.batch(function(){i.mutations.forEach(function(a){i.remove(a)})})},n.getAll=function(){return this.mutations},n.find=function(i){return typeof i.exact>"u"&&(i.exact=!0),this.mutations.find(function(a){return Wr(i,a)})},n.findAll=function(i){return this.mutations.filter(function(a){return Wr(i,a)})},n.notify=function(i){var a=this;te.batch(function(){a.listeners.forEach(function(o){o(i)})})},n.onFocus=function(){this.resumePausedMutations()},n.onOnline=function(){this.resumePausedMutations()},n.resumePausedMutations=function(){var i=this.mutations.filter(function(a){return a.state.isPaused});return te.batch(function(){return i.reduce(function(a,o){return a.then(function(){return o.continue().catch(ue)})},Promise.resolve())})},r}(nt);function Ei(){return{onFetch:function(r){r.fetchFn=function(){var n,s,i,a,o,l,u=(n=r.fetchOptions)==null||(s=n.meta)==null?void 0:s.refetchPage,c=(i=r.fetchOptions)==null||(a=i.meta)==null?void 0:a.fetchMore,d=c==null?void 0:c.pageParam,f=(c==null?void 0:c.direction)==="forward",j=(c==null?void 0:c.direction)==="backward",C=((o=r.state.data)==null?void 0:o.pages)||[],x=((l=r.state.data)==null?void 0:l.pageParams)||[],v=Ps(),S=v==null?void 0:v.signal,m=x,_=!1,R=r.options.queryFn||function(){return Promise.reject("Missing queryFn")},L=function(W,w,D,$){return m=$?[w].concat(m):[].concat(m,[w]),$?[D].concat(W):[].concat(W,[D])},B=function(W,w,D,$){if(_)return Promise.reject("Cancelled");if(typeof D>"u"&&!w&&W.length)return Promise.resolve(W);var V={queryKey:r.queryKey,signal:S,pageParam:D,meta:r.meta},J=R(V),b=Promise.resolve(J).then(function(g){return L(W,D,g,$)});if(qt(J)){var U=b;U.cancel=J.cancel}return b},M;if(!C.length)M=B([]);else if(f){var P=typeof d<"u",T=P?d:Qr(r.options,C);M=B(C,P,T)}else if(j){var q=typeof d<"u",G=q?d:ki(r.options,C);M=B(C,q,G,!0)}else(function(){m=[];var se=typeof r.options.getNextPageParam>"u",W=u&&C[0]?u(C[0],0,C):!0;M=W?B([],se,x[0]):Promise.resolve(L([],x[0],C[0]));for(var w=function(V){M=M.then(function(J){var b=u&&C[V]?u(C[V],V,C):!0;if(b){var U=se?x[V]:Qr(r.options,J);return B(J,se,U)}return Promise.resolve(L(J,x[V],C[V]))})},D=1;D<C.length;D++)w(D)})();var F=M.then(function(se){return{pages:se,pageParams:m}}),re=F;return re.cancel=function(){_=!0,v==null||v.abort(),qt(M)&&M.cancel()},F}}}}function Qr(t,r){return t.getNextPageParam==null?void 0:t.getNextPageParam(r[r.length-1],r)}function ki(t,r){return t.getPreviousPageParam==null?void 0:t.getPreviousPageParam(r[0],r)}var Ai=function(){function t(n){n===void 0&&(n={}),this.queryCache=n.queryCache||new Ri,this.mutationCache=n.mutationCache||new _i,this.defaultOptions=n.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var r=t.prototype;return r.mount=function(){var s=this;this.unsubscribeFocus=ht.subscribe(function(){ht.isFocused()&&_t.isOnline()&&(s.mutationCache.onFocus(),s.queryCache.onFocus())}),this.unsubscribeOnline=_t.subscribe(function(){ht.isFocused()&&_t.isOnline()&&(s.mutationCache.onOnline(),s.queryCache.onOnline())})},r.unmount=function(){var s,i;(s=this.unsubscribeFocus)==null||s.call(this),(i=this.unsubscribeOnline)==null||i.call(this)},r.isFetching=function(s,i){var a=Fe(s,i),o=a[0];return o.fetching=!0,this.queryCache.findAll(o).length},r.isMutating=function(s){return this.mutationCache.findAll(H({},s,{fetching:!0})).length},r.getQueryData=function(s,i){var a;return(a=this.queryCache.find(s,i))==null?void 0:a.state.data},r.getQueriesData=function(s){return this.getQueryCache().findAll(s).map(function(i){var a=i.queryKey,o=i.state,l=o.data;return[a,l]})},r.setQueryData=function(s,i,a){var o=Pt(s),l=this.defaultQueryOptions(o);return this.queryCache.build(this,l).setData(i,a)},r.setQueriesData=function(s,i,a){var o=this;return te.batch(function(){return o.getQueryCache().findAll(s).map(function(l){var u=l.queryKey;return[u,o.setQueryData(u,i,a)]})})},r.getQueryState=function(s,i){var a;return(a=this.queryCache.find(s,i))==null?void 0:a.state},r.removeQueries=function(s,i){var a=Fe(s,i),o=a[0],l=this.queryCache;te.batch(function(){l.findAll(o).forEach(function(u){l.remove(u)})})},r.resetQueries=function(s,i,a){var o=this,l=Fe(s,i,a),u=l[0],c=l[1],d=this.queryCache,f=H({},u,{active:!0});return te.batch(function(){return d.findAll(u).forEach(function(j){j.reset()}),o.refetchQueries(f,c)})},r.cancelQueries=function(s,i,a){var o=this,l=Fe(s,i,a),u=l[0],c=l[1],d=c===void 0?{}:c;typeof d.revert>"u"&&(d.revert=!0);var f=te.batch(function(){return o.queryCache.findAll(u).map(function(j){return j.cancel(d)})});return Promise.all(f).then(ue).catch(ue)},r.invalidateQueries=function(s,i,a){var o,l,u,c=this,d=Fe(s,i,a),f=d[0],j=d[1],C=H({},f,{active:(o=(l=f.refetchActive)!=null?l:f.active)!=null?o:!0,inactive:(u=f.refetchInactive)!=null?u:!1});return te.batch(function(){return c.queryCache.findAll(f).forEach(function(x){x.invalidate()}),c.refetchQueries(C,j)})},r.refetchQueries=function(s,i,a){var o=this,l=Fe(s,i,a),u=l[0],c=l[1],d=te.batch(function(){return o.queryCache.findAll(u).map(function(j){return j.fetch(void 0,H({},c,{meta:{refetchPage:u==null?void 0:u.refetchPage}}))})}),f=Promise.all(d).then(ue);return c!=null&&c.throwOnError||(f=f.catch(ue)),f},r.fetchQuery=function(s,i,a){var o=Pt(s,i,a),l=this.defaultQueryOptions(o);typeof l.retry>"u"&&(l.retry=!1);var u=this.queryCache.build(this,l);return u.isStaleByTime(l.staleTime)?u.fetch(l):Promise.resolve(u.state.data)},r.prefetchQuery=function(s,i,a){return this.fetchQuery(s,i,a).then(ue).catch(ue)},r.fetchInfiniteQuery=function(s,i,a){var o=Pt(s,i,a);return o.behavior=Ei(),this.fetchQuery(o)},r.prefetchInfiniteQuery=function(s,i,a){return this.fetchInfiniteQuery(s,i,a).then(ue).catch(ue)},r.cancelMutations=function(){var s=this,i=te.batch(function(){return s.mutationCache.getAll().map(function(a){return a.cancel()})});return Promise.all(i).then(ue).catch(ue)},r.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},r.executeMutation=function(s){return this.mutationCache.build(this,s).execute()},r.getQueryCache=function(){return this.queryCache},r.getMutationCache=function(){return this.mutationCache},r.getDefaultOptions=function(){return this.defaultOptions},r.setDefaultOptions=function(s){this.defaultOptions=s},r.setQueryDefaults=function(s,i){var a=this.queryDefaults.find(function(o){return He(s)===He(o.queryKey)});a?a.defaultOptions=i:this.queryDefaults.push({queryKey:s,defaultOptions:i})},r.getQueryDefaults=function(s){var i;return s?(i=this.queryDefaults.find(function(a){return Lt(s,a.queryKey)}))==null?void 0:i.defaultOptions:void 0},r.setMutationDefaults=function(s,i){var a=this.mutationDefaults.find(function(o){return He(s)===He(o.mutationKey)});a?a.defaultOptions=i:this.mutationDefaults.push({mutationKey:s,defaultOptions:i})},r.getMutationDefaults=function(s){var i;return s?(i=this.mutationDefaults.find(function(a){return Lt(s,a.mutationKey)}))==null?void 0:i.defaultOptions:void 0},r.defaultQueryOptions=function(s){if(s!=null&&s._defaulted)return s;var i=H({},this.defaultOptions.queries,this.getQueryDefaults(s==null?void 0:s.queryKey),s,{_defaulted:!0});return!i.queryHash&&i.queryKey&&(i.queryHash=Cr(i.queryKey,i)),i},r.defaultQueryObserverOptions=function(s){return this.defaultQueryOptions(s)},r.defaultMutationOptions=function(s){return s!=null&&s._defaulted?s:H({},this.defaultOptions.mutations,this.getMutationDefaults(s==null?void 0:s.mutationKey),s,{_defaulted:!0})},r.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},t}(),Ti=function(t){rt(r,t);function r(s,i){var a;return a=t.call(this)||this,a.client=s,a.options=i,a.trackedProps=[],a.selectError=null,a.bindMethods(),a.setOptions(i),a}var n=r.prototype;return n.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},n.onSubscribe=function(){this.listeners.length===1&&(this.currentQuery.addObserver(this),Vr(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},n.onUnsubscribe=function(){this.listeners.length||this.destroy()},n.shouldFetchOnReconnect=function(){return fr(this.currentQuery,this.options,this.options.refetchOnReconnect)},n.shouldFetchOnWindowFocus=function(){return fr(this.currentQuery,this.options,this.options.refetchOnWindowFocus)},n.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},n.setOptions=function(i,a){var o=this.options,l=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(i),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=o.queryKey),this.updateQuery();var u=this.hasListeners();u&&Hr(this.currentQuery,l,this.options,o)&&this.executeFetch(),this.updateResult(a),u&&(this.currentQuery!==l||this.options.enabled!==o.enabled||this.options.staleTime!==o.staleTime)&&this.updateStaleTimeout();var c=this.computeRefetchInterval();u&&(this.currentQuery!==l||this.options.enabled!==o.enabled||c!==this.currentRefetchInterval)&&this.updateRefetchInterval(c)},n.getOptimisticResult=function(i){var a=this.client.defaultQueryObserverOptions(i),o=this.client.getQueryCache().build(this.client,a);return this.createResult(o,a)},n.getCurrentResult=function(){return this.currentResult},n.trackResult=function(i,a){var o=this,l={},u=function(d){o.trackedProps.includes(d)||o.trackedProps.push(d)};return Object.keys(i).forEach(function(c){Object.defineProperty(l,c,{configurable:!1,enumerable:!0,get:function(){return u(c),i[c]}})}),(a.useErrorBoundary||a.suspense)&&u("error"),l},n.getNextResult=function(i){var a=this;return new Promise(function(o,l){var u=a.subscribe(function(c){c.isFetching||(u(),c.isError&&(i!=null&&i.throwOnError)?l(c.error):o(c))})})},n.getCurrentQuery=function(){return this.currentQuery},n.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},n.refetch=function(i){return this.fetch(H({},i,{meta:{refetchPage:i==null?void 0:i.refetchPage}}))},n.fetchOptimistic=function(i){var a=this,o=this.client.defaultQueryObserverOptions(i),l=this.client.getQueryCache().build(this.client,o);return l.fetch().then(function(){return a.createResult(l,o)})},n.fetch=function(i){var a=this;return this.executeFetch(i).then(function(){return a.updateResult(),a.currentResult})},n.executeFetch=function(i){this.updateQuery();var a=this.currentQuery.fetch(this.options,i);return i!=null&&i.throwOnError||(a=a.catch(ue)),a},n.updateStaleTimeout=function(){var i=this;if(this.clearStaleTimeout(),!(Mt||this.currentResult.isStale||!dr(this.options.staleTime))){var a=Rs(this.currentResult.dataUpdatedAt,this.options.staleTime),o=a+1;this.staleTimeoutId=setTimeout(function(){i.currentResult.isStale||i.updateResult()},o)}},n.computeRefetchInterval=function(){var i;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(i=this.options.refetchInterval)!=null?i:!1},n.updateRefetchInterval=function(i){var a=this;this.clearRefetchInterval(),this.currentRefetchInterval=i,!(Mt||this.options.enabled===!1||!dr(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(function(){(a.options.refetchIntervalInBackground||ht.isFocused())&&a.executeFetch()},this.currentRefetchInterval))},n.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())},n.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},n.clearStaleTimeout=function(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)},n.clearRefetchInterval=function(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)},n.createResult=function(i,a){var o=this.currentQuery,l=this.options,u=this.currentResult,c=this.currentResultState,d=this.currentResultOptions,f=i!==o,j=f?i.state:this.currentQueryInitialState,C=f?this.currentResult:this.previousQueryResult,x=i.state,v=x.dataUpdatedAt,S=x.error,m=x.errorUpdatedAt,_=x.isFetching,R=x.status,L=!1,B=!1,M;if(a.optimisticResults){var P=this.hasListeners(),T=!P&&Vr(i,a),q=P&&Hr(i,o,a,l);(T||q)&&(_=!0,v||(R="loading"))}if(a.keepPreviousData&&!x.dataUpdateCount&&(C!=null&&C.isSuccess)&&R!=="error")M=C.data,v=C.dataUpdatedAt,R=C.status,L=!0;else if(a.select&&typeof x.data<"u")if(u&&x.data===(c==null?void 0:c.data)&&a.select===this.selectFn)M=this.selectResult;else try{this.selectFn=a.select,M=a.select(x.data),a.structuralSharing!==!1&&(M=Bt(u==null?void 0:u.data,M)),this.selectResult=M,this.selectError=null}catch(re){Wt().error(re),this.selectError=re}else M=x.data;if(typeof a.placeholderData<"u"&&typeof M>"u"&&(R==="loading"||R==="idle")){var G;if(u!=null&&u.isPlaceholderData&&a.placeholderData===(d==null?void 0:d.placeholderData))G=u.data;else if(G=typeof a.placeholderData=="function"?a.placeholderData():a.placeholderData,a.select&&typeof G<"u")try{G=a.select(G),a.structuralSharing!==!1&&(G=Bt(u==null?void 0:u.data,G)),this.selectError=null}catch(re){Wt().error(re),this.selectError=re}typeof G<"u"&&(R="success",M=G,B=!0)}this.selectError&&(S=this.selectError,M=this.selectResult,m=Date.now(),R="error");var F={status:R,isLoading:R==="loading",isSuccess:R==="success",isError:R==="error",isIdle:R==="idle",data:M,dataUpdatedAt:v,error:S,errorUpdatedAt:m,failureCount:x.fetchFailureCount,errorUpdateCount:x.errorUpdateCount,isFetched:x.dataUpdateCount>0||x.errorUpdateCount>0,isFetchedAfterMount:x.dataUpdateCount>j.dataUpdateCount||x.errorUpdateCount>j.errorUpdateCount,isFetching:_,isRefetching:_&&R!=="loading",isLoadingError:R==="error"&&x.dataUpdatedAt===0,isPlaceholderData:B,isPreviousData:L,isRefetchError:R==="error"&&x.dataUpdatedAt!==0,isStale:Sr(i,a),refetch:this.refetch,remove:this.remove};return F},n.shouldNotifyListeners=function(i,a){if(!a)return!0;var o=this.options,l=o.notifyOnChangeProps,u=o.notifyOnChangePropsExclusions;if(!l&&!u||l==="tracked"&&!this.trackedProps.length)return!0;var c=l==="tracked"?this.trackedProps:l;return Object.keys(i).some(function(d){var f=d,j=i[f]!==a[f],C=c==null?void 0:c.some(function(v){return v===d}),x=u==null?void 0:u.some(function(v){return v===d});return j&&!x&&(!c||C)})},n.updateResult=function(i){var a=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!yi(this.currentResult,a)){var o={cache:!0};(i==null?void 0:i.listeners)!==!1&&this.shouldNotifyListeners(this.currentResult,a)&&(o.listeners=!0),this.notify(H({},o,i))}},n.updateQuery=function(){var i=this.client.getQueryCache().build(this.client,this.options);if(i!==this.currentQuery){var a=this.currentQuery;this.currentQuery=i,this.currentQueryInitialState=i.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(a==null||a.removeObserver(this),i.addObserver(this))}},n.onQueryUpdate=function(i){var a={};i.type==="success"?a.onSuccess=!0:i.type==="error"&&!Et(i.error)&&(a.onError=!0),this.updateResult(a),this.hasListeners()&&this.updateTimers()},n.notify=function(i){var a=this;te.batch(function(){i.onSuccess?(a.options.onSuccess==null||a.options.onSuccess(a.currentResult.data),a.options.onSettled==null||a.options.onSettled(a.currentResult.data,null)):i.onError&&(a.options.onError==null||a.options.onError(a.currentResult.error),a.options.onSettled==null||a.options.onSettled(void 0,a.currentResult.error)),i.listeners&&a.listeners.forEach(function(o){o(a.currentResult)}),i.cache&&a.client.getQueryCache().notify({query:a.currentQuery,type:"observerResultsUpdated"})})},r}(nt);function Fi(t,r){return r.enabled!==!1&&!t.state.dataUpdatedAt&&!(t.state.status==="error"&&r.retryOnMount===!1)}function Vr(t,r){return Fi(t,r)||t.state.dataUpdatedAt>0&&fr(t,r,r.refetchOnMount)}function fr(t,r,n){if(r.enabled!==!1){var s=typeof n=="function"?n(t):n;return s==="always"||s!==!1&&Sr(t,r)}return!1}function Hr(t,r,n,s){return n.enabled!==!1&&(t!==r||s.enabled===!1)&&(!n.suspense||t.state.status!=="error")&&Sr(t,n)}function Sr(t,r){return t.isStaleByTime(r.staleTime)}var Di=function(t){rt(r,t);function r(s,i){var a;return a=t.call(this)||this,a.client=s,a.setOptions(i),a.bindMethods(),a.updateResult(),a}var n=r.prototype;return n.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},n.setOptions=function(i){this.options=this.client.defaultMutationOptions(i)},n.onUnsubscribe=function(){if(!this.listeners.length){var i;(i=this.currentMutation)==null||i.removeObserver(this)}},n.onMutationUpdate=function(i){this.updateResult();var a={listeners:!0};i.type==="success"?a.onSuccess=!0:i.type==="error"&&(a.onError=!0),this.notify(a)},n.getCurrentResult=function(){return this.currentResult},n.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},n.mutate=function(i,a){return this.mutateOptions=a,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,H({},this.options,{variables:typeof i<"u"?i:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},n.updateResult=function(){var i=this.currentMutation?this.currentMutation.state:As(),a=H({},i,{isLoading:i.status==="loading",isSuccess:i.status==="success",isError:i.status==="error",isIdle:i.status==="idle",mutate:this.mutate,reset:this.reset});this.currentResult=a},n.notify=function(i){var a=this;te.batch(function(){a.mutateOptions&&(i.onSuccess?(a.mutateOptions.onSuccess==null||a.mutateOptions.onSuccess(a.currentResult.data,a.currentResult.variables,a.currentResult.context),a.mutateOptions.onSettled==null||a.mutateOptions.onSettled(a.currentResult.data,null,a.currentResult.variables,a.currentResult.context)):i.onError&&(a.mutateOptions.onError==null||a.mutateOptions.onError(a.currentResult.error,a.currentResult.variables,a.currentResult.context),a.mutateOptions.onSettled==null||a.mutateOptions.onSettled(void 0,a.currentResult.error,a.currentResult.variables,a.currentResult.context))),i.listeners&&a.listeners.forEach(function(o){o(a.currentResult)})})},r}(nt),Ni=ci.unstable_batchedUpdates;te.setBatchNotifyFunction(Ni);var Mi=console;Si(Mi);var Kr=ne.createContext(void 0),Ts=ne.createContext(!1);function Fs(t){return t&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=Kr),window.ReactQueryClientContext):Kr}var it=function(){var r=ne.useContext(Fs(ne.useContext(Ts)));if(!r)throw new Error("No QueryClient set, use QueryClientProvider to set one");return r},Ui=function(r){var n=r.client,s=r.contextSharing,i=s===void 0?!1:s,a=r.children;ne.useEffect(function(){return n.mount(),function(){n.unmount()}},[n]);var o=Fs(i);return ne.createElement(Ts.Provider,{value:i},ne.createElement(o.Provider,{value:n},a))};function Li(){var t=!1;return{clearReset:function(){t=!1},reset:function(){t=!0},isReset:function(){return t}}}var Bi=ne.createContext(Li()),qi=function(){return ne.useContext(Bi)};function Ds(t,r,n){return typeof r=="function"?r.apply(void 0,n):typeof r=="boolean"?r:!!t}function Or(t,r,n){var s=ne.useRef(!1),i=ne.useState(0),a=i[1],o=mi(t,r,n),l=it(),u=ne.useRef();u.current?u.current.setOptions(o):u.current=new Di(l,o);var c=u.current.getCurrentResult();ne.useEffect(function(){s.current=!0;var f=u.current.subscribe(te.batchCalls(function(){s.current&&a(function(j){return j+1})}));return function(){s.current=!1,f()}},[]);var d=ne.useCallback(function(f,j){u.current.mutate(f,j).catch(ue)},[]);if(c.error&&Ds(void 0,u.current.options.useErrorBoundary,[c.error]))throw c.error;return H({},c,{mutate:d,mutateAsync:c.mutate})}function Wi(t,r){var n=ne.useRef(!1),s=ne.useState(0),i=s[1],a=it(),o=qi(),l=a.defaultQueryObserverOptions(t);l.optimisticResults=!0,l.onError&&(l.onError=te.batchCalls(l.onError)),l.onSuccess&&(l.onSuccess=te.batchCalls(l.onSuccess)),l.onSettled&&(l.onSettled=te.batchCalls(l.onSettled)),l.suspense&&(typeof l.staleTime!="number"&&(l.staleTime=1e3),l.cacheTime===0&&(l.cacheTime=1)),(l.suspense||l.useErrorBoundary)&&(o.isReset()||(l.retryOnMount=!1));var u=ne.useState(function(){return new r(a,l)}),c=u[0],d=c.getOptimisticResult(l);if(ne.useEffect(function(){n.current=!0,o.clearReset();var f=c.subscribe(te.batchCalls(function(){n.current&&i(function(j){return j+1})}));return c.updateResult(),function(){n.current=!1,f()}},[o,c]),ne.useEffect(function(){c.setOptions(l,{listeners:!1})},[l,c]),l.suspense&&d.isLoading)throw c.fetchOptimistic(l).then(function(f){var j=f.data;l.onSuccess==null||l.onSuccess(j),l.onSettled==null||l.onSettled(j,null)}).catch(function(f){o.clearReset(),l.onError==null||l.onError(f),l.onSettled==null||l.onSettled(void 0,f)});if(d.isError&&!o.isReset()&&!d.isFetching&&Ds(l.suspense,l.useErrorBoundary,[d.error,c.getCurrentQuery()]))throw d.error;return l.notifyOnChangeProps==="tracked"&&(d=c.trackResult(d,l)),d}function qe(t,r,n){var s=Pt(t,r,n);return Wi(s,Ti)}let $i={data:""},zi=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||$i,Qi=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Vi=/\/\*[^]*?\*\/|  +/g,Gr=/\n+/g,De=(t,r)=>{let n="",s="",i="";for(let a in t){let o=t[a];a[0]=="@"?a[1]=="i"?n=a+" "+o+";":s+=a[1]=="f"?De(o,a):a+"{"+De(o,a[1]=="k"?"":r)+"}":typeof o=="object"?s+=De(o,r?r.replace(/([^,])+/g,l=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,l):l?l+" "+u:u)):a):o!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=De.p?De.p(a,o):a+":"+o+";")}return n+(r&&i?r+"{"+i+"}":i)+s},_e={},Ns=t=>{if(typeof t=="object"){let r="";for(let n in t)r+=n+Ns(t[n]);return r}return t},Hi=(t,r,n,s,i)=>{let a=Ns(t),o=_e[a]||(_e[a]=(u=>{let c=0,d=11;for(;c<u.length;)d=101*d+u.charCodeAt(c++)>>>0;return"go"+d})(a));if(!_e[o]){let u=a!==t?t:(c=>{let d,f,j=[{}];for(;d=Qi.exec(c.replace(Vi,""));)d[4]?j.shift():d[3]?(f=d[3].replace(Gr," ").trim(),j.unshift(j[0][f]=j[0][f]||{})):j[0][d[1]]=d[2].replace(Gr," ").trim();return j[0]})(t);_e[o]=De(i?{["@keyframes "+o]:u}:u,n?"":"."+o)}let l=n&&_e.g?_e.g:null;return n&&(_e.g=_e[o]),((u,c,d,f)=>{f?c.data=c.data.replace(f,u):c.data.indexOf(u)===-1&&(c.data=d?u+c.data:c.data+u)})(_e[o],r,s,l),o},Ki=(t,r,n)=>t.reduce((s,i,a)=>{let o=r[a];if(o&&o.call){let l=o(n),u=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=u?"."+u:l&&typeof l=="object"?l.props?"":De(l,""):l===!1?"":l}return s+i+(o??"")},"");function Kt(t){let r=this||{},n=t.call?t(r.p):t;return Hi(n.unshift?n.raw?Ki(n,[].slice.call(arguments,1),r.p):n.reduce((s,i)=>Object.assign(s,i&&i.call?i(r.p):i),{}):n,zi(r.target),r.g,r.o,r.k)}let Ms,pr,mr;Kt.bind({g:1});let ke=Kt.bind({k:1});function Gi(t,r,n,s){De.p=r,Ms=t,pr=n,mr=s}function We(t,r){let n=this||{};return function(){let s=arguments;function i(a,o){let l=Object.assign({},a),u=l.className||i.className;n.p=Object.assign({theme:pr&&pr()},l),n.o=/ *go\d+/.test(u),l.className=Kt.apply(n,s)+(u?" "+u:"");let c=t;return t[0]&&(c=l.as||t,delete l.as),mr&&c[0]&&mr(l),Ms(c,l)}return i}}var Ji=t=>typeof t=="function",$t=(t,r)=>Ji(t)?t(r):t,Yi=(()=>{let t=0;return()=>(++t).toString()})(),Us=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let r=matchMedia("(prefers-reduced-motion: reduce)");t=!r||r.matches}return t}})(),Xi=20,Ls=(t,r)=>{switch(r.type){case 0:return{...t,toasts:[r.toast,...t.toasts].slice(0,Xi)};case 1:return{...t,toasts:t.toasts.map(a=>a.id===r.toast.id?{...a,...r.toast}:a)};case 2:let{toast:n}=r;return Ls(t,{type:t.toasts.find(a=>a.id===n.id)?1:0,toast:n});case 3:let{toastId:s}=r;return{...t,toasts:t.toasts.map(a=>a.id===s||s===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return r.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==r.toastId)};case 5:return{...t,pausedAt:r.time};case 6:let i=r.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+i}))}}},kt=[],Ke={toasts:[],pausedAt:void 0},Xe=t=>{Ke=Ls(Ke,t),kt.forEach(r=>{r(Ke)})},Zi={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},ea=(t={})=>{let[r,n]=O.useState(Ke),s=O.useRef(Ke);O.useEffect(()=>(s.current!==Ke&&n(Ke),kt.push(n),()=>{let a=kt.indexOf(n);a>-1&&kt.splice(a,1)}),[]);let i=r.toasts.map(a=>{var o,l,u;return{...t,...t[a.type],...a,removeDelay:a.removeDelay||((o=t[a.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:a.duration||((l=t[a.type])==null?void 0:l.duration)||(t==null?void 0:t.duration)||Zi[a.type],style:{...t.style,...(u=t[a.type])==null?void 0:u.style,...a.style}}});return{...r,toasts:i}},ta=(t,r="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:r,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||Yi()}),yt=t=>(r,n)=>{let s=ta(r,t,n);return Xe({type:2,toast:s}),s.id},fe=(t,r)=>yt("blank")(t,r);fe.error=yt("error");fe.success=yt("success");fe.loading=yt("loading");fe.custom=yt("custom");fe.dismiss=t=>{Xe({type:3,toastId:t})};fe.remove=t=>Xe({type:4,toastId:t});fe.promise=(t,r,n)=>{let s=fe.loading(r.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let a=r.success?$t(r.success,i):void 0;return a?fe.success(a,{id:s,...n,...n==null?void 0:n.success}):fe.dismiss(s),i}).catch(i=>{let a=r.error?$t(r.error,i):void 0;a?fe.error(a,{id:s,...n,...n==null?void 0:n.error}):fe.dismiss(s)}),t};var ra=(t,r)=>{Xe({type:1,toast:{id:t,height:r}})},sa=()=>{Xe({type:5,time:Date.now()})},ft=new Map,na=1e3,ia=(t,r=na)=>{if(ft.has(t))return;let n=setTimeout(()=>{ft.delete(t),Xe({type:4,toastId:t})},r);ft.set(t,n)},aa=t=>{let{toasts:r,pausedAt:n}=ea(t);O.useEffect(()=>{if(n)return;let a=Date.now(),o=r.map(l=>{if(l.duration===1/0)return;let u=(l.duration||0)+l.pauseDuration-(a-l.createdAt);if(u<0){l.visible&&fe.dismiss(l.id);return}return setTimeout(()=>fe.dismiss(l.id),u)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[r,n]);let s=O.useCallback(()=>{n&&Xe({type:6,time:Date.now()})},[n]),i=O.useCallback((a,o)=>{let{reverseOrder:l=!1,gutter:u=8,defaultPosition:c}=o||{},d=r.filter(C=>(C.position||c)===(a.position||c)&&C.height),f=d.findIndex(C=>C.id===a.id),j=d.filter((C,x)=>x<f&&C.visible).length;return d.filter(C=>C.visible).slice(...l?[j+1]:[0,j]).reduce((C,x)=>C+(x.height||0)+u,0)},[r]);return O.useEffect(()=>{r.forEach(a=>{if(a.dismissed)ia(a.id,a.removeDelay);else{let o=ft.get(a.id);o&&(clearTimeout(o),ft.delete(a.id))}})},[r]),{toasts:r,handlers:{updateHeight:ra,startPause:sa,endPause:s,calculateOffset:i}}},oa=ke`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,la=ke`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,ca=ke`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,ua=We("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${oa} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${la} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${ca} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,da=ke`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,ha=We("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${da} 1s linear infinite;
`,fa=ke`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,pa=ke`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,ma=We("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${fa} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${pa} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,xa=We("div")`
  position: absolute;
`,ga=We("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,ya=ke`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,va=We("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${ya} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,ba=({toast:t})=>{let{icon:r,type:n,iconTheme:s}=t;return r!==void 0?typeof r=="string"?O.createElement(va,null,r):r:n==="blank"?null:O.createElement(ga,null,O.createElement(ha,{...s}),n!=="loading"&&O.createElement(xa,null,n==="error"?O.createElement(ua,{...s}):O.createElement(ma,{...s})))},ja=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,wa=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,Ca="0%{opacity:0;} 100%{opacity:1;}",Sa="0%{opacity:1;} 100%{opacity:0;}",Oa=We("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Ra=We("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Ia=(t,r)=>{let n=t.includes("top")?1:-1,[s,i]=Us()?[Ca,Sa]:[ja(n),wa(n)];return{animation:r?`${ke(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ke(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Pa=O.memo(({toast:t,position:r,style:n,children:s})=>{let i=t.height?Ia(t.position||r||"top-center",t.visible):{opacity:0},a=O.createElement(ba,{toast:t}),o=O.createElement(Ra,{...t.ariaProps},$t(t.message,t));return O.createElement(Oa,{className:t.className,style:{...i,...n,...t.style}},typeof s=="function"?s({icon:a,message:o}):O.createElement(O.Fragment,null,a,o))});Gi(O.createElement);var _a=({id:t,className:r,style:n,onHeightUpdate:s,children:i})=>{let a=O.useCallback(o=>{if(o){let l=()=>{let u=o.getBoundingClientRect().height;s(t,u)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,s]);return O.createElement("div",{ref:a,className:r,style:n},i)},Ea=(t,r)=>{let n=t.includes("top"),s=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Us()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${r*(n?1:-1)}px)`,...s,...i}},ka=Kt`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Ot=16,Aa=({reverseOrder:t,position:r="top-center",toastOptions:n,gutter:s,children:i,containerStyle:a,containerClassName:o})=>{let{toasts:l,handlers:u}=aa(n);return O.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Ot,left:Ot,right:Ot,bottom:Ot,pointerEvents:"none",...a},className:o,onMouseEnter:u.startPause,onMouseLeave:u.endPause},l.map(c=>{let d=c.position||r,f=u.calculateOffset(c,{reverseOrder:t,gutter:s,defaultPosition:r}),j=Ea(d,f);return O.createElement(_a,{id:c.id,key:c.id,onHeightUpdate:u.updateHeight,className:c.visible?ka:"",style:j},c.type==="custom"?$t(c.message,c):i?i(c):O.createElement(Pa,{toast:c,position:d}))}))},le=fe;function Bs(t,r){return function(){return t.apply(r,arguments)}}const{toString:Ta}=Object.prototype,{getPrototypeOf:Rr}=Object,{iterator:Gt,toStringTag:qs}=Symbol,Jt=(t=>r=>{const n=Ta.call(r);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Oe=t=>(t=t.toLowerCase(),r=>Jt(r)===t),Yt=t=>r=>typeof r===t,{isArray:at}=Array,xt=Yt("undefined");function vt(t){return t!==null&&!xt(t)&&t.constructor!==null&&!xt(t.constructor)&&xe(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Ws=Oe("ArrayBuffer");function Fa(t){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(t):r=t&&t.buffer&&Ws(t.buffer),r}const Da=Yt("string"),xe=Yt("function"),$s=Yt("number"),bt=t=>t!==null&&typeof t=="object",Na=t=>t===!0||t===!1,At=t=>{if(Jt(t)!=="object")return!1;const r=Rr(t);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(qs in t)&&!(Gt in t)},Ma=t=>{if(!bt(t)||vt(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Ua=Oe("Date"),La=Oe("File"),Ba=Oe("Blob"),qa=Oe("FileList"),Wa=t=>bt(t)&&xe(t.pipe),$a=t=>{let r;return t&&(typeof FormData=="function"&&t instanceof FormData||xe(t.append)&&((r=Jt(t))==="formdata"||r==="object"&&xe(t.toString)&&t.toString()==="[object FormData]"))},za=Oe("URLSearchParams"),[Qa,Va,Ha,Ka]=["ReadableStream","Request","Response","Headers"].map(Oe),Ga=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function jt(t,r,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let s,i;if(typeof t!="object"&&(t=[t]),at(t))for(s=0,i=t.length;s<i;s++)r.call(null,t[s],s,t);else{if(vt(t))return;const a=n?Object.getOwnPropertyNames(t):Object.keys(t),o=a.length;let l;for(s=0;s<o;s++)l=a[s],r.call(null,t[l],l,t)}}function zs(t,r){if(vt(t))return null;r=r.toLowerCase();const n=Object.keys(t);let s=n.length,i;for(;s-- >0;)if(i=n[s],r===i.toLowerCase())return i;return null}const Ge=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Qs=t=>!xt(t)&&t!==Ge;function xr(){const{caseless:t}=Qs(this)&&this||{},r={},n=(s,i)=>{const a=t&&zs(r,i)||i;At(r[a])&&At(s)?r[a]=xr(r[a],s):At(s)?r[a]=xr({},s):at(s)?r[a]=s.slice():r[a]=s};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&jt(arguments[s],n);return r}const Ja=(t,r,n,{allOwnKeys:s}={})=>(jt(r,(i,a)=>{n&&xe(i)?t[a]=Bs(i,n):t[a]=i},{allOwnKeys:s}),t),Ya=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Xa=(t,r,n,s)=>{t.prototype=Object.create(r.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:r.prototype}),n&&Object.assign(t.prototype,n)},Za=(t,r,n,s)=>{let i,a,o;const l={};if(r=r||{},t==null)return r;do{for(i=Object.getOwnPropertyNames(t),a=i.length;a-- >0;)o=i[a],(!s||s(o,t,r))&&!l[o]&&(r[o]=t[o],l[o]=!0);t=n!==!1&&Rr(t)}while(t&&(!n||n(t,r))&&t!==Object.prototype);return r},eo=(t,r,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=r.length;const s=t.indexOf(r,n);return s!==-1&&s===n},to=t=>{if(!t)return null;if(at(t))return t;let r=t.length;if(!$s(r))return null;const n=new Array(r);for(;r-- >0;)n[r]=t[r];return n},ro=(t=>r=>t&&r instanceof t)(typeof Uint8Array<"u"&&Rr(Uint8Array)),so=(t,r)=>{const s=(t&&t[Gt]).call(t);let i;for(;(i=s.next())&&!i.done;){const a=i.value;r.call(t,a[0],a[1])}},no=(t,r)=>{let n;const s=[];for(;(n=t.exec(r))!==null;)s.push(n);return s},io=Oe("HTMLFormElement"),ao=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,i){return s.toUpperCase()+i}),Jr=(({hasOwnProperty:t})=>(r,n)=>t.call(r,n))(Object.prototype),oo=Oe("RegExp"),Vs=(t,r)=>{const n=Object.getOwnPropertyDescriptors(t),s={};jt(n,(i,a)=>{let o;(o=r(i,a,t))!==!1&&(s[a]=o||i)}),Object.defineProperties(t,s)},lo=t=>{Vs(t,(r,n)=>{if(xe(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=t[n];if(xe(s)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},co=(t,r)=>{const n={},s=i=>{i.forEach(a=>{n[a]=!0})};return at(t)?s(t):s(String(t).split(r)),n},uo=()=>{},ho=(t,r)=>t!=null&&Number.isFinite(t=+t)?t:r;function fo(t){return!!(t&&xe(t.append)&&t[qs]==="FormData"&&t[Gt])}const po=t=>{const r=new Array(10),n=(s,i)=>{if(bt(s)){if(r.indexOf(s)>=0)return;if(vt(s))return s;if(!("toJSON"in s)){r[i]=s;const a=at(s)?[]:{};return jt(s,(o,l)=>{const u=n(o,i+1);!xt(u)&&(a[l]=u)}),r[i]=void 0,a}}return s};return n(t,0)},mo=Oe("AsyncFunction"),xo=t=>t&&(bt(t)||xe(t))&&xe(t.then)&&xe(t.catch),Hs=((t,r)=>t?setImmediate:r?((n,s)=>(Ge.addEventListener("message",({source:i,data:a})=>{i===Ge&&a===n&&s.length&&s.shift()()},!1),i=>{s.push(i),Ge.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",xe(Ge.postMessage)),go=typeof queueMicrotask<"u"?queueMicrotask.bind(Ge):typeof process<"u"&&process.nextTick||Hs,yo=t=>t!=null&&xe(t[Gt]),y={isArray:at,isArrayBuffer:Ws,isBuffer:vt,isFormData:$a,isArrayBufferView:Fa,isString:Da,isNumber:$s,isBoolean:Na,isObject:bt,isPlainObject:At,isEmptyObject:Ma,isReadableStream:Qa,isRequest:Va,isResponse:Ha,isHeaders:Ka,isUndefined:xt,isDate:Ua,isFile:La,isBlob:Ba,isRegExp:oo,isFunction:xe,isStream:Wa,isURLSearchParams:za,isTypedArray:ro,isFileList:qa,forEach:jt,merge:xr,extend:Ja,trim:Ga,stripBOM:Ya,inherits:Xa,toFlatObject:Za,kindOf:Jt,kindOfTest:Oe,endsWith:eo,toArray:to,forEachEntry:so,matchAll:no,isHTMLForm:io,hasOwnProperty:Jr,hasOwnProp:Jr,reduceDescriptors:Vs,freezeMethods:lo,toObjectSet:co,toCamelCase:ao,noop:uo,toFiniteNumber:ho,findKey:zs,global:Ge,isContextDefined:Qs,isSpecCompliantForm:fo,toJSONObject:po,isAsyncFn:mo,isThenable:xo,setImmediate:Hs,asap:go,isIterable:yo};function z(t,r,n,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",r&&(this.code=r),n&&(this.config=n),s&&(this.request=s),i&&(this.response=i,this.status=i.status?i.status:null)}y.inherits(z,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:y.toJSONObject(this.config),code:this.code,status:this.status}}});const Ks=z.prototype,Gs={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Gs[t]={value:t}});Object.defineProperties(z,Gs);Object.defineProperty(Ks,"isAxiosError",{value:!0});z.from=(t,r,n,s,i,a)=>{const o=Object.create(Ks);return y.toFlatObject(t,o,function(u){return u!==Error.prototype},l=>l!=="isAxiosError"),z.call(o,t.message,r,n,s,i),o.cause=t,o.name=t.name,a&&Object.assign(o,a),o};const vo=null;function gr(t){return y.isPlainObject(t)||y.isArray(t)}function Js(t){return y.endsWith(t,"[]")?t.slice(0,-2):t}function Yr(t,r,n){return t?t.concat(r).map(function(i,a){return i=Js(i),!n&&a?"["+i+"]":i}).join(n?".":""):r}function bo(t){return y.isArray(t)&&!t.some(gr)}const jo=y.toFlatObject(y,{},null,function(r){return/^is[A-Z]/.test(r)});function Xt(t,r,n){if(!y.isObject(t))throw new TypeError("target must be an object");r=r||new FormData,n=y.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,S){return!y.isUndefined(S[v])});const s=n.metaTokens,i=n.visitor||d,a=n.dots,o=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&y.isSpecCompliantForm(r);if(!y.isFunction(i))throw new TypeError("visitor must be a function");function c(x){if(x===null)return"";if(y.isDate(x))return x.toISOString();if(y.isBoolean(x))return x.toString();if(!u&&y.isBlob(x))throw new z("Blob is not supported. Use a Buffer instead.");return y.isArrayBuffer(x)||y.isTypedArray(x)?u&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function d(x,v,S){let m=x;if(x&&!S&&typeof x=="object"){if(y.endsWith(v,"{}"))v=s?v:v.slice(0,-2),x=JSON.stringify(x);else if(y.isArray(x)&&bo(x)||(y.isFileList(x)||y.endsWith(v,"[]"))&&(m=y.toArray(x)))return v=Js(v),m.forEach(function(R,L){!(y.isUndefined(R)||R===null)&&r.append(o===!0?Yr([v],L,a):o===null?v:v+"[]",c(R))}),!1}return gr(x)?!0:(r.append(Yr(S,v,a),c(x)),!1)}const f=[],j=Object.assign(jo,{defaultVisitor:d,convertValue:c,isVisitable:gr});function C(x,v){if(!y.isUndefined(x)){if(f.indexOf(x)!==-1)throw Error("Circular reference detected in "+v.join("."));f.push(x),y.forEach(x,function(m,_){(!(y.isUndefined(m)||m===null)&&i.call(r,m,y.isString(_)?_.trim():_,v,j))===!0&&C(m,v?v.concat(_):[_])}),f.pop()}}if(!y.isObject(t))throw new TypeError("data must be an object");return C(t),r}function Xr(t){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return r[s]})}function Ir(t,r){this._pairs=[],t&&Xt(t,this,r)}const Ys=Ir.prototype;Ys.append=function(r,n){this._pairs.push([r,n])};Ys.toString=function(r){const n=r?function(s){return r.call(this,s,Xr)}:Xr;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function wo(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Xs(t,r,n){if(!r)return t;const s=n&&n.encode||wo;y.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let a;if(i?a=i(r,n):a=y.isURLSearchParams(r)?r.toString():new Ir(r,n).toString(s),a){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}class Zr{constructor(){this.handlers=[]}use(r,n,s){return this.handlers.push({fulfilled:r,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){y.forEach(this.handlers,function(s){s!==null&&r(s)})}}const Zs={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Co=typeof URLSearchParams<"u"?URLSearchParams:Ir,So=typeof FormData<"u"?FormData:null,Oo=typeof Blob<"u"?Blob:null,Ro={isBrowser:!0,classes:{URLSearchParams:Co,FormData:So,Blob:Oo},protocols:["http","https","file","blob","url","data"]},Pr=typeof window<"u"&&typeof document<"u",yr=typeof navigator=="object"&&navigator||void 0,Io=Pr&&(!yr||["ReactNative","NativeScript","NS"].indexOf(yr.product)<0),Po=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",_o=Pr&&window.location.href||"http://localhost",Eo=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Pr,hasStandardBrowserEnv:Io,hasStandardBrowserWebWorkerEnv:Po,navigator:yr,origin:_o},Symbol.toStringTag,{value:"Module"})),he={...Eo,...Ro};function ko(t,r){return Xt(t,new he.classes.URLSearchParams,{visitor:function(n,s,i,a){return he.isNode&&y.isBuffer(n)?(this.append(s,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...r})}function Ao(t){return y.matchAll(/\w+|\[(\w*)]/g,t).map(r=>r[0]==="[]"?"":r[1]||r[0])}function To(t){const r={},n=Object.keys(t);let s;const i=n.length;let a;for(s=0;s<i;s++)a=n[s],r[a]=t[a];return r}function en(t){function r(n,s,i,a){let o=n[a++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),u=a>=n.length;return o=!o&&y.isArray(i)?i.length:o,u?(y.hasOwnProp(i,o)?i[o]=[i[o],s]:i[o]=s,!l):((!i[o]||!y.isObject(i[o]))&&(i[o]=[]),r(n,s,i[o],a)&&y.isArray(i[o])&&(i[o]=To(i[o])),!l)}if(y.isFormData(t)&&y.isFunction(t.entries)){const n={};return y.forEachEntry(t,(s,i)=>{r(Ao(s),i,n,0)}),n}return null}function Fo(t,r,n){if(y.isString(t))try{return(r||JSON.parse)(t),y.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(t)}const wt={transitional:Zs,adapter:["xhr","http","fetch"],transformRequest:[function(r,n){const s=n.getContentType()||"",i=s.indexOf("application/json")>-1,a=y.isObject(r);if(a&&y.isHTMLForm(r)&&(r=new FormData(r)),y.isFormData(r))return i?JSON.stringify(en(r)):r;if(y.isArrayBuffer(r)||y.isBuffer(r)||y.isStream(r)||y.isFile(r)||y.isBlob(r)||y.isReadableStream(r))return r;if(y.isArrayBufferView(r))return r.buffer;if(y.isURLSearchParams(r))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let l;if(a){if(s.indexOf("application/x-www-form-urlencoded")>-1)return ko(r,this.formSerializer).toString();if((l=y.isFileList(r))||s.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Xt(l?{"files[]":r}:r,u&&new u,this.formSerializer)}}return a||i?(n.setContentType("application/json",!1),Fo(r)):r}],transformResponse:[function(r){const n=this.transitional||wt.transitional,s=n&&n.forcedJSONParsing,i=this.responseType==="json";if(y.isResponse(r)||y.isReadableStream(r))return r;if(r&&y.isString(r)&&(s&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(r)}catch(l){if(o)throw l.name==="SyntaxError"?z.from(l,z.ERR_BAD_RESPONSE,this,null,this.response):l}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:he.classes.FormData,Blob:he.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};y.forEach(["delete","get","head","post","put","patch"],t=>{wt.headers[t]={}});const Do=y.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),No=t=>{const r={};let n,s,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),s=o.substring(i+1).trim(),!(!n||r[n]&&Do[n])&&(n==="set-cookie"?r[n]?r[n].push(s):r[n]=[s]:r[n]=r[n]?r[n]+", "+s:s)}),r},es=Symbol("internals");function ut(t){return t&&String(t).trim().toLowerCase()}function Tt(t){return t===!1||t==null?t:y.isArray(t)?t.map(Tt):String(t)}function Mo(t){const r=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(t);)r[s[1]]=s[2];return r}const Uo=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function ir(t,r,n,s,i){if(y.isFunction(s))return s.call(this,r,n);if(i&&(r=n),!!y.isString(r)){if(y.isString(s))return r.indexOf(s)!==-1;if(y.isRegExp(s))return s.test(r)}}function Lo(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,n,s)=>n.toUpperCase()+s)}function Bo(t,r){const n=y.toCamelCase(" "+r);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+n,{value:function(i,a,o){return this[s].call(this,r,i,a,o)},configurable:!0})})}let ge=class{constructor(r){r&&this.set(r)}set(r,n,s){const i=this;function a(l,u,c){const d=ut(u);if(!d)throw new Error("header name must be a non-empty string");const f=y.findKey(i,d);(!f||i[f]===void 0||c===!0||c===void 0&&i[f]!==!1)&&(i[f||u]=Tt(l))}const o=(l,u)=>y.forEach(l,(c,d)=>a(c,d,u));if(y.isPlainObject(r)||r instanceof this.constructor)o(r,n);else if(y.isString(r)&&(r=r.trim())&&!Uo(r))o(No(r),n);else if(y.isObject(r)&&y.isIterable(r)){let l={},u,c;for(const d of r){if(!y.isArray(d))throw TypeError("Object iterator must return a key-value pair");l[c=d[0]]=(u=l[c])?y.isArray(u)?[...u,d[1]]:[u,d[1]]:d[1]}o(l,n)}else r!=null&&a(n,r,s);return this}get(r,n){if(r=ut(r),r){const s=y.findKey(this,r);if(s){const i=this[s];if(!n)return i;if(n===!0)return Mo(i);if(y.isFunction(n))return n.call(this,i,s);if(y.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,n){if(r=ut(r),r){const s=y.findKey(this,r);return!!(s&&this[s]!==void 0&&(!n||ir(this,this[s],s,n)))}return!1}delete(r,n){const s=this;let i=!1;function a(o){if(o=ut(o),o){const l=y.findKey(s,o);l&&(!n||ir(s,s[l],l,n))&&(delete s[l],i=!0)}}return y.isArray(r)?r.forEach(a):a(r),i}clear(r){const n=Object.keys(this);let s=n.length,i=!1;for(;s--;){const a=n[s];(!r||ir(this,this[a],a,r,!0))&&(delete this[a],i=!0)}return i}normalize(r){const n=this,s={};return y.forEach(this,(i,a)=>{const o=y.findKey(s,a);if(o){n[o]=Tt(i),delete n[a];return}const l=r?Lo(a):String(a).trim();l!==a&&delete n[a],n[l]=Tt(i),s[l]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const n=Object.create(null);return y.forEach(this,(s,i)=>{s!=null&&s!==!1&&(n[i]=r&&y.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,n])=>r+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...n){const s=new this(r);return n.forEach(i=>s.set(i)),s}static accessor(r){const s=(this[es]=this[es]={accessors:{}}).accessors,i=this.prototype;function a(o){const l=ut(o);s[l]||(Bo(i,o),s[l]=!0)}return y.isArray(r)?r.forEach(a):a(r),this}};ge.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);y.reduceDescriptors(ge.prototype,({value:t},r)=>{let n=r[0].toUpperCase()+r.slice(1);return{get:()=>t,set(s){this[n]=s}}});y.freezeMethods(ge);function ar(t,r){const n=this||wt,s=r||n,i=ge.from(s.headers);let a=s.data;return y.forEach(t,function(l){a=l.call(n,a,i.normalize(),r?r.status:void 0)}),i.normalize(),a}function tn(t){return!!(t&&t.__CANCEL__)}function ot(t,r,n){z.call(this,t??"canceled",z.ERR_CANCELED,r,n),this.name="CanceledError"}y.inherits(ot,z,{__CANCEL__:!0});function rn(t,r,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?t(n):r(new z("Request failed with status code "+n.status,[z.ERR_BAD_REQUEST,z.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function qo(t){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return r&&r[1]||""}function Wo(t,r){t=t||10;const n=new Array(t),s=new Array(t);let i=0,a=0,o;return r=r!==void 0?r:1e3,function(u){const c=Date.now(),d=s[a];o||(o=c),n[i]=u,s[i]=c;let f=a,j=0;for(;f!==i;)j+=n[f++],f=f%t;if(i=(i+1)%t,i===a&&(a=(a+1)%t),c-o<r)return;const C=d&&c-d;return C?Math.round(j*1e3/C):void 0}}function $o(t,r){let n=0,s=1e3/r,i,a;const o=(c,d=Date.now())=>{n=d,i=null,a&&(clearTimeout(a),a=null),t(...c)};return[(...c)=>{const d=Date.now(),f=d-n;f>=s?o(c,d):(i=c,a||(a=setTimeout(()=>{a=null,o(i)},s-f)))},()=>i&&o(i)]}const zt=(t,r,n=3)=>{let s=0;const i=Wo(50,250);return $o(a=>{const o=a.loaded,l=a.lengthComputable?a.total:void 0,u=o-s,c=i(u),d=o<=l;s=o;const f={loaded:o,total:l,progress:l?o/l:void 0,bytes:u,rate:c||void 0,estimated:c&&l&&d?(l-o)/c:void 0,event:a,lengthComputable:l!=null,[r?"download":"upload"]:!0};t(f)},n)},ts=(t,r)=>{const n=t!=null;return[s=>r[0]({lengthComputable:n,total:t,loaded:s}),r[1]]},rs=t=>(...r)=>y.asap(()=>t(...r)),zo=he.hasStandardBrowserEnv?((t,r)=>n=>(n=new URL(n,he.origin),t.protocol===n.protocol&&t.host===n.host&&(r||t.port===n.port)))(new URL(he.origin),he.navigator&&/(msie|trident)/i.test(he.navigator.userAgent)):()=>!0,Qo=he.hasStandardBrowserEnv?{write(t,r,n,s,i,a){const o=[t+"="+encodeURIComponent(r)];y.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),y.isString(s)&&o.push("path="+s),y.isString(i)&&o.push("domain="+i),a===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const r=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Vo(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Ho(t,r){return r?t.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):t}function sn(t,r,n){let s=!Vo(r);return t&&(s||n==!1)?Ho(t,r):r}const ss=t=>t instanceof ge?{...t}:t;function Ye(t,r){r=r||{};const n={};function s(c,d,f,j){return y.isPlainObject(c)&&y.isPlainObject(d)?y.merge.call({caseless:j},c,d):y.isPlainObject(d)?y.merge({},d):y.isArray(d)?d.slice():d}function i(c,d,f,j){if(y.isUndefined(d)){if(!y.isUndefined(c))return s(void 0,c,f,j)}else return s(c,d,f,j)}function a(c,d){if(!y.isUndefined(d))return s(void 0,d)}function o(c,d){if(y.isUndefined(d)){if(!y.isUndefined(c))return s(void 0,c)}else return s(void 0,d)}function l(c,d,f){if(f in r)return s(c,d);if(f in t)return s(void 0,c)}const u={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(c,d,f)=>i(ss(c),ss(d),f,!0)};return y.forEach(Object.keys({...t,...r}),function(d){const f=u[d]||i,j=f(t[d],r[d],d);y.isUndefined(j)&&f!==l||(n[d]=j)}),n}const nn=t=>{const r=Ye({},t);let{data:n,withXSRFToken:s,xsrfHeaderName:i,xsrfCookieName:a,headers:o,auth:l}=r;r.headers=o=ge.from(o),r.url=Xs(sn(r.baseURL,r.url,r.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let u;if(y.isFormData(n)){if(he.hasStandardBrowserEnv||he.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((u=o.getContentType())!==!1){const[c,...d]=u?u.split(";").map(f=>f.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...d].join("; "))}}if(he.hasStandardBrowserEnv&&(s&&y.isFunction(s)&&(s=s(r)),s||s!==!1&&zo(r.url))){const c=i&&a&&Qo.read(a);c&&o.set(i,c)}return r},Ko=typeof XMLHttpRequest<"u",Go=Ko&&function(t){return new Promise(function(n,s){const i=nn(t);let a=i.data;const o=ge.from(i.headers).normalize();let{responseType:l,onUploadProgress:u,onDownloadProgress:c}=i,d,f,j,C,x;function v(){C&&C(),x&&x(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let S=new XMLHttpRequest;S.open(i.method.toUpperCase(),i.url,!0),S.timeout=i.timeout;function m(){if(!S)return;const R=ge.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),B={data:!l||l==="text"||l==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:R,config:t,request:S};rn(function(P){n(P),v()},function(P){s(P),v()},B),S=null}"onloadend"in S?S.onloadend=m:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(m)},S.onabort=function(){S&&(s(new z("Request aborted",z.ECONNABORTED,t,S)),S=null)},S.onerror=function(){s(new z("Network Error",z.ERR_NETWORK,t,S)),S=null},S.ontimeout=function(){let L=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const B=i.transitional||Zs;i.timeoutErrorMessage&&(L=i.timeoutErrorMessage),s(new z(L,B.clarifyTimeoutError?z.ETIMEDOUT:z.ECONNABORTED,t,S)),S=null},a===void 0&&o.setContentType(null),"setRequestHeader"in S&&y.forEach(o.toJSON(),function(L,B){S.setRequestHeader(B,L)}),y.isUndefined(i.withCredentials)||(S.withCredentials=!!i.withCredentials),l&&l!=="json"&&(S.responseType=i.responseType),c&&([j,x]=zt(c,!0),S.addEventListener("progress",j)),u&&S.upload&&([f,C]=zt(u),S.upload.addEventListener("progress",f),S.upload.addEventListener("loadend",C)),(i.cancelToken||i.signal)&&(d=R=>{S&&(s(!R||R.type?new ot(null,t,S):R),S.abort(),S=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const _=qo(i.url);if(_&&he.protocols.indexOf(_)===-1){s(new z("Unsupported protocol "+_+":",z.ERR_BAD_REQUEST,t));return}S.send(a||null)})},Jo=(t,r)=>{const{length:n}=t=t?t.filter(Boolean):[];if(r||n){let s=new AbortController,i;const a=function(c){if(!i){i=!0,l();const d=c instanceof Error?c:this.reason;s.abort(d instanceof z?d:new ot(d instanceof Error?d.message:d))}};let o=r&&setTimeout(()=>{o=null,a(new z(`timeout ${r} of ms exceeded`,z.ETIMEDOUT))},r);const l=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(a):c.removeEventListener("abort",a)}),t=null)};t.forEach(c=>c.addEventListener("abort",a));const{signal:u}=s;return u.unsubscribe=()=>y.asap(l),u}},Yo=function*(t,r){let n=t.byteLength;if(n<r){yield t;return}let s=0,i;for(;s<n;)i=s+r,yield t.slice(s,i),s=i},Xo=async function*(t,r){for await(const n of Zo(t))yield*Yo(n,r)},Zo=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const r=t.getReader();try{for(;;){const{done:n,value:s}=await r.read();if(n)break;yield s}}finally{await r.cancel()}},ns=(t,r,n,s)=>{const i=Xo(t,r);let a=0,o,l=u=>{o||(o=!0,s&&s(u))};return new ReadableStream({async pull(u){try{const{done:c,value:d}=await i.next();if(c){l(),u.close();return}let f=d.byteLength;if(n){let j=a+=f;n(j)}u.enqueue(new Uint8Array(d))}catch(c){throw l(c),c}},cancel(u){return l(u),i.return()}},{highWaterMark:2})},Zt=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",an=Zt&&typeof ReadableStream=="function",el=Zt&&(typeof TextEncoder=="function"?(t=>r=>t.encode(r))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),on=(t,...r)=>{try{return!!t(...r)}catch{return!1}},tl=an&&on(()=>{let t=!1;const r=new Request(he.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!r}),is=64*1024,vr=an&&on(()=>y.isReadableStream(new Response("").body)),Qt={stream:vr&&(t=>t.body)};Zt&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(r=>{!Qt[r]&&(Qt[r]=y.isFunction(t[r])?n=>n[r]():(n,s)=>{throw new z(`Response type '${r}' is not supported`,z.ERR_NOT_SUPPORT,s)})})})(new Response);const rl=async t=>{if(t==null)return 0;if(y.isBlob(t))return t.size;if(y.isSpecCompliantForm(t))return(await new Request(he.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(y.isArrayBufferView(t)||y.isArrayBuffer(t))return t.byteLength;if(y.isURLSearchParams(t)&&(t=t+""),y.isString(t))return(await el(t)).byteLength},sl=async(t,r)=>{const n=y.toFiniteNumber(t.getContentLength());return n??rl(r)},nl=Zt&&(async t=>{let{url:r,method:n,data:s,signal:i,cancelToken:a,timeout:o,onDownloadProgress:l,onUploadProgress:u,responseType:c,headers:d,withCredentials:f="same-origin",fetchOptions:j}=nn(t);c=c?(c+"").toLowerCase():"text";let C=Jo([i,a&&a.toAbortSignal()],o),x;const v=C&&C.unsubscribe&&(()=>{C.unsubscribe()});let S;try{if(u&&tl&&n!=="get"&&n!=="head"&&(S=await sl(d,s))!==0){let B=new Request(r,{method:"POST",body:s,duplex:"half"}),M;if(y.isFormData(s)&&(M=B.headers.get("content-type"))&&d.setContentType(M),B.body){const[P,T]=ts(S,zt(rs(u)));s=ns(B.body,is,P,T)}}y.isString(f)||(f=f?"include":"omit");const m="credentials"in Request.prototype;x=new Request(r,{...j,signal:C,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:s,duplex:"half",credentials:m?f:void 0});let _=await fetch(x,j);const R=vr&&(c==="stream"||c==="response");if(vr&&(l||R&&v)){const B={};["status","statusText","headers"].forEach(q=>{B[q]=_[q]});const M=y.toFiniteNumber(_.headers.get("content-length")),[P,T]=l&&ts(M,zt(rs(l),!0))||[];_=new Response(ns(_.body,is,P,()=>{T&&T(),v&&v()}),B)}c=c||"text";let L=await Qt[y.findKey(Qt,c)||"text"](_,t);return!R&&v&&v(),await new Promise((B,M)=>{rn(B,M,{data:L,headers:ge.from(_.headers),status:_.status,statusText:_.statusText,config:t,request:x})})}catch(m){throw v&&v(),m&&m.name==="TypeError"&&/Load failed|fetch/i.test(m.message)?Object.assign(new z("Network Error",z.ERR_NETWORK,t,x),{cause:m.cause||m}):z.from(m,m&&m.code,t,x)}}),br={http:vo,xhr:Go,fetch:nl};y.forEach(br,(t,r)=>{if(t){try{Object.defineProperty(t,"name",{value:r})}catch{}Object.defineProperty(t,"adapterName",{value:r})}});const as=t=>`- ${t}`,il=t=>y.isFunction(t)||t===null||t===!1,ln={getAdapter:t=>{t=y.isArray(t)?t:[t];const{length:r}=t;let n,s;const i={};for(let a=0;a<r;a++){n=t[a];let o;if(s=n,!il(n)&&(s=br[(o=String(n)).toLowerCase()],s===void 0))throw new z(`Unknown adapter '${o}'`);if(s)break;i[o||"#"+a]=s}if(!s){const a=Object.entries(i).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=r?a.length>1?`since :
`+a.map(as).join(`
`):" "+as(a[0]):"as no adapter specified";throw new z("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return s},adapters:br};function or(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ot(null,t)}function os(t){return or(t),t.headers=ge.from(t.headers),t.data=ar.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),ln.getAdapter(t.adapter||wt.adapter)(t).then(function(s){return or(t),s.data=ar.call(t,t.transformResponse,s),s.headers=ge.from(s.headers),s},function(s){return tn(s)||(or(t),s&&s.response&&(s.response.data=ar.call(t,t.transformResponse,s.response),s.response.headers=ge.from(s.response.headers))),Promise.reject(s)})}const cn="1.11.0",er={};["object","boolean","number","function","string","symbol"].forEach((t,r)=>{er[t]=function(s){return typeof s===t||"a"+(r<1?"n ":" ")+t}});const ls={};er.transitional=function(r,n,s){function i(a,o){return"[Axios v"+cn+"] Transitional option '"+a+"'"+o+(s?". "+s:"")}return(a,o,l)=>{if(r===!1)throw new z(i(o," has been removed"+(n?" in "+n:"")),z.ERR_DEPRECATED);return n&&!ls[o]&&(ls[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),r?r(a,o,l):!0}};er.spelling=function(r){return(n,s)=>(console.warn(`${s} is likely a misspelling of ${r}`),!0)};function al(t,r,n){if(typeof t!="object")throw new z("options must be an object",z.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let i=s.length;for(;i-- >0;){const a=s[i],o=r[a];if(o){const l=t[a],u=l===void 0||o(l,a,t);if(u!==!0)throw new z("option "+a+" must be "+u,z.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new z("Unknown option "+a,z.ERR_BAD_OPTION)}}const Ft={assertOptions:al,validators:er},Ie=Ft.validators;let Je=class{constructor(r){this.defaults=r||{},this.interceptors={request:new Zr,response:new Zr}}async request(r,n){try{return await this._request(r,n)}catch(s){if(s instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{s.stack?a&&!String(s.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+a):s.stack=a}catch{}}throw s}}_request(r,n){typeof r=="string"?(n=n||{},n.url=r):n=r||{},n=Ye(this.defaults,n);const{transitional:s,paramsSerializer:i,headers:a}=n;s!==void 0&&Ft.assertOptions(s,{silentJSONParsing:Ie.transitional(Ie.boolean),forcedJSONParsing:Ie.transitional(Ie.boolean),clarifyTimeoutError:Ie.transitional(Ie.boolean)},!1),i!=null&&(y.isFunction(i)?n.paramsSerializer={serialize:i}:Ft.assertOptions(i,{encode:Ie.function,serialize:Ie.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Ft.assertOptions(n,{baseUrl:Ie.spelling("baseURL"),withXsrfToken:Ie.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=a&&y.merge(a.common,a[n.method]);a&&y.forEach(["delete","get","head","post","put","patch","common"],x=>{delete a[x]}),n.headers=ge.concat(o,a);const l=[];let u=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(n)===!1||(u=u&&v.synchronous,l.unshift(v.fulfilled,v.rejected))});const c=[];this.interceptors.response.forEach(function(v){c.push(v.fulfilled,v.rejected)});let d,f=0,j;if(!u){const x=[os.bind(this),void 0];for(x.unshift(...l),x.push(...c),j=x.length,d=Promise.resolve(n);f<j;)d=d.then(x[f++],x[f++]);return d}j=l.length;let C=n;for(f=0;f<j;){const x=l[f++],v=l[f++];try{C=x(C)}catch(S){v.call(this,S);break}}try{d=os.call(this,C)}catch(x){return Promise.reject(x)}for(f=0,j=c.length;f<j;)d=d.then(c[f++],c[f++]);return d}getUri(r){r=Ye(this.defaults,r);const n=sn(r.baseURL,r.url,r.allowAbsoluteUrls);return Xs(n,r.params,r.paramsSerializer)}};y.forEach(["delete","get","head","options"],function(r){Je.prototype[r]=function(n,s){return this.request(Ye(s||{},{method:r,url:n,data:(s||{}).data}))}});y.forEach(["post","put","patch"],function(r){function n(s){return function(a,o,l){return this.request(Ye(l||{},{method:r,headers:s?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}Je.prototype[r]=n(),Je.prototype[r+"Form"]=n(!0)});let ol=class un{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const s=this;this.promise.then(i=>{if(!s._listeners)return;let a=s._listeners.length;for(;a-- >0;)s._listeners[a](i);s._listeners=null}),this.promise.then=i=>{let a;const o=new Promise(l=>{s.subscribe(l),a=l}).then(i);return o.cancel=function(){s.unsubscribe(a)},o},r(function(a,o,l){s.reason||(s.reason=new ot(a,o,l),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const n=this._listeners.indexOf(r);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const r=new AbortController,n=s=>{r.abort(s)};return this.subscribe(n),r.signal.unsubscribe=()=>this.unsubscribe(n),r.signal}static source(){let r;return{token:new un(function(i){r=i}),cancel:r}}};function ll(t){return function(n){return t.apply(null,n)}}function cl(t){return y.isObject(t)&&t.isAxiosError===!0}const jr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(jr).forEach(([t,r])=>{jr[r]=t});function dn(t){const r=new Je(t),n=Bs(Je.prototype.request,r);return y.extend(n,Je.prototype,r,{allOwnKeys:!0}),y.extend(n,r,null,{allOwnKeys:!0}),n.create=function(i){return dn(Ye(t,i))},n}const oe=dn(wt);oe.Axios=Je;oe.CanceledError=ot;oe.CancelToken=ol;oe.isCancel=tn;oe.VERSION=cn;oe.toFormData=Xt;oe.AxiosError=z;oe.Cancel=oe.CanceledError;oe.all=function(r){return Promise.all(r)};oe.spread=ll;oe.isAxiosError=cl;oe.mergeConfig=Ye;oe.AxiosHeaders=ge;oe.formToJSON=t=>en(y.isHTMLForm(t)?new FormData(t):t);oe.getAdapter=ln.getAdapter;oe.HttpStatusCode=jr;oe.default=oe;const{Axios:Al,AxiosError:Tl,CanceledError:Fl,isCancel:Dl,CancelToken:Nl,VERSION:Ml,all:Ul,Cancel:Ll,isAxiosError:Bl,spread:ql,toFormData:Wl,AxiosHeaders:$l,HttpStatusCode:zl,formToJSON:Ql,getAdapter:Vl,mergeConfig:Hl}=oe,Y=oe.create({baseURL:"/api",timeout:1e4,headers:{"Content-Type":"application/json"}});Y.interceptors.request.use(t=>{const r=localStorage.getItem("token");return r&&(t.headers.Authorization=`Bearer ${r}`),t},t=>Promise.reject(t));Y.interceptors.response.use(t=>t,t=>Promise.reject(t));const pt={searchItems:async t=>(await Y.get("/search/items",{params:t})).data,searchUsers:async t=>(await Y.get("/search/users",{params:t})).data,getSuggestions:async(t,r="items")=>(await Y.get("/search/suggestions",{params:{q:t,type:r}})).data,getPopularSearches:async()=>(await Y.get("/search/popular")).data},_r={getCategories:async()=>(await Y.get("/categories")).data,getCategoryBySlug:async t=>(await Y.get(`/categories/${t}`)).data,getCategoryStats:async t=>(await Y.get(`/categories/${t}/stats`)).data},Qe={createItem:async t=>(await Y.post("/items",t,{headers:{"Content-Type":"multipart/form-data"}})).data,getItem:async t=>(await Y.get(`/items/${t}`)).data,updateItem:async(t,r)=>(await Y.put(`/items/${t}`,r,{headers:{"Content-Type":"multipart/form-data"}})).data,uploadImages:async(t,r)=>{const n=new FormData;return r.forEach(i=>{n.append("images",i)}),(await Y.patch(`/items/${t}/images`,n,{headers:{"Content-Type":"multipart/form-data"}})).data},deleteItem:async t=>(await Y.delete(`/items/${t}`)).data,toggleItemAvailability:async t=>(await Y.patch(`/items/${t}/toggle`)).data,getUserItems:async t=>(await Y.get(`/users/${t}/items`)).data},Vt={getTrades:async t=>(await Y.get("/trades",{params:t})).data,getTrade:async t=>(await Y.get(`/trades/${t}`)).data,updateTradeStatus:async(t,r)=>(await Y.patch(`/trades/${t}/status`,r)).data,initiateTrade:async t=>(await Y.post("/trades",t)).data},Ht={getCurrentUser:async()=>(await Y.get("/users/me")).data,getUserProfile:async t=>(await Y.get(`/users/profile/${t}`)).data,updateProfile:async t=>(await Y.put("/users/me",t,{headers:{"Content-Type":"multipart/form-data"}})).data,getUserItems:async(t,r)=>(await Y.get(`/users/${t}/items`,{params:r})).data,getUserReviews:async(t,r)=>(await Y.get(`/users/${t}/reviews`,{params:r})).data},hn=O.createContext(void 0),Ce=()=>{const t=O.useContext(hn);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},ul=({children:t})=>{const[r,n]=O.useState(null),[s,i]=O.useState(!0),a=Ae(),o=it(),l=O.useCallback(async()=>{var C,x;try{if(!localStorage.getItem("token")){i(!1);return}const m=(await Y.get("/auth/me")).data.user;n({id:m.id,email:m.email,username:m.username,firstName:m.first_name,lastName:m.last_name,avatarUrl:m.avatar_url,trustScore:m.trust_score,isVerified:m.is_verified})}catch(v){console.error("Auth check failed:",v),(((C=v.response)==null?void 0:C.status)===401||((x=v.response)==null?void 0:x.status)===403)&&(localStorage.removeItem("token"),n(null))}finally{i(!1)}},[]);O.useEffect(()=>{localStorage.getItem("token")?l():i(!1)},[l]);const j={user:r,loading:s,login:async(C,x)=>{var v,S;try{const m=await Y.post("/auth/login",{email:C,password:x}),{token:_,user:R}=m.data;localStorage.setItem("token",_),n({id:R.id,email:R.email,username:R.username,firstName:R.first_name,lastName:R.last_name,avatarUrl:R.avatar_url,trustScore:R.trust_score,isVerified:R.is_verified}),le.success("Welcome back!"),a("/")}catch(m){const _=((S=(v=m.response)==null?void 0:v.data)==null?void 0:S.error)||"Login failed";throw le.error(_),m}},register:async C=>{var x,v;try{const S=await Y.post("/auth/register",{email:C.email,username:C.username,password:C.password,firstName:C.firstName,lastName:C.lastName}),{token:m,user:_}=S.data;localStorage.setItem("token",m),n({id:_.id,email:_.email,username:_.username,firstName:_.first_name,lastName:_.last_name,avatarUrl:_.avatar_url,trustScore:_.trust_score,isVerified:_.is_verified}),le.success("Account created successfully!"),a("/")}catch(S){const m=((v=(x=S.response)==null?void 0:x.data)==null?void 0:v.error)||"Registration failed";throw le.error(m),S}},logout:()=>{n(null),localStorage.removeItem("token"),o.clear(),a("/"),le.success("Logged out successfully")},updateUser:C=>{r&&n({...r,...C})}};return e.jsx(hn.Provider,{value:j,children:t})},cs=()=>{const t=us(),r=ds(t.breakpoints.down("md")),[n,s]=O.useState(!1),[i,a]=O.useState(null),{user:o,logout:l,loading:u}=Ce(),c=Ae(),d=ui(),{data:f=0}=qe(["unreadMessages"],async()=>(await Y.get("/messages/unread/count")).data.unreadCount,{enabled:!!o&&!u,refetchInterval:3e4});if(u)return e.jsx(p,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",bgcolor:"background.default"},children:e.jsx(h,{variant:"h6",color:"text.secondary",children:"Loading..."})});const j=()=>{s(!n)},C=_=>{a(_.currentTarget)},x=()=>{a(null)},v=()=>{x(),l()},S=[{text:"Home",icon:e.jsx(An,{}),path:"/"},{text:"Browse Items",icon:e.jsx(Dt,{}),path:"/items"},{text:"AI Matching",icon:e.jsx(Tn,{}),path:"/matching"},{text:"My Trades",icon:e.jsx(Rt,{}),path:"/trades"},{text:"Messages",icon:e.jsx(mt,{}),path:"/messages"},{text:"Profile",icon:e.jsx(Dr,{}),path:"/profile"}],m=e.jsxs(p,{sx:{width:250},children:[e.jsx(p,{sx:{p:2,textAlign:"center"},children:e.jsx(h,{variant:"h6",color:"primary",fontWeight:"bold",children:"SwapCircle"})}),e.jsx(ye,{}),e.jsx(hs,{children:S.map(_=>e.jsxs(fs,{button:!0,onClick:()=>{c(_.path),r&&s(!1)},selected:d.pathname===_.path,sx:{"&.Mui-selected":{backgroundColor:"primary.light",color:"primary.main","&:hover":{backgroundColor:"primary.light"}},"&:hover":{backgroundColor:"primary.light",opacity:.7}},children:[e.jsx(St,{sx:{color:d.pathname===_.path?"primary.main":"inherit"},children:_.icon}),e.jsx(ps,{primary:_.text})]},_.text))})]});return e.jsxs(p,{sx:{display:"flex",minHeight:"100vh"},children:[e.jsx(Rn,{position:"fixed",sx:{zIndex:t.zIndex.drawer+1},children:e.jsx(X,{maxWidth:"xl",children:e.jsxs(In,{children:[e.jsx(Pe,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:j,sx:{mr:2,display:{md:"none"}},children:e.jsx(Pn,{})}),e.jsx(h,{variant:"h6",component:"div",sx:{flexGrow:1,cursor:"pointer"},onClick:()=>c("/"),children:"SwapCircle"}),e.jsxs(p,{sx:{display:{xs:"none",md:"flex"},gap:1},children:[e.jsx(A,{color:"inherit",startIcon:e.jsx(Dt,{}),onClick:()=>c("/items"),children:"Browse"}),e.jsx(A,{color:"inherit",startIcon:e.jsx(Rt,{}),onClick:()=>c("/matching"),children:"AI Matching"})]}),e.jsx(p,{sx:{display:"flex",alignItems:"center",gap:1},children:o?e.jsxs(e.Fragment,{children:[e.jsx(A,{color:"inherit",startIcon:e.jsx(Nt,{}),onClick:()=>c("/create-item"),sx:{display:{xs:"none",sm:"flex"}},children:"List Item"}),e.jsx(Pe,{color:"inherit",onClick:()=>c("/messages"),children:e.jsx(_n,{badgeContent:f,color:"error",children:e.jsx(mt,{})})}),e.jsx(Pe,{onClick:C,sx:{p:0},children:e.jsx(tt,{alt:`${o.firstName} ${o.lastName}`,src:o.avatarUrl,sx:{width:32,height:32},children:o.firstName.charAt(0)})}),e.jsxs(En,{anchorEl:i,open:!!i,onClose:x,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsxs(N,{onClick:()=>{c("/profile"),x()},children:[e.jsx(St,{children:e.jsx(Dr,{fontSize:"small"})}),"Profile"]}),e.jsxs(N,{onClick:()=>{c("/trades"),x()},children:[e.jsx(St,{children:e.jsx(Rt,{fontSize:"small"})}),"My Trades"]}),e.jsx(ye,{}),e.jsxs(N,{onClick:v,children:[e.jsx(St,{children:e.jsx(kn,{fontSize:"small"})}),"Logout"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{color:"inherit",onClick:()=>c("/login"),children:"Login"}),e.jsx(A,{variant:"contained",color:"secondary",onClick:()=>c("/register"),children:"Sign Up"})]})})]})})}),e.jsxs(p,{component:"nav",sx:{width:{md:250},flexShrink:{md:0}},children:[e.jsx(Nr,{variant:"temporary",open:n,onClose:j,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",md:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:250}},children:m}),e.jsx(Nr,{variant:"permanent",sx:{display:{xs:"none",md:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:250}},open:!0,children:m})]}),e.jsx(p,{component:"main",sx:{flexGrow:1,p:3,width:{md:"calc(100% - 250px)"},mt:"64px"},children:e.jsx(di,{})})]})},dl=()=>{const t=us();ds(t.breakpoints.down("md"));const{user:r}=Ce(),n=Ae(),{data:s=[]}=qe(["featuredItems"],async()=>(await Y.get("/items?featured=true&limit=6")).data.items),{data:i=[]}=qe(["popularCategories"],async()=>(await Y.get("/search/popular")).data.popularCategories),a=[{icon:e.jsx(Rt,{sx:{fontSize:40}}),title:"AI-Powered Matching",description:"Our intelligent system suggests perfect trades based on your interests and preferences.",color:t.palette.primary.main},{icon:e.jsx(Fn,{sx:{fontSize:40}}),title:"Trust & Safety",description:"Verified users, secure messaging, and a robust rating system ensure safe trading.",color:t.palette.secondary.main},{icon:e.jsx(Dn,{sx:{fontSize:40}}),title:"Sustainable Living",description:"Reduce waste and promote circular economy by giving items a second life.",color:"#10B981"}],o=[{label:"Active Users",value:"10K+",icon:e.jsx(Mn,{})},{label:"Items Listed",value:"50K+",icon:e.jsx(Un,{})},{label:"Successful Trades",value:"25K+",icon:e.jsx(Ln,{})},{label:"Categories",value:"12+",icon:e.jsx(Bn,{})}];return e.jsxs(p,{sx:{minHeight:"100vh"},children:[e.jsx(p,{sx:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",py:{xs:8,md:12},position:"relative",overflow:"hidden"},children:e.jsx(X,{maxWidth:"lg",children:e.jsxs(I,{container:!0,spacing:4,alignItems:"center",children:[e.jsxs(I,{item:!0,xs:12,md:6,children:[e.jsxs(h,{variant:"h1",sx:{fontSize:{xs:"2.5rem",md:"3.5rem"},fontWeight:700,mb:3,lineHeight:1.2},children:["Trade Without",e.jsx("br",{}),e.jsx("span",{style:{color:"#FFD700"},children:"Money"})]}),e.jsx(h,{variant:"h5",sx:{mb:4,opacity:.9,fontWeight:400},children:"Join SwapCircle - the modern barter marketplace where you can exchange goods and services sustainably while building community connections."}),e.jsx(Nn,{direction:{xs:"column",sm:"row"},spacing:2,children:r?e.jsx(A,{variant:"contained",size:"large",onClick:()=>n("/create-item"),sx:{bgcolor:"white",color:"primary.main",px:4,py:1.5,"&:hover":{bgcolor:"grey.100"}},children:"List an Item"}):e.jsxs(e.Fragment,{children:[e.jsx(A,{variant:"contained",size:"large",onClick:()=>n("/register"),sx:{bgcolor:"white",color:"primary.main",px:4,py:1.5,"&:hover":{bgcolor:"grey.100"}},children:"Get Started"}),e.jsx(A,{variant:"outlined",size:"large",onClick:()=>n("/login"),sx:{borderColor:"white",color:"white",px:4,py:1.5,"&:hover":{borderColor:"white",bgcolor:"rgba(255,255,255,0.1)"}},children:"Sign In"})]})})]}),e.jsx(I,{item:!0,xs:12,md:6,children:e.jsx(p,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:e.jsx(p,{component:"img",src:"/src/Images/BarterHome.jpeg",alt:"Barter Trading",sx:{width:"100%",maxWidth:500,height:"auto",borderRadius:"20px",filter:"drop-shadow(0 20px 40px rgba(0,0,0,0.3))",borderImage:"linear-gradient(135deg, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0.1) 50%, transparent 100%) 1",background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, transparent 100%)",padding:"3px",boxShadow:"inset 0 0 20px rgba(255,255,255,0.1)"}})})})]})})}),e.jsx(p,{sx:{py:6,bgcolor:"background.paper"},children:e.jsx(X,{maxWidth:"lg",children:e.jsx(I,{container:!0,spacing:4,justifyContent:"center",children:o.map((l,u)=>e.jsx(I,{item:!0,xs:6,md:3,children:e.jsxs(p,{sx:{textAlign:"center",p:3,borderRadius:2,bgcolor:"background.default",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[e.jsx(p,{sx:{color:"primary.main",mb:2,p:2,borderRadius:"50%",bgcolor:"primary.light",opacity:.1},children:l.icon}),e.jsx(h,{variant:"h3",fontWeight:"bold",color:"primary",children:l.value}),e.jsx(h,{variant:"body2",color:"text.secondary",children:l.label})]})},u))})})}),e.jsx(p,{sx:{py:8,bgcolor:"background.default"},children:e.jsxs(X,{maxWidth:"lg",children:[e.jsx(h,{variant:"h2",textAlign:"center",sx:{mb:6,fontWeight:700},children:"Why Choose SwapCircle?"}),e.jsx(I,{container:!0,spacing:4,children:a.map((l,u)=>e.jsx(I,{item:!0,xs:12,md:4,children:e.jsxs(Ee,{sx:{height:"100%",textAlign:"center",p:4,"&:hover":{transform:"translateY(-8px)",boxShadow:t.shadows[8]},transition:"all 0.3s ease-in-out"},children:[e.jsx(p,{sx:{color:l.color,mb:3,display:"flex",justifyContent:"center"},children:l.icon}),e.jsx(h,{variant:"h5",fontWeight:"600",sx:{mb:2},children:l.title}),e.jsx(h,{variant:"body1",color:"text.secondary",children:l.description})]})},u))})]})}),s.length>0&&e.jsx(p,{sx:{py:8,bgcolor:"background.paper"},children:e.jsxs(X,{maxWidth:"lg",children:[e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[e.jsx(h,{variant:"h2",fontWeight:"700",children:"Featured Items"}),e.jsx(A,{variant:"outlined",onClick:()=>n("/items"),sx:{display:{xs:"none",sm:"block"}},children:"View All"})]}),e.jsx(I,{container:!0,spacing:3,children:s.slice(0,6).map(l=>e.jsx(I,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(Ee,{sx:{height:"100%",cursor:"pointer","&:hover":{transform:"translateY(-4px)",boxShadow:t.shadows[8]},transition:"all 0.3s ease-in-out"},onClick:()=>n(`/items/${l.id}`),children:[e.jsx(st,{component:"img",height:"200",image:l.images[0]||"/placeholder-item.jpg",alt:l.title,sx:{objectFit:"cover"}}),e.jsxs(Be,{children:[e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1},children:[e.jsx(h,{variant:"h6",fontWeight:"600",noWrap:!0,sx:{maxWidth:"70%"},children:l.title}),e.jsx(Q,{label:`$${l.estimatedValue}`,size:"small",color:"primary",variant:"outlined"})]}),e.jsxs(h,{variant:"body2",color:"text.secondary",sx:{mb:2},children:[l.description.substring(0,80),"..."]}),e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(tt,{src:l.user.avatarUrl,sx:{width:24,height:24},children:l.user.firstName.charAt(0)}),e.jsx(h,{variant:"caption",color:"text.secondary",children:l.user.username})]}),e.jsx(Q,{label:l.condition,size:"small",variant:"outlined",color:"secondary"})]})]})]})},l.id))}),e.jsx(p,{sx:{textAlign:"center",mt:4},children:e.jsx(A,{variant:"contained",size:"large",onClick:()=>n("/items"),sx:{display:{xs:"block",sm:"none"}},children:"Browse All Items"})})]})}),e.jsx(p,{sx:{py:8,bgcolor:"primary.main",color:"white"},children:e.jsx(X,{maxWidth:"md",children:e.jsxs(p,{textAlign:"center",children:[e.jsx(h,{variant:"h3",fontWeight:"700",sx:{mb:3},children:"Ready to Start Trading?"}),e.jsx(h,{variant:"h6",sx:{mb:4,opacity:.9},children:"Join thousands of users who are already enjoying the benefits of sustainable barter trading."}),!r&&e.jsx(A,{variant:"contained",size:"large",onClick:()=>n("/register"),sx:{bgcolor:"white",color:"primary.main",px:6,py:2,fontSize:"1.1rem","&:hover":{bgcolor:"grey.100"}},children:"Create Free Account"})]})})})]})},hl=()=>{const[t,r]=O.useState({email:"",password:""}),[n,s]=O.useState(!1),[i,a]=O.useState("");Ae();const{login:o}=Ce(),l=c=>{r({...t,[c.target.name]:c.target.value})},u=async c=>{var d,f;c.preventDefault(),s(!0),a("");try{await o(t.email,t.password)}catch(j){(f=(d=j.response)==null?void 0:d.data)!=null&&f.error?a(j.response.data.error):j.message?a(j.message):a("Login failed. Please check your credentials and try again.")}finally{s(!1)}};return e.jsx(X,{component:"main",maxWidth:"xs",children:e.jsx(p,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:e.jsxs(ae,{elevation:3,sx:{padding:4,display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},children:[e.jsx(p,{sx:{backgroundColor:"primary.main",borderRadius:"50%",p:1,mb:2},children:e.jsx(qn,{sx:{color:"white",fontSize:32}})}),e.jsx(h,{component:"h1",variant:"h5",gutterBottom:!0,children:"Sign In"}),e.jsx(h,{variant:"body2",color:"text.secondary",align:"center",sx:{mb:3},children:"Welcome back to SwapCircle"}),i&&e.jsx(me,{severity:"error",sx:{width:"100%",mb:2},children:i}),e.jsxs(p,{component:"form",onSubmit:u,sx:{width:"100%"},children:[e.jsx(K,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:t.email,onChange:l,type:"email"}),e.jsx(K,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:t.password,onChange:l}),e.jsx(A,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:n,children:n?e.jsx(ve,{size:24}):"Sign In"}),e.jsx(p,{sx:{textAlign:"center"},children:e.jsx(ms,{component:Os,to:"/register",variant:"body2",children:"Don't have an account? Sign Up"})})]})]})})})},fl=()=>{const[t,r]=O.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",username:""}),[n,s]=O.useState(!1),[i,a]=O.useState("");Ae();const{register:o}=Ce(),l=c=>{r({...t,[c.target.name]:c.target.value})},u=async c=>{var d,f;if(c.preventDefault(),s(!0),a(""),t.password!==t.confirmPassword){a("Passwords do not match"),s(!1);return}try{await o({firstName:t.firstName,lastName:t.lastName,email:t.email,username:t.username,password:t.password})}catch(j){(f=(d=j.response)==null?void 0:d.data)!=null&&f.error?a(j.response.data.error):j.message?a(j.message):a("Registration failed. Please try again.")}finally{s(!1)}};return e.jsx(X,{component:"main",maxWidth:"sm",children:e.jsx(p,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:e.jsxs(ae,{elevation:3,sx:{padding:4,display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},children:[e.jsx(p,{sx:{backgroundColor:"primary.main",borderRadius:"50%",p:1,mb:2},children:e.jsx(Wn,{sx:{color:"white",fontSize:32}})}),e.jsx(h,{component:"h1",variant:"h5",gutterBottom:!0,children:"Create Account"}),e.jsx(h,{variant:"body2",color:"text.secondary",align:"center",sx:{mb:3},children:"Join SwapCircle and start trading today"}),i&&e.jsx(me,{severity:"error",sx:{width:"100%",mb:2},children:i}),e.jsxs(p,{component:"form",onSubmit:u,sx:{width:"100%"},children:[e.jsxs(I,{container:!0,spacing:2,children:[e.jsx(I,{item:!0,xs:12,sm:6,children:e.jsx(K,{required:!0,fullWidth:!0,id:"firstName",label:"First Name",name:"firstName",autoComplete:"given-name",value:t.firstName,onChange:l})}),e.jsx(I,{item:!0,xs:12,sm:6,children:e.jsx(K,{required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"family-name",value:t.lastName,onChange:l})}),e.jsx(I,{item:!0,xs:12,children:e.jsx(K,{required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",value:t.username,onChange:l})}),e.jsx(I,{item:!0,xs:12,children:e.jsx(K,{required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",type:"email",value:t.email,onChange:l})}),e.jsx(I,{item:!0,xs:12,children:e.jsx(K,{required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"new-password",value:t.password,onChange:l})}),e.jsx(I,{item:!0,xs:12,children:e.jsx(K,{required:!0,fullWidth:!0,name:"confirmPassword",label:"Confirm Password",type:"password",id:"confirmPassword",autoComplete:"new-password",value:t.confirmPassword,onChange:l})})]}),e.jsx(A,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:n,children:n?e.jsx(ve,{size:24}):"Create Account"}),e.jsx(p,{sx:{textAlign:"center"},children:e.jsx(ms,{component:Os,to:"/login",variant:"body2",children:"Already have an account? Sign In"})})]})]})})})},pl=()=>{var Fr;const t=Ae(),{user:r}=Ce(),[n,s]=O.useState([]),[i,a]=O.useState(!0),[o,l]=O.useState(!1),[u,c]=O.useState(null),[d,f]=O.useState(""),[j,C]=O.useState(""),[x,v]=O.useState(""),[S,m]=O.useState(""),[_,R]=O.useState(""),[L,B]=O.useState("newest"),[M,P]=O.useState(!1),[T,q]=O.useState(1),[G,F]=O.useState(1),[re,se]=O.useState(0),[W,w]=O.useState([]),[D,$]=O.useState([]),[V,J]=O.useState(!1),[b,U]=O.useState(!1),[g,E]=O.useState(null),[ie,ee]=O.useState(!1),[pe,Ze]=O.useState("");O.useEffect(()=>{const k=setTimeout(()=>{Ze(d),q(1)},500);return()=>clearTimeout(k)},[d]),O.useEffect(()=>{const k=Z=>{if((Z.ctrlKey||Z.metaKey)&&Z.key==="k"){Z.preventDefault();const Se=document.querySelector('input[placeholder*="Search"]');Se&&Se.focus()}Z.key==="Escape"&&d&&(f(""),J(!1))};return document.addEventListener("keydown",k),()=>document.removeEventListener("keydown",k)},[d]),O.useEffect(()=>{Ct()},[]),O.useEffect(()=>{lt()},[pe,j,x,S,_,L,T]);const Ct=async()=>{try{const k=await _r.getCategories();w(k)}catch(k){console.error("Failed to fetch categories:",k)}},Er=async k=>{var Z;if(k.length<2){$([]),J(!1);return}try{const Te=((Z=(await pt.getSuggestions(k,"items")).suggestions)==null?void 0:Z.map(ce=>ce.value))||[];$(Te),J(Te.length>0)}catch(Se){console.error("Failed to fetch suggestions:",Se),$([]),J(!1)}},lt=async()=>{var k,Z,Se,Te;n.length===0?a(!0):l(!0),c(null);try{const ce={page:T,limit:12};pe&&(ce.q=pe),j&&(ce.category=j),x&&(ce.condition=x),S&&(ce.minValue=parseFloat(S)),_&&(ce.maxValue=parseFloat(_));let $e="newest",ze="desc";switch(L){case"newest":$e="newest",ze="desc";break;case"oldest":$e="newest",ze="asc";break;case"value_high":$e="value_high",ze="desc";break;case"value_low":$e="value_low",ze="asc";break;case"popular":$e="popular",ze="desc";break;default:$e="newest",ze="desc"}ce.sortBy=$e,ce.sortOrder=ze;const tr=await pt.searchItems(ce);s(tr.items||[]),F(((k=tr.pagination)==null?void 0:k.pages)||1),se(((Z=tr.pagination)==null?void 0:Z.total)||0)}catch(ce){console.error("Failed to fetch items:",ce),c(((Te=(Se=ce.response)==null?void 0:Se.data)==null?void 0:Te.error)||"Failed to fetch items")}finally{a(!1),l(!1)}},fn=k=>{f(k.target.value),Er(k.target.value)},pn=k=>{C(k.target.value),q(1)},mn=k=>{v(k.target.value),q(1)},xn=k=>{m(k.target.value),q(1)},gn=k=>{R(k.target.value),q(1)},yn=k=>{B(k.target.value),q(1)},kr=(k,Z)=>{q(Z),window.scrollTo({top:0,behavior:"smooth"})},vn=()=>{f(""),C(""),v(""),m(""),R(""),B("newest"),q(1),P(!1)},bn=()=>{C(""),v(""),m(""),R(""),q(1)},ct=()=>j||x||S||_,Ar=k=>k.images&&k.images.length>0?k.images[0]:null,jn=()=>e.jsx(gs,{sx:{fontSize:"4rem",color:"text.secondary"}}),Tr=k=>k.replace("_"," ").replace(/\b\w/g,Z=>Z.toUpperCase()),wn=k=>k!=null&&k.city&&(k!=null&&k.state)?`${k.city}, ${k.state}`:"Location not specified",Cn=k=>r&&k.user_id===r.id,Sn=k=>{E(k),U(!0)},On=async k=>{var Se,Te;if(!k.target.files||!k.target.files[0]||!g){console.log("No file selected or no item selected");return}const Z=k.target.files[0];console.log("File selected:",Z.name,Z.size,Z.type),ee(!0);try{console.log("Uploading image for item:",g.id);const ce=await Qe.uploadImages(g.id,[Z]);console.log("Upload response:",ce),await lt(),le.success("Image uploaded successfully!"),U(!1),E(null)}catch(ce){console.error("Failed to upload image:",ce),console.error("Error response:",ce.response),le.error(((Te=(Se=ce.response)==null?void 0:Se.data)==null?void 0:Te.error)||"Failed to upload image")}finally{ee(!1)}};return i&&n.length===0?e.jsx(X,{maxWidth:"lg",sx:{py:4},children:e.jsx(p,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:e.jsx(ve,{})})}):e.jsxs(X,{maxWidth:"lg",sx:{py:4},children:[e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[e.jsx(h,{variant:"h4",component:"h1",children:"Browse Items"}),e.jsx(A,{variant:"contained",startIcon:e.jsx(Nt,{}),onClick:()=>t("/create-item"),children:"Add Item"})]}),e.jsxs(p,{sx:{mb:4},children:[e.jsx(p,{sx:{position:"relative",mb:2},children:e.jsxs(p,{sx:{display:"flex",gap:2,alignItems:"flex-start"},children:[e.jsxs(p,{sx:{flex:1,position:"relative"},children:[e.jsx(K,{fullWidth:!0,variant:"outlined",placeholder:"Search items by title or description...",value:d,onChange:fn,onFocus:()=>d.length>=2&&J(!0),onBlur:()=>setTimeout(()=>J(!1),200),InputProps:{startAdornment:e.jsx(xs,{position:"start",children:e.jsx(Dt,{})})}}),V&&D.length>0&&e.jsx(p,{sx:{position:"absolute",top:"100%",left:0,right:0,bgcolor:"background.paper",border:1,borderColor:"divider",borderRadius:1,mt:.5,zIndex:1e3,maxHeight:200,overflow:"auto",boxShadow:3},children:D.map((k,Z)=>e.jsx(p,{sx:{px:2,py:1.5,cursor:"pointer","&:hover":{bgcolor:"action.hover"},borderBottom:(Z<D.length-1,0),borderColor:"divider"},onClick:()=>{f(k),J(!1)},children:e.jsx(h,{variant:"body2",children:k})},Z))})]}),e.jsxs(p,{sx:{display:"flex",gap:1,alignItems:"center",flexShrink:0},children:[e.jsxs(be,{sx:{minWidth:180},children:[e.jsx(je,{children:"Sort By"}),e.jsxs(we,{value:L,label:"Sort By",onChange:yn,size:"small",children:[e.jsx(N,{value:"newest",children:"Date Listed (Newest to Oldest)"}),e.jsx(N,{value:"oldest",children:"Date Listed (Oldest to Newest)"}),e.jsx(N,{value:"value_high",children:"Value (High to Low)"}),e.jsx(N,{value:"value_low",children:"Value (Low to High)"}),e.jsx(N,{value:"popular",children:"Most Popular (Views)"})]})]}),e.jsxs(A,{variant:ct()?"contained":"outlined",startIcon:e.jsx(Mr,{}),onClick:()=>P(!0),size:"small",color:ct()?"primary":"inherit",children:["Filters ",ct()&&`(${[j?1:0,x?1:0,S?1:0,_?1:0].reduce((k,Z)=>k+Z,0)})`]})]})]})}),ct()&&e.jsxs(p,{sx:{mb:3},children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Active Filters:"}),e.jsxs(p,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[j&&e.jsx(Q,{label:`Category: ${(Fr=W.find(k=>k.id===j))==null?void 0:Fr.name}`,size:"small",onDelete:()=>C(""),color:"primary",variant:"outlined"}),x&&e.jsx(Q,{label:`Condition: ${Tr(x)}`,size:"small",onDelete:()=>v(""),color:"secondary",variant:"outlined"}),S&&e.jsx(Q,{label:`Min: $${S}`,size:"small",onDelete:()=>m(""),color:"info",variant:"outlined"}),_&&e.jsx(Q,{label:`Max: $${_}`,size:"small",onDelete:()=>R(""),color:"info",variant:"outlined"})]})]}),ct()&&e.jsx(p,{sx:{mb:3},children:e.jsx(A,{variant:"outlined",onClick:vn,size:"small",children:"Clear All Filters"})})]}),e.jsxs(p,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(h,{variant:"body2",color:"text.secondary",children:["Showing ",n.length," of ",re," items"]}),G>1&&e.jsx(lr,{count:G,page:T,onChange:kr,color:"primary"})]}),o&&e.jsx(p,{sx:{display:"flex",justifyContent:"center",mb:3},children:e.jsx(ve,{size:24})}),u&&e.jsx(me,{severity:"error",sx:{mb:3},children:u}),n.length>0?e.jsx(I,{container:!0,spacing:3,children:n.map(k=>e.jsx(I,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(Ee,{sx:{height:"100%",display:"flex",flexDirection:"column",cursor:"pointer","&:hover":{boxShadow:6,transform:"translateY(-2px)",transition:"all 0.2s ease-in-out"}},onClick:()=>t(`/items/${k.id}`),children:[e.jsxs(p,{sx:{position:"relative"},children:[Ar(k)?e.jsx(st,{component:"img",height:"200",image:Ar(k),alt:k.title,sx:{objectFit:"cover"}}):e.jsx(p,{sx:{height:200,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"grey.100",fontSize:"4rem",color:"text.secondary"},children:jn()}),Cn(k)&&e.jsx(p,{sx:{position:"absolute",top:8,right:8,zIndex:1},onClick:Z=>{Z.stopPropagation(),Sn(k)},children:e.jsx(cr,{title:"Upload Image",children:e.jsx(Pe,{size:"small",sx:{bgcolor:"rgba(255, 255, 255, 0.9)","&:hover":{bgcolor:"rgba(255, 255, 255, 1)"}},children:e.jsx(Ve,{fontSize:"small"})})})})]}),e.jsxs(Be,{sx:{flexGrow:1},children:[e.jsx(h,{gutterBottom:!0,variant:"h6",component:"h2",noWrap:!0,children:k.title}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:2},noWrap:!0,children:k.description}),e.jsxs(p,{sx:{mb:2},children:[e.jsx(Q,{label:k.category_name,size:"small",color:"primary",variant:"outlined",sx:{mr:1,mb:1}}),e.jsx(Q,{label:Tr(k.condition),size:"small",color:"secondary",variant:"outlined"})]}),e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsxs(h,{variant:"body2",color:"text.secondary",children:["by ",k.username]}),e.jsxs(h,{variant:"h6",color:"primary",children:["$",k.estimated_value]})]}),e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsx(h,{variant:"caption",color:"text.secondary",children:wn(k.location)}),e.jsx(h,{variant:"caption",color:"text.secondary",children:new Date(k.created_at).toLocaleDateString()})]}),e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(h,{variant:"caption",color:"text.secondary",children:[k.view_count||0," views"]}),e.jsxs(h,{variant:"caption",color:"text.secondary",children:[k.favorite_count||0," favorites"]})]})]})]})},k.id))}):!i&&!u?e.jsxs(p,{sx:{textAlign:"center",py:8},children:[e.jsx(h,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No items found"}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:3},children:pe||j||x||S||_?"Try adjusting your search criteria or filters":"There are currently no items available. Be the first to add one!"}),!pe&&!j&&!x&&!S&&!_&&e.jsx(A,{variant:"contained",startIcon:e.jsx(Nt,{}),onClick:()=>t("/create-item"),children:"Add First Item"})]}):null,G>1&&e.jsx(p,{sx:{display:"flex",justifyContent:"center",mt:4},children:e.jsx(lr,{count:G,page:T,onChange:kr,color:"primary",size:"large"})}),e.jsxs(Ne,{open:M,onClose:()=>P(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(Me,{children:e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Mr,{}),"Filters"]})}),e.jsx(Ue,{children:e.jsxs(p,{sx:{pt:1},children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Category"}),e.jsxs(be,{fullWidth:!0,sx:{mb:3},children:[e.jsx(je,{children:"Select Category"}),e.jsxs(we,{value:j,label:"Select Category",onChange:pn,children:[e.jsx(N,{value:"",children:"All Categories"}),W.map(k=>e.jsx(N,{value:k.id,children:k.name},k.id))]})]}),e.jsx(ye,{sx:{my:2}}),e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Condition"}),e.jsxs(be,{fullWidth:!0,sx:{mb:3},children:[e.jsx(je,{children:"Select Condition"}),e.jsxs(we,{value:x,label:"Select Condition",onChange:mn,children:[e.jsx(N,{value:"",children:"All Conditions"}),e.jsx(N,{value:"new",children:"New"}),e.jsx(N,{value:"like_new",children:"Like New"}),e.jsx(N,{value:"good",children:"Good"}),e.jsx(N,{value:"fair",children:"Fair"}),e.jsx(N,{value:"poor",children:"Poor"})]})]}),e.jsx(ye,{sx:{my:2}}),e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Price Range"}),e.jsxs(p,{sx:{display:"flex",gap:2,mb:3},children:[e.jsx(K,{label:"Min Value ($)",type:"number",value:S,onChange:xn,fullWidth:!0,placeholder:"0"}),e.jsx(K,{label:"Max Value ($)",type:"number",value:_,onChange:gn,fullWidth:!0,placeholder:"1000"})]})]})}),e.jsxs(Le,{children:[e.jsx(A,{onClick:bn,color:"error",children:"Clear All"}),e.jsx(A,{onClick:()=>P(!1),variant:"contained",children:"Apply Filters"})]})]}),e.jsxs(Ne,{open:b,onClose:()=>U(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(Me,{children:e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ve,{}),"Upload Image"]})}),e.jsx(Ue,{children:e.jsxs(p,{sx:{pt:1},children:[e.jsxs(h,{variant:"body1",gutterBottom:!0,children:['Upload an image for "',g==null?void 0:g.title,'"']}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Supported formats: JPG, PNG, GIF. Max size: 5MB."}),e.jsxs(p,{sx:{textAlign:"center",py:3},children:[e.jsx("input",{accept:"image/*",style:{display:"none"},id:"image-upload-input",type:"file",onChange:On,disabled:ie}),e.jsx("label",{htmlFor:"image-upload-input",children:e.jsx(A,{variant:"contained",component:"span",startIcon:e.jsx(Ve,{}),disabled:ie,size:"large",children:ie?"Uploading...":"Choose Image"})})]})]})}),e.jsx(Le,{children:e.jsx(A,{onClick:()=>U(!1),children:"Cancel"})})]})]})},ml=()=>{const{id:t}=wr(),r=Ae(),{user:n}=Ce(),[s,i]=O.useState(null),[a,o]=O.useState(!0),[l,u]=O.useState(null),[c,d]=O.useState(!1),[f,j]=O.useState(!1),[C,x]=O.useState(!1),[v,S]=O.useState(!1),[m,_]=O.useState(!1),[R,L]=O.useState({title:"",description:"",condition:"",estimated_value:"",allows_shipping:!1,allows_pickup:!0,allows_meetup:!0,meetup_radius:25});O.useEffect(()=>{t&&B()},[t]);const B=async()=>{var W,w,D;try{o(!0);const $=await Qe.getItem(t);i($.item),L({title:$.item.title,description:$.item.description,condition:$.item.condition,estimated_value:((W=$.item.estimated_value)==null?void 0:W.toString())||"",allows_shipping:$.item.allows_shipping,allows_pickup:$.item.allows_pickup,allows_meetup:$.item.allows_meetup,meetup_radius:$.item.meetup_radius})}catch($){u(((D=(w=$.response)==null?void 0:w.data)==null?void 0:D.error)||"Failed to fetch item"),le.error("Failed to fetch item")}finally{o(!1)}},M=()=>{d(!0)},P=async()=>{var W,w;try{x(!0);const D=new FormData;D.append("title",R.title),D.append("description",R.description),D.append("condition",R.condition),D.append("estimatedValue",R.estimated_value),D.append("allowsShipping",R.allows_shipping.toString()),D.append("allowsPickup",R.allows_pickup.toString()),D.append("allowsMeetup",R.allows_meetup.toString()),D.append("meetupRadius",R.meetup_radius.toString()),await Qe.updateItem(t,D),await B(),d(!1),le.success("Item updated successfully")}catch(D){le.error(((w=(W=D.response)==null?void 0:W.data)==null?void 0:w.error)||"Failed to update item")}finally{x(!1)}},T=async()=>{try{x(!0),await Qe.toggleItemAvailability(t),await B(),le.success("Item availability updated")}catch{le.error("Failed to update item availability")}finally{x(!1)}},q=async()=>{var W,w;try{x(!0),await Qe.deleteItem(t),le.success("Item deleted successfully"),r("/items")}catch(D){le.error(((w=(W=D.response)==null?void 0:W.data)==null?void 0:w.error)||"Failed to delete item")}finally{x(!1),j(!1)}},G=()=>{S(!0)},F=async W=>{var D,$;if(!W.target.files||!W.target.files[0]||!s)return;const w=W.target.files[0];_(!0);try{const V=await Qe.uploadImages(s.id,[w]);console.log("Image upload response:",V),await B(),le.success("Image uploaded successfully!"),S(!1)}catch(V){console.error("Failed to upload image:",V),le.error((($=(D=V.response)==null?void 0:D.data)==null?void 0:$.error)||"Failed to upload image")}finally{_(!1)}},re=n&&s&&n.id===s.user_id,se=()=>s!=null&&s.images&&s.images.length>0?s.images[0]:null;return a?e.jsx(X,{maxWidth:"lg",sx:{py:4},children:e.jsx(h,{children:"Loading..."})}):l||!s?e.jsx(X,{maxWidth:"lg",sx:{py:4},children:e.jsx(me,{severity:"error",children:l||"Item not found"})}):e.jsxs(X,{maxWidth:"lg",sx:{py:4},children:[e.jsx(A,{startIcon:e.jsx(ys,{}),onClick:()=>r(-1),sx:{mb:3},variant:"text",children:"Back"}),re&&e.jsxs(p,{sx:{mb:3,display:"flex",gap:2,justifyContent:"flex-end"},children:[e.jsx(A,{variant:"outlined",startIcon:s.is_available?e.jsx($n,{}):e.jsx(zn,{}),onClick:T,disabled:C,children:s.is_available?"Mark Unavailable":"Mark Available"}),e.jsx(A,{variant:"outlined",startIcon:e.jsx(Ve,{}),onClick:G,children:"Upload Image"}),e.jsx(A,{variant:"outlined",startIcon:e.jsx(vs,{}),onClick:M,children:"Edit"}),e.jsx(A,{variant:"outlined",color:"error",startIcon:e.jsx(bs,{}),onClick:()=>j(!0),children:"Delete"})]}),e.jsxs(I,{container:!0,spacing:4,children:[e.jsx(I,{item:!0,xs:12,md:6,children:e.jsx(ae,{sx:{p:2,textAlign:"center"},children:se()?e.jsx("img",{src:se(),alt:s.title,style:{width:"100%",maxHeight:"500px",objectFit:"cover",borderRadius:"8px"}}):e.jsxs(p,{sx:{height:"400px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",bgcolor:"grey.100",borderRadius:"8px",gap:2},children:[e.jsx(gs,{sx:{fontSize:"6rem",color:"text.secondary"}}),e.jsx(h,{variant:"body2",color:"text.secondary",children:"No image available"}),re&&e.jsx(A,{variant:"outlined",startIcon:e.jsx(Ve,{}),onClick:G,size:"small",children:"Add Image"})]})})}),e.jsx(I,{item:!0,xs:12,md:6,children:e.jsxs(ae,{sx:{p:3},children:[e.jsxs(p,{sx:{mb:2},children:[e.jsx(h,{variant:"h4",component:"h1",gutterBottom:!0,children:s.title}),!s.is_available&&e.jsx(Q,{label:"Unavailable",color:"error",sx:{mb:1}})]}),e.jsxs(p,{sx:{mb:2},children:[e.jsx(Q,{label:s.condition.replace("_"," "),color:"primary",sx:{mr:1}}),e.jsx(Q,{label:s.category_name,variant:"outlined",sx:{mr:1}})]}),e.jsxs(h,{variant:"h5",color:"primary",gutterBottom:!0,children:["$",s.estimated_value]}),e.jsx(h,{variant:"body1",paragraph:!0,sx:{mb:3},children:s.description}),e.jsxs(p,{sx:{mb:2},children:[e.jsxs(h,{variant:"subtitle2",gutterBottom:!0,children:[" ",s.location.city,", ",s.location.state]}),e.jsxs(h,{variant:"subtitle2",gutterBottom:!0,children:[" Shipping: ",s.allows_shipping?"Yes":"No"]}),e.jsxs(h,{variant:"subtitle2",gutterBottom:!0,children:[" Pickup: ",s.allows_pickup?"Yes":"No"]}),e.jsxs(h,{variant:"subtitle2",gutterBottom:!0,children:[" Meetup: ",s.allows_meetup?"Yes":"No"]}),s.allows_meetup&&e.jsxs(h,{variant:"subtitle2",gutterBottom:!0,children:[" Meetup radius: ",s.meetup_radius," miles"]})]}),s.tags&&s.tags.length>0&&e.jsx(p,{sx:{mb:3},children:s.tags.map(W=>e.jsx(Q,{label:W,size:"small",sx:{mr:1,mb:1}},W))}),e.jsxs(p,{sx:{mb:3,p:2,bgcolor:"grey.50",borderRadius:1},children:[e.jsxs(h,{variant:"subtitle2",gutterBottom:!0,children:["Listed by: ",s.first_name," ",s.last_name," (@",s.username,")"]}),e.jsxs(h,{variant:"caption",color:"text.secondary",children:["Trust Score: ",s.trust_score,"  Views: ",s.view_count,"  Favorites: ",s.favorite_count]})]}),!re&&s.is_available&&e.jsxs(p,{sx:{display:"flex",gap:2},children:[e.jsx(A,{variant:"contained",size:"large",fullWidth:!0,children:"Make Offer"}),e.jsx(A,{variant:"outlined",size:"large",children:e.jsx(js,{})}),e.jsx(A,{variant:"outlined",size:"large",children:e.jsx(ws,{})})]})]})})]}),e.jsxs(Ne,{open:c,onClose:()=>d(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(Me,{children:"Edit Item"}),e.jsx(Ue,{children:e.jsxs(p,{sx:{pt:1},children:[e.jsx(K,{fullWidth:!0,label:"Title",value:R.title,onChange:W=>L({...R,title:W.target.value}),margin:"normal"}),e.jsx(K,{fullWidth:!0,label:"Description",value:R.description,onChange:W=>L({...R,description:W.target.value}),margin:"normal",multiline:!0,rows:4}),e.jsxs(be,{fullWidth:!0,margin:"normal",children:[e.jsx(je,{children:"Condition"}),e.jsxs(we,{value:R.condition,onChange:W=>L({...R,condition:W.target.value}),label:"Condition",children:[e.jsx(N,{value:"new",children:"New"}),e.jsx(N,{value:"like_new",children:"Like New"}),e.jsx(N,{value:"good",children:"Good"}),e.jsx(N,{value:"fair",children:"Fair"}),e.jsx(N,{value:"poor",children:"Poor"})]})]}),e.jsx(K,{fullWidth:!0,label:"Estimated Value ($)",type:"number",value:R.estimated_value,onChange:W=>L({...R,estimated_value:W.target.value}),margin:"normal"}),e.jsxs(p,{sx:{mt:2},children:[e.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:"Shipping Options"}),e.jsxs(p,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsx(A,{variant:R.allows_shipping?"contained":"outlined",onClick:()=>L({...R,allows_shipping:!R.allows_shipping}),size:"small",children:"Shipping"}),e.jsx(A,{variant:R.allows_pickup?"contained":"outlined",onClick:()=>L({...R,allows_pickup:!R.allows_pickup}),size:"small",children:"Pickup"}),e.jsx(A,{variant:R.allows_meetup?"contained":"outlined",onClick:()=>L({...R,allows_meetup:!R.allows_meetup}),size:"small",children:"Meetup"})]})]})]})}),e.jsxs(Le,{children:[e.jsx(A,{onClick:()=>d(!1),children:"Cancel"}),e.jsx(A,{onClick:P,variant:"contained",disabled:C,children:C?"Updating...":"Update"})]})]}),e.jsxs(Ne,{open:f,onClose:()=>j(!1),children:[e.jsx(Me,{children:"Delete Item"}),e.jsx(Ue,{children:e.jsxs(h,{children:['Are you sure you want to delete "',s.title,'"? This action cannot be undone.']})}),e.jsxs(Le,{children:[e.jsx(A,{onClick:()=>j(!1),children:"Cancel"}),e.jsx(A,{onClick:q,color:"error",variant:"contained",disabled:C,children:C?"Deleting...":"Delete"})]})]}),e.jsxs(Ne,{open:v,onClose:()=>S(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(Me,{children:e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ve,{}),"Upload Image"]})}),e.jsx(Ue,{children:e.jsxs(p,{sx:{pt:1},children:[e.jsxs(h,{variant:"body1",gutterBottom:!0,children:['Upload an image for "',s.title,'"']}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Supported formats: JPG, PNG, GIF. Max size: 5MB."}),e.jsxs(p,{sx:{textAlign:"center",py:3},children:[e.jsx("input",{accept:"image/*",style:{display:"none"},id:"image-upload-input",type:"file",onChange:F,disabled:m}),e.jsx("label",{htmlFor:"image-upload-input",children:e.jsx(A,{variant:"contained",component:"span",startIcon:e.jsx(Ve,{}),disabled:m,size:"large",children:m?"Uploading...":"Choose Image"})})]})]})}),e.jsx(Le,{children:e.jsx(A,{onClick:()=>S(!1),children:"Cancel"})})]})]})},xl=()=>{const t=Ae(),[r,n]=O.useState(!1),[s,i]=O.useState(!0),[a,o]=O.useState([]),[l,u]=O.useState(null),[c,d]=O.useState(null),[f,j]=O.useState([]),[C,x]=O.useState([]),[v,S]=O.useState(""),[m,_]=O.useState({title:"",description:"",categoryId:"",itemType:"good",condition:"good",estimatedValue:"",tags:[],allowsShipping:!1,allowsPickup:!0,allowsMeetup:!0,meetupRadius:25,tradePreferences:""}),[R,L]=O.useState({});O.useEffect(()=>{B()},[]);const B=async()=>{try{i(!0);const w=await _r.getCategories();o(w)}catch(w){console.error("Failed to load categories:",w),u("Failed to load categories. Please try again.")}finally{i(!1)}},M=()=>{const w={};return m.title.trim()?m.title.length<3?w.title="Title must be at least 3 characters":m.title.length>100&&(w.title="Title must be less than 100 characters"):w.title="Title is required",m.description.trim()?m.description.length<10?w.description="Description must be at least 10 characters":m.description.length>1e3&&(w.description="Description must be less than 1000 characters"):w.description="Description is required",m.categoryId?m.categoryId.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i)||(w.categoryId="Invalid category ID format"):w.categoryId="Category is required",m.estimatedValue&&parseFloat(m.estimatedValue)<0&&(w.estimatedValue="Value must be positive"),m.tags&&m.tags.length>10&&(w.tags=["Maximum 10 tags allowed"]),L(w),Object.keys(w).length===0},P=(w,D)=>{_($=>({...$,[w]:D})),R[w]&&L($=>({...$,[w]:void 0}))},T=w=>{const D=w.target.files;if(D){const $=Array.from(D);if(f.length+$.length>5){u("Maximum 5 images allowed");return}const V=$.filter(J=>J.type.startsWith("image/")?J.size>5*1024*1024?(u("Image size must be less than 5MB"),!1):!0:(u("Only image files are allowed"),!1));V.length>0&&(j(J=>[...J,...V]),V.forEach(J=>{const b=URL.createObjectURL(J);x(U=>[...U,b])}))}},q=w=>{j(D=>D.filter(($,V)=>V!==w)),x(D=>D.filter(($,V)=>V!==w))},G=()=>{v.trim()&&!m.tags.includes(v.trim())&&m.tags.length<10&&(_(w=>({...w,tags:[...w.tags,v.trim()]})),S(""))},F=w=>{_(D=>({...D,tags:D.tags.filter($=>$!==w)}))},re=async w=>{var $,V,J,b,U,g;if(w.preventDefault(),!localStorage.getItem("token")){u("You must be logged in to create an item");return}if(M()){n(!0),u(null),d(null);try{const E=new FormData;E.append("title",m.title.trim()),E.append("description",m.description.trim()),E.append("categoryId",m.categoryId),E.append("itemType",m.itemType),E.append("condition",m.condition),E.append("estimatedValue",m.estimatedValue||"0"),E.append("tags",JSON.stringify(m.tags||[])),E.append("allowsShipping",m.allowsShipping?"true":"false"),E.append("allowsPickup",m.allowsPickup?"true":"false"),E.append("allowsMeetup",m.allowsMeetup?"true":"false"),E.append("meetupRadius",m.meetupRadius.toString()),E.append("tradePreferences",m.tradePreferences||""),f.forEach((ee,pe)=>{E.append("images",ee)}),console.log("Form data being sent:",{title:m.title.trim(),description:m.description.trim(),categoryId:m.categoryId,itemType:m.itemType,condition:m.condition,estimatedValue:m.estimatedValue||"0",tags:m.tags||[],allowsShipping:m.allowsShipping,allowsPickup:m.allowsPickup,allowsMeetup:m.allowsMeetup,meetupRadius:m.meetupRadius,tradePreferences:m.tradePreferences,imageCount:f.length});for(let[ee,pe]of E.entries())console.log(`FormData ${ee}:`,pe);const ie=await Qe.createItem(E);d("Item created successfully!"),setTimeout(()=>{t(`/items/${ie.item.id}`)},2e3)}catch(E){if(console.error("Failed to create item:",E),E.response?(console.error("Error response:",{status:E.response.status,statusText:E.response.statusText,data:E.response.data,headers:E.response.headers}),E.response.data&&E.response.data.errors&&console.error("Validation errors:",E.response.data.errors)):E.request?console.error("Error request:",E.request):console.error("Error message:",E.message),u(((V=($=E.response)==null?void 0:$.data)==null?void 0:V.error)||((b=(J=E.response)==null?void 0:J.data)==null?void 0:b.message)||"Failed to create item. Please try again."),(g=(U=E.response)==null?void 0:U.data)!=null&&g.errors){const ie=E.response.data.errors.map(ee=>`${ee.param}: ${ee.msg}`).join(", ");u(`Validation errors: ${ie}`)}}finally{n(!1)}}},se=w=>{w.key==="Enter"&&v.trim()&&(w.preventDefault(),G())},W=()=>{_({title:"",description:"",categoryId:"",itemType:"good",condition:"good",estimatedValue:"",tags:[],allowsShipping:!1,allowsPickup:!0,allowsMeetup:!0,meetupRadius:25,tradePreferences:""}),j([]),x([]),L({}),u(null),d(null)};return e.jsxs(X,{maxWidth:"md",sx:{py:4},children:[e.jsx(h,{variant:"h4",component:"h1",gutterBottom:!0,children:"Create New Item"}),c&&e.jsx(me,{severity:"success",sx:{mb:3},children:c}),l&&e.jsx(me,{severity:"error",sx:{mb:3},children:l}),e.jsx(ae,{sx:{p:4},children:e.jsx(p,{component:"form",onSubmit:re,children:e.jsxs(I,{container:!0,spacing:3,children:[e.jsx(I,{item:!0,xs:12,children:e.jsx(K,{required:!0,fullWidth:!0,label:"Item Title",placeholder:"e.g., Vintage Camera, Guitar Lessons",value:m.title,onChange:w=>P("title",w.target.value),error:!!R.title,helperText:R.title||"Give your item a clear, descriptive title",inputProps:{maxLength:100}})}),e.jsx(I,{item:!0,xs:12,children:e.jsx(K,{required:!0,fullWidth:!0,multiline:!0,rows:4,label:"Description",placeholder:"Describe your item or service in detail...",value:m.description,onChange:w=>P("description",w.target.value),error:!!R.description,helperText:R.description||"Be specific about what you're offering",inputProps:{maxLength:1e3}})}),e.jsx(I,{item:!0,xs:12,sm:6,children:e.jsxs(be,{fullWidth:!0,required:!0,error:!!R.categoryId,children:[e.jsx(je,{children:"Category"}),e.jsx(we,{label:"Category",value:m.categoryId,onChange:w=>P("categoryId",w.target.value),disabled:s,children:s?e.jsxs(N,{disabled:!0,children:[e.jsx(ve,{size:16,sx:{mr:1}}),"Loading categories..."]}):a.map(w=>e.jsx(N,{value:w.id,children:w.name},w.id))}),R.categoryId&&e.jsx(Qn,{children:R.categoryId})]})}),e.jsx(I,{item:!0,xs:12,sm:6,children:e.jsxs(be,{fullWidth:!0,required:!0,children:[e.jsx(je,{children:"Item Type"}),e.jsxs(we,{label:"Item Type",value:m.itemType,onChange:w=>P("itemType",w.target.value),children:[e.jsx(N,{value:"good",children:"Good"}),e.jsx(N,{value:"service",children:"Service"})]})]})}),e.jsx(I,{item:!0,xs:12,sm:6,children:e.jsxs(be,{fullWidth:!0,required:!0,children:[e.jsx(je,{children:"Condition"}),e.jsxs(we,{label:"Condition",value:m.condition,onChange:w=>P("condition",w.target.value),children:[e.jsx(N,{value:"new",children:"New"}),e.jsx(N,{value:"like_new",children:"Like New"}),e.jsx(N,{value:"good",children:"Good"}),e.jsx(N,{value:"fair",children:"Fair"}),e.jsx(N,{value:"poor",children:"Poor"})]})]})}),e.jsx(I,{item:!0,xs:12,sm:6,children:e.jsx(K,{fullWidth:!0,label:"Estimated Value ($)",type:"number",placeholder:"0.00",value:m.estimatedValue,onChange:w=>P("estimatedValue",w.target.value),error:!!R.estimatedValue,helperText:R.estimatedValue||"Leave empty if free",InputProps:{startAdornment:e.jsx(xs,{position:"start",children:"$"})},inputProps:{min:0,step:.01}})}),e.jsxs(I,{item:!0,xs:12,children:[e.jsx(K,{fullWidth:!0,label:"Tags",placeholder:"Add tags to help people find your item (press Enter to add)",value:v,onChange:w=>S(w.target.value),onKeyPress:se,error:!!R.tags,helperText:R.tags||`Add relevant tags (${m.tags.length}/10)`,InputProps:{endAdornment:e.jsx(A,{onClick:G,disabled:!v.trim()||m.tags.length>=10,startIcon:e.jsx(Nt,{}),size:"small",children:"Add"})}}),m.tags.length>0&&e.jsx(p,{sx:{mt:1,display:"flex",flexWrap:"wrap",gap:1},children:m.tags.map((w,D)=>e.jsx(Q,{label:w,onDelete:()=>F(w),color:"primary",variant:"outlined"},D))})]}),e.jsxs(I,{item:!0,xs:12,children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Images"}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Upload up to 5 images to showcase your item (JPG, PNG, GIF - max 5MB each)"}),e.jsx("input",{accept:"image/*",style:{display:"none"},id:"image-upload",multiple:!0,type:"file",onChange:T}),e.jsx("label",{htmlFor:"image-upload",children:e.jsxs(A,{variant:"outlined",component:"span",startIcon:e.jsx(Vn,{}),disabled:f.length>=5,children:["Upload Images (",f.length,"/5)"]})}),f.length===0&&e.jsx(h,{variant:"caption",color:"text.secondary",display:"block",sx:{mt:1},children:" Adding images increases your item's visibility by 3x!"}),C.length>0&&e.jsx(I,{container:!0,spacing:2,sx:{mt:2},children:C.map((w,D)=>e.jsx(I,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(Ee,{children:[e.jsx(st,{component:"img",height:"140",image:w,alt:`Preview ${D+1}`}),e.jsx(Be,{sx:{p:1},children:e.jsx(Pe,{size:"small",color:"error",onClick:()=>q(D),sx:{float:"right"},children:e.jsx(bs,{})})})]})},D))})]}),e.jsx(I,{item:!0,xs:12,children:e.jsx(ye,{sx:{my:2},children:e.jsx(h,{variant:"h6",children:"Delivery & Meeting Options"})})}),e.jsxs(I,{item:!0,xs:12,sm:4,children:[e.jsx(rr,{control:e.jsx(sr,{checked:m.allowsShipping,onChange:w=>P("allowsShipping",w.target.checked)}),label:"Allow Shipping"}),e.jsx(h,{variant:"caption",color:"text.secondary",display:"block",children:"Ship items to other users"})]}),e.jsxs(I,{item:!0,xs:12,sm:4,children:[e.jsx(rr,{control:e.jsx(sr,{checked:m.allowsPickup,onChange:w=>P("allowsPickup",w.target.checked)}),label:"Allow Pickup"}),e.jsx(h,{variant:"caption",color:"text.secondary",display:"block",children:"Users can pick up from your location"})]}),e.jsxs(I,{item:!0,xs:12,sm:4,children:[e.jsx(rr,{control:e.jsx(sr,{checked:m.allowsMeetup,onChange:w=>P("allowsMeetup",w.target.checked)}),label:"Allow Meetup"}),e.jsx(h,{variant:"caption",color:"text.secondary",display:"block",children:"Meet users at a public location"})]}),m.allowsMeetup&&e.jsxs(I,{item:!0,xs:12,children:[e.jsxs(h,{gutterBottom:!0,children:["Meetup Radius: ",m.meetupRadius," miles"]}),e.jsx(Hn,{value:m.meetupRadius,onChange:(w,D)=>P("meetupRadius",D),min:1,max:100,marks:[{value:1,label:"1 mi"},{value:25,label:"25 mi"},{value:50,label:"50 mi"},{value:100,label:"100 mi"}],valueLabelDisplay:"auto"})]}),e.jsx(I,{item:!0,xs:12,children:e.jsx(K,{fullWidth:!0,multiline:!0,rows:3,label:"Trade Preferences (Optional)",placeholder:"What would you like to trade for? Any specific items or services you're looking for?",value:m.tradePreferences,onChange:w=>P("tradePreferences",w.target.value),helperText:"Let others know what you're interested in trading for"})}),e.jsx(I,{item:!0,xs:12,children:e.jsxs(p,{sx:{display:"flex",gap:2},children:[e.jsx(A,{type:"submit",variant:"contained",size:"large",startIcon:r?e.jsx(ve,{size:20}):e.jsx(Kn,{}),sx:{flex:1},disabled:r||s,children:r?"Creating Item...":"Create Item"}),e.jsx(A,{type:"button",variant:"outlined",size:"large",onClick:W,disabled:r||s,children:"Reset Form"})]})})]})})})]})},gl=()=>{const{user:t,updateUser:r}=Ce(),[n,s]=O.useState(!1),[i,a]=O.useState({firstName:"",lastName:"",bio:"",phone:"",locationCity:"",locationState:"",locationCountry:"",interests:[],skillsOffered:[]}),[o,l]=O.useState(""),[u,c]=O.useState(""),[d,f]=O.useState(!1),[j,C]=O.useState(""),[x,v]=O.useState("success"),S=it(),{data:m,isLoading:_,error:R,refetch:L}=qe(["currentUserProfile"],Ht.getCurrentUser,{enabled:!!t,staleTime:5*60*1e3}),B=Or(Ht.updateProfile,{onSuccess:b=>{C("Profile updated successfully!"),v("success"),f(!0),s(!1),t&&r({firstName:b.user.first_name,lastName:b.user.last_name,avatarUrl:b.user.avatar_url}),S.invalidateQueries(["currentUserProfile"])},onError:b=>{var g,E,ie,ee,pe,Ze,Ct;console.error("Profile update error:",b),console.error("Error response:",b.response);let U="Failed to update profile";(E=(g=b.response)==null?void 0:g.data)!=null&&E.errors?U=b.response.data.errors.map(lt=>`${lt.param}: ${lt.msg}`).join(", "):(ee=(ie=b.response)==null?void 0:ie.data)!=null&&ee.error?U=b.response.data.error:((pe=b.response)==null?void 0:pe.status)===400?U="Invalid data provided. Please check your input.":((Ze=b.response)==null?void 0:Ze.status)===401?U="Unauthorized. Please log in again.":((Ct=b.response)==null?void 0:Ct.status)===500&&(U="Server error. Please try again later."),C(U),v("error"),f(!0)}});ne.useEffect(()=>{if(m!=null&&m.user){const b=m.user;a({firstName:b.firstName||b.first_name||"",lastName:b.lastName||b.last_name||"",bio:b.bio||"",phone:b.phone||"",locationCity:b.locationCity||b.location_city||"",locationState:b.locationState||b.location_state||"",locationCountry:b.locationCountry||b.location_country||"",interests:Array.isArray(b.interests)?b.interests:[],skillsOffered:Array.isArray(b.skillsOffered)?b.skillsOffered:Array.isArray(b.skills_offered)?b.skills_offered:[]})}},[m]);const M=()=>{s(!0)},P=()=>{if(s(!1),m!=null&&m.user){const b=m.user;a({firstName:b.firstName||b.first_name||"",lastName:b.lastName||b.last_name||"",bio:b.bio||"",phone:b.phone||"",locationCity:b.locationCity||b.location_city||"",locationState:b.locationState||b.location_state||"",locationCountry:b.locationCountry||b.location_country||"",interests:Array.isArray(b.interests)?b.interests:[],skillsOffered:Array.isArray(b.skillsOffered)?b.skillsOffered:Array.isArray(b.skills_offered)?b.skills_offered:[]})}},T=()=>{C("Settings functionality coming soon!"),v("info"),f(!0)},q=(b,U)=>{a(g=>({...g,[b]:U}))},G=()=>{o.trim()&&!(i.interests||[]).includes(o.trim())&&(a(b=>({...b,interests:[...b.interests||[],o.trim()]})),l(""))},F=b=>{a(U=>({...U,interests:(U.interests||[]).filter((g,E)=>E!==b)}))},re=()=>{u.trim()&&!(i.skillsOffered||[]).includes(u.trim())&&(a(b=>({...b,skillsOffered:[...b.skillsOffered||[],u.trim()]})),c(""))},se=b=>{a(U=>({...U,skillsOffered:(U.skillsOffered||[]).filter((g,E)=>E!==b)}))},W=async()=>{const b=new FormData;i.firstName.trim()&&b.append("firstName",i.firstName.trim()),i.lastName.trim()&&b.append("lastName",i.lastName.trim()),i.bio.trim()&&b.append("bio",i.bio.trim()),i.phone.trim()&&b.append("phone",i.phone.trim()),i.locationCity.trim()&&b.append("locationCity",i.locationCity.trim()),i.locationState.trim()&&b.append("locationState",i.locationState.trim()),i.locationCountry.trim()&&b.append("locationCountry",i.locationCountry.trim()),b.append("interests",JSON.stringify(i.interests||[])),b.append("skillsOffered",JSON.stringify(i.skillsOffered||[])),console.log("Submitting profile update with data:",{firstName:i.firstName,lastName:i.lastName,bio:i.bio,phone:i.phone,locationCity:i.locationCity,locationState:i.locationState,locationCountry:i.locationCountry,interests:i.interests,skillsOffered:i.skillsOffered}),B.mutate(b)};if(_)return e.jsxs(X,{maxWidth:"lg",sx:{py:4,textAlign:"center"},children:[e.jsx(ve,{size:60}),e.jsx(h,{variant:"h6",sx:{mt:2},children:"Loading your profile..."})]});if(R)return e.jsxs(X,{maxWidth:"lg",sx:{py:4},children:[e.jsx(me,{severity:"error",sx:{mb:2},children:"Failed to load profile. Please try again."}),e.jsx(A,{variant:"outlined",onClick:()=>L(),children:"Retry"})]});const w=m==null?void 0:m.user;if(!w)return e.jsx(X,{maxWidth:"lg",sx:{py:4},children:e.jsx(me,{severity:"warning",children:"No profile data found. Please log in again."})});const D=()=>{const b=[w.locationCity||w.location_city,w.locationState||w.location_state,w.locationCountry||w.location_country].filter(Boolean);return b.length>0?b.join(", "):"Location not set"},$=b=>new Date(b).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),V=(b,U)=>w[b]||(U?w[U]:"")||"",J=(b,U)=>{const g=w[b]||(U?w[U]:[]);return Array.isArray(g)?g:[]};return e.jsxs(X,{maxWidth:"lg",sx:{py:4},children:[e.jsx(h,{variant:"h4",component:"h1",gutterBottom:!0,children:"My Profile"}),e.jsxs(I,{container:!0,spacing:3,children:[e.jsx(I,{item:!0,xs:12,md:4,children:e.jsxs(ae,{sx:{p:3,textAlign:"center"},children:[e.jsx(p,{sx:{display:"flex",justifyContent:"center",mb:2},children:e.jsx(tt,{src:V("avatarUrl","avatar_url")||void 0,sx:{width:120,height:120,fontSize:"3rem",bgcolor:"primary.main"},children:!V("avatarUrl","avatar_url")&&V("firstName","first_name").charAt(0)+V("lastName","last_name").charAt(0)})}),e.jsxs(h,{variant:"h6",gutterBottom:!0,children:[V("firstName","first_name")," ",V("lastName","last_name")]}),e.jsxs(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["@",w.username]}),e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:D()}),(w.trustScore||w.trust_score)>0&&e.jsxs(p,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:2},children:[e.jsx(dt,{sx:{color:"gold",mr:1}}),e.jsxs(h,{variant:"body2",children:["Trust Score: ",w.trustScore||w.trust_score]})]}),e.jsxs(p,{sx:{mt:2},children:[e.jsx(A,{variant:"outlined",startIcon:e.jsx(vs,{}),sx:{mr:1},onClick:M,children:"Edit Profile"}),e.jsx(A,{variant:"outlined",startIcon:e.jsx(Gn,{}),onClick:T,children:"Settings"})]})]})}),e.jsx(I,{item:!0,xs:12,md:8,children:e.jsxs(ae,{sx:{p:3},children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Profile Information"}),e.jsx(ye,{sx:{mb:2}}),e.jsxs(I,{container:!0,spacing:2,children:[e.jsxs(I,{item:!0,xs:12,sm:6,children:[e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"First Name"}),e.jsx(h,{variant:"body1",children:V("firstName","first_name")})]}),e.jsxs(I,{item:!0,xs:12,sm:6,children:[e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Last Name"}),e.jsx(h,{variant:"body1",children:V("lastName","last_name")})]}),e.jsxs(I,{item:!0,xs:12,children:[e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Email"}),e.jsx(h,{variant:"body1",children:w.email})]}),e.jsxs(I,{item:!0,xs:12,children:[e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Bio"}),e.jsx(h,{variant:"body1",children:w.bio||"No bio added yet."})]}),w.phone&&e.jsxs(I,{item:!0,xs:12,children:[e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Phone"}),e.jsx(h,{variant:"body1",children:w.phone})]}),e.jsxs(I,{item:!0,xs:12,children:[e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Member Since"}),e.jsx(h,{variant:"body1",children:$(w.createdAt||w.created_at)})]}),e.jsxs(I,{item:!0,xs:12,children:[e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Total Trades"}),e.jsxs(h,{variant:"body1",children:[w.totalTrades||w.total_trades||0," trades (",w.successfulTrades||w.successful_trades||0," successful)"]})]}),J("interests").length>0&&e.jsxs(I,{item:!0,xs:12,children:[e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Interests"}),e.jsx(p,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:J("interests").map((b,U)=>e.jsx(h,{variant:"body2",sx:{bgcolor:"primary.light",color:"primary.contrastText",px:1,py:.5,borderRadius:1},children:b},U))})]}),J("skillsOffered","skills_offered").length>0&&e.jsxs(I,{item:!0,xs:12,children:[e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Skills Offered"}),e.jsx(p,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:J("skillsOffered","skills_offered").map((b,U)=>e.jsx(h,{variant:"body2",sx:{bgcolor:"secondary.light",color:"secondary.contrastText",px:1,py:.5,borderRadius:1},children:b},U))})]}),w.swapCredits&&e.jsxs(I,{item:!0,xs:12,children:[e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Swap Credits"}),e.jsxs(h,{variant:"body1",children:["Balance: ",w.swapCredits.balance," credits"]})]})]})]})})]}),e.jsxs(Ne,{open:n,onClose:P,maxWidth:"md",fullWidth:!0,children:[e.jsxs(Me,{children:["Edit Profile",e.jsx(Pe,{"aria-label":"close",onClick:P,sx:{position:"absolute",right:8,top:8,color:b=>b.palette.grey[500]},children:e.jsx(nr,{})})]}),e.jsx(Ue,{children:e.jsxs(I,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(I,{item:!0,xs:12,sm:6,children:e.jsx(K,{fullWidth:!0,label:"First Name",value:i.firstName,onChange:b=>q("firstName",b.target.value),margin:"normal"})}),e.jsx(I,{item:!0,xs:12,sm:6,children:e.jsx(K,{fullWidth:!0,label:"Last Name",value:i.lastName,onChange:b=>q("lastName",b.target.value),margin:"normal"})}),e.jsx(I,{item:!0,xs:12,children:e.jsx(K,{fullWidth:!0,label:"Bio",value:i.bio,onChange:b=>q("bio",b.target.value),margin:"normal",multiline:!0,rows:3,helperText:"Tell others about yourself (max 500 characters)"})}),e.jsx(I,{item:!0,xs:12,children:e.jsx(K,{fullWidth:!0,label:"Phone",value:i.phone,onChange:b=>q("phone",b.target.value),margin:"normal",placeholder:"+1 (555) 123-4567"})}),e.jsx(I,{item:!0,xs:12,sm:4,children:e.jsx(K,{fullWidth:!0,label:"City",value:i.locationCity,onChange:b=>q("locationCity",b.target.value),margin:"normal"})}),e.jsx(I,{item:!0,xs:12,sm:4,children:e.jsx(K,{fullWidth:!0,label:"State/Province",value:i.locationState,onChange:b=>q("locationState",b.target.value),margin:"normal"})}),e.jsx(I,{item:!0,xs:12,sm:4,children:e.jsx(K,{fullWidth:!0,label:"Country",value:i.locationCountry,onChange:b=>q("locationCountry",b.target.value),margin:"normal"})}),e.jsxs(I,{item:!0,xs:12,children:[e.jsx(h,{variant:"subtitle1",gutterBottom:!0,children:"Interests"}),e.jsxs(p,{sx:{display:"flex",gap:1,mb:2},children:[e.jsx(K,{size:"small",placeholder:"Add interest",value:o,onChange:b=>l(b.target.value),onKeyPress:b=>b.key==="Enter"&&G()}),e.jsx(A,{variant:"outlined",onClick:G,children:"Add"})]}),e.jsx(p,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:i.interests.map((b,U)=>e.jsxs(h,{variant:"body2",sx:{bgcolor:"primary.light",color:"primary.contrastText",px:1,py:.5,borderRadius:1,display:"flex",alignItems:"center",gap:.5},children:[b,e.jsx(Pe,{size:"small",onClick:()=>F(U),sx:{color:"inherit",p:0,minWidth:"auto"},children:e.jsx(nr,{fontSize:"small"})})]},U))})]}),e.jsxs(I,{item:!0,xs:12,children:[e.jsx(h,{variant:"subtitle1",gutterBottom:!0,children:"Skills Offered"}),e.jsxs(p,{sx:{display:"flex",gap:1,mb:2},children:[e.jsx(K,{size:"small",placeholder:"Add skill",value:u,onChange:b=>c(b.target.value),onKeyPress:b=>b.key==="Enter"&&re()}),e.jsx(A,{variant:"outlined",onClick:re,children:"Add"})]}),e.jsx(p,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:i.skillsOffered.map((b,U)=>e.jsxs(h,{variant:"body2",sx:{bgcolor:"secondary.light",color:"secondary.contrastText",px:1,py:.5,borderRadius:1,display:"flex",alignItems:"center",gap:.5},children:[b,e.jsx(Pe,{size:"small",onClick:()=>se(U),sx:{color:"inherit",p:0,minWidth:"auto"},children:e.jsx(nr,{fontSize:"small"})})]},U))})]})]})}),e.jsxs(Le,{sx:{p:3},children:[e.jsx(A,{onClick:P,color:"inherit",children:"Cancel"}),e.jsx(A,{onClick:W,variant:"contained",disabled:B.isLoading,children:B.isLoading?e.jsx(ve,{size:20}):"Save Changes"})]})]}),e.jsx(Jn,{open:d,autoHideDuration:6e3,onClose:()=>f(!1),children:e.jsx(me,{onClose:()=>f(!1),severity:x,sx:{width:"100%"},children:j})})]})},yl=()=>{const{username:t}=wr(),{user:r}=Ce(),{data:n,isLoading:s,error:i,refetch:a}=qe(["userProfile",t],()=>Ht.getUserProfile(t),{enabled:!!t,staleTime:5*60*1e3}),{data:o}=qe(["userItems",t],()=>Ht.getUserItems(t,{limit:6}),{enabled:!!t,staleTime:5*60*1e3});if(s)return e.jsxs(X,{maxWidth:"lg",sx:{py:4,textAlign:"center"},children:[e.jsx(ve,{size:60}),e.jsx(h,{variant:"h6",sx:{mt:2},children:"Loading profile..."})]});if(i)return e.jsxs(X,{maxWidth:"lg",sx:{py:4},children:[e.jsx(me,{severity:"error",sx:{mb:2},children:"Failed to load profile. Please try again."}),e.jsx(A,{variant:"outlined",onClick:()=>a(),children:"Retry"})]});if(!(n!=null&&n.user))return e.jsx(X,{maxWidth:"lg",sx:{py:4},children:e.jsx(me,{severity:"warning",children:"User not found."})});const{user:l,items:u,reviews:c,totalReviews:d}=n,f=(o==null?void 0:o.items)||u||[],j=()=>{const v=[l.locationCity,l.locationState,l.locationCountry].filter(Boolean);return v.length>0?v.join(", "):"Location not set"},C=v=>new Date(v).toLocaleDateString("en-US",{year:"numeric",month:"long"}),x=(r==null?void 0:r.username)===t;return e.jsx(X,{maxWidth:"lg",sx:{py:4},children:e.jsxs(I,{container:!0,spacing:3,children:[e.jsx(I,{item:!0,xs:12,md:4,children:e.jsxs(ae,{sx:{p:3,textAlign:"center"},children:[e.jsx(tt,{src:l.avatarUrl||`https://ui-avatars.com/api/?name=${l.firstName}+${l.lastName}&size=120&background=random`,sx:{width:120,height:120,mb:2}}),e.jsxs(h,{variant:"h5",gutterBottom:!0,children:[l.firstName," ",l.lastName]}),e.jsxs(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["@",l.username]}),e.jsxs(p,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:1},children:[e.jsx(Yn,{sx:{color:"text.secondary",mr:1,fontSize:"small"}}),e.jsx(h,{variant:"body2",color:"text.secondary",children:j()})]}),l.averageRating>0&&e.jsxs(p,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:2},children:[e.jsx(dt,{sx:{color:"gold",mr:1}}),e.jsxs(h,{variant:"body2",children:[l.averageRating," (",d," reviews)"]})]}),l.trustScore>0&&e.jsxs(p,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:2},children:[e.jsx(dt,{sx:{color:"blue",mr:1}}),e.jsxs(h,{variant:"body2",children:["Trust Score: ",l.trustScore]})]}),!x&&e.jsx(A,{variant:"contained",startIcon:e.jsx(mt,{}),fullWidth:!0,children:"Send Message"})]})}),e.jsxs(I,{item:!0,xs:12,md:8,children:[e.jsxs(ae,{sx:{p:3,mb:3},children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"About"}),e.jsx(ye,{sx:{mb:2}}),e.jsx(h,{variant:"body1",paragraph:!0,children:l.bio||"No bio added yet."}),e.jsxs(p,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(Xn,{sx:{color:"text.secondary",mr:1,fontSize:"small"}}),e.jsxs(h,{variant:"subtitle2",color:"text.secondary",children:["Member since ",C(l.createdAt)]})]}),e.jsxs(p,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(dt,{sx:{color:"text.secondary",mr:1,fontSize:"small"}}),e.jsxs(h,{variant:"subtitle2",color:"text.secondary",children:[l.totalTrades||0," total trades (",l.successfulTrades||0," successful)"]})]}),l.interests&&l.interests.length>0&&e.jsxs(p,{sx:{mt:2},children:[e.jsx(h,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Interests"}),e.jsx(p,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:l.interests.map((v,S)=>e.jsx(Q,{label:v,size:"small"},S))})]}),l.skillsOffered&&l.skillsOffered.length>0&&e.jsxs(p,{sx:{mt:2},children:[e.jsx(h,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Skills Offered"}),e.jsx(p,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:l.skillsOffered.map((v,S)=>e.jsx(Q,{label:v,size:"small",color:"primary"},S))})]})]}),f.length>0&&e.jsxs(ae,{sx:{p:3,mb:3},children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Available Items"}),e.jsx(ye,{sx:{mb:2}}),e.jsx(I,{container:!0,spacing:2,children:f.slice(0,6).map(v=>{var S;return e.jsx(I,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(Ee,{sx:{height:"100%"},children:[e.jsx(st,{component:"img",height:"140",image:((S=v.images)==null?void 0:S[0])||"https://via.placeholder.com/300x200?text=No+Image",alt:v.title}),e.jsxs(Be,{children:[e.jsx(h,{variant:"subtitle2",noWrap:!0,children:v.title}),e.jsx(h,{variant:"body2",color:"text.secondary",noWrap:!0,children:v.categoryName}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:[v.condition,"  $",v.estimatedValue]})]})]})},v.id)})})]}),c&&c.length>0&&e.jsxs(ae,{sx:{p:3},children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Recent Reviews"}),e.jsx(ye,{sx:{mb:2}}),e.jsx(p,{sx:{display:"flex",flexDirection:"column",gap:2},children:c.slice(0,3).map((v,S)=>e.jsxs(p,{sx:{p:2,bgcolor:"grey.50",borderRadius:1},children:[e.jsxs(p,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(tt,{src:v.reviewerAvatar,sx:{width:24,height:24,mr:1}}),e.jsx(h,{variant:"body2",sx:{mr:1},children:v.reviewerUsername}),e.jsx(p,{sx:{display:"flex",alignItems:"center"},children:[...Array(5)].map((m,_)=>e.jsx(dt,{sx:{color:_<v.rating?"gold":"grey.300",fontSize:"small"}},_))})]}),e.jsx(h,{variant:"body2",color:"text.secondary",children:v.comment}),v.tags&&v.tags.length>0&&e.jsx(p,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mt:1},children:v.tags.map((m,_)=>e.jsx(Q,{label:m,size:"small",variant:"outlined"},_))})]},S))})]})]})]})})},vl=()=>{const{user:t}=Ce(),r=it(),[n,s]=O.useState(null),[i,a]=O.useState(""),[o,l]=O.useState(!1),{data:u,isLoading:c,error:d}=qe(["trades"],()=>Vt.getTrades(),{refetchOnWindowFocus:!1}),f=Or(P=>Vt.updateTradeStatus(P.id,{status:P.status,cancellationReason:P.cancellationReason}),{onSuccess:()=>{r.invalidateQueries(["trades"]),le.success("Trade status updated successfully"),l(!1),a("")},onError:P=>{var T,q;le.error(((q=(T=P.response)==null?void 0:T.data)==null?void 0:q.error)||"Failed to update trade status")}}),j=P=>{f.mutate({id:P.id,status:"accepted"})},C=P=>{s(P),l(!0)},x=()=>{n&&i.trim()&&f.mutate({id:n.id,status:"cancelled",cancellationReason:i.trim()})},v=P=>{switch(P){case"completed":return"success";case"accepted":return"success";case"in_progress":return"info";case"pending":return"warning";case"cancelled":return"error";case"disputed":return"error";default:return"default"}},S=P=>{switch(P){case"completed":return"Completed";case"accepted":return"Accepted";case"in_progress":return"In Progress";case"pending":return"Pending";case"cancelled":return"Cancelled";case"disputed":return"Disputed";default:return P}},m=P=>new Date(P).toLocaleDateString(),_=P=>(t==null?void 0:t.id)===P.initiator_id?P.responder_username:P.initiator_username,R=P=>(t==null?void 0:t.id)===P.initiator_id?P.initiator_item_title||"No item specified":P.responder_item_title||"No item specified",L=P=>(t==null?void 0:t.id)===P.initiator_id?P.responder_item_title||"No item specified":P.initiator_item_title||"No item specified",B=P=>P.status==="completed"||P.status==="cancelled"||P.status==="disputed"?!1:P.status==="pending"?(t==null?void 0:t.id)===P.responder_id:!0;if(c)return e.jsx(X,{maxWidth:"lg",sx:{py:4,textAlign:"center"},children:e.jsx(ve,{})});if(d)return e.jsx(X,{maxWidth:"lg",sx:{py:4},children:e.jsx(me,{severity:"error",children:"Failed to load trades. Please try again later."})});const M=(u==null?void 0:u.trades)||[];return e.jsxs(X,{maxWidth:"lg",sx:{py:4},children:[e.jsxs(p,{sx:{display:"flex",alignItems:"center",mb:4},children:[e.jsx(Zn,{sx:{mr:2,fontSize:32}}),e.jsx(h,{variant:"h4",component:"h1",children:"My Trades"})]}),M.length===0?e.jsxs(p,{sx:{textAlign:"center",py:8},children:[e.jsx(h,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No trades found"}),e.jsx(h,{variant:"body2",color:"text.secondary",children:"You haven't made any trades yet. Start by browsing items or creating your own listings."})]}):e.jsx(I,{container:!0,spacing:3,children:M.map(P=>e.jsx(I,{item:!0,xs:12,children:e.jsx(Ee,{children:e.jsxs(Be,{children:[e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsxs(h,{variant:"h6",children:["Trade #",P.id.slice(0,8)]}),e.jsx(Q,{label:S(P.status),color:v(P.status),variant:"outlined"})]}),e.jsxs(p,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(h,{variant:"body1",sx:{flex:1},children:R(P)}),e.jsx(h,{variant:"h6",sx:{mx:2},children:""}),e.jsx(h,{variant:"body1",sx:{flex:1},children:L(P)})]}),e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(h,{variant:"body2",color:"text.secondary",children:["Partner: ",_(P)]}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:["Date: ",m(P.created_at)]})]}),B(P)&&e.jsxs(p,{sx:{mt:2},children:[P.status==="pending"&&(t==null?void 0:t.id)===P.responder_id&&e.jsxs(e.Fragment,{children:[e.jsx(A,{variant:"contained",size:"small",sx:{mr:1},startIcon:e.jsx(Cs,{}),onClick:()=>j(P),disabled:f.isLoading,children:"Accept"}),e.jsx(A,{variant:"outlined",size:"small",color:"error",startIcon:e.jsx(Ss,{}),onClick:()=>C(P),disabled:f.isLoading,children:"Decline"})]}),P.status==="accepted"&&e.jsx(A,{variant:"contained",size:"small",sx:{mr:1},onClick:()=>f.mutate({id:P.id,status:"in_progress"}),disabled:f.isLoading,children:"Mark In Progress"}),P.status==="in_progress"&&e.jsx(A,{variant:"contained",size:"small",color:"success",onClick:()=>f.mutate({id:P.id,status:"completed"}),disabled:f.isLoading,children:"Mark Complete"})]})]})})},P.id))}),e.jsxs(Ne,{open:o,onClose:()=>l(!1),children:[e.jsx(Me,{children:"Cancel Trade"}),e.jsx(Ue,{children:e.jsx(K,{autoFocus:!0,margin:"dense",label:"Reason for cancellation",type:"text",fullWidth:!0,variant:"outlined",value:i,onChange:P=>a(P.target.value),placeholder:"Please provide a reason for cancelling this trade",multiline:!0,rows:3})}),e.jsxs(Le,{children:[e.jsx(A,{onClick:()=>l(!1),children:"Cancel"}),e.jsx(A,{onClick:x,color:"error",variant:"contained",disabled:!i.trim()||f.isLoading,children:"Confirm Cancellation"})]})]})]})},bl=()=>{const{id:t}=wr(),r=Ae(),{user:n}=Ce(),s=it(),[i,a]=O.useState(!1),[o,l]=O.useState(""),{data:u,isLoading:c,error:d}=qe(["trade",t],()=>Vt.getTrade(t),{enabled:!!t,refetchOnWindowFocus:!1}),f=Or(F=>Vt.updateTradeStatus(t,F),{onSuccess:()=>{s.invalidateQueries(["trade",t]),s.invalidateQueries(["trades"]),le.success("Trade status updated successfully"),a(!1),l("")},onError:F=>{var re,se;le.error(((se=(re=F.response)==null?void 0:re.data)==null?void 0:se.error)||"Failed to update trade status")}}),j=()=>{f.mutate({status:"accepted"})},C=()=>{a(!0)},x=()=>{o.trim()&&f.mutate({status:"cancelled",cancellationReason:o.trim()})},v=()=>{f.mutate({status:"in_progress"})},S=()=>{f.mutate({status:"completed"})},m=F=>{switch(F){case"completed":return"success";case"accepted":return"success";case"in_progress":return"info";case"pending":return"warning";case"cancelled":return"error";case"disputed":return"error";default:return"default"}},_=F=>{switch(F){case"completed":return"Completed";case"accepted":return"Accepted";case"in_progress":return"In Progress";case"pending":return"Pending";case"cancelled":return"Cancelled";case"disputed":return"Disputed";default:return F}},R=F=>new Date(F).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),L=F=>(n==null?void 0:n.id)===F.initiator_id?`${F.responder_first_name} ${F.responder_last_name}`:`${F.initiator_first_name} ${F.initiator_last_name}`,B=F=>(n==null?void 0:n.id)===F.initiator_id?{title:F.initiator_item_title||"No item specified",description:F.initiator_item_description||"No description available",images:F.initiator_item_images||[],condition:F.initiator_item_condition||"Unknown"}:{title:F.responder_item_title||"No item specified",description:F.responder_item_description||"No description available",images:F.responder_item_images||[],condition:F.responder_item_condition||"Unknown"},M=F=>(n==null?void 0:n.id)===F.initiator_id?{title:F.responder_item_title||"No item specified",description:F.responder_item_description||"No description available",images:F.responder_item_images||[],condition:F.responder_item_condition||"Unknown"}:{title:F.initiator_item_title||"No item specified",description:F.initiator_item_description||"No description available",images:F.initiator_item_images||[],condition:F.initiator_item_condition||"Unknown"},P=F=>F.status==="completed"||F.status==="cancelled"||F.status==="disputed"?!1:F.status==="pending"?(n==null?void 0:n.id)===F.responder_id:!0;if(c)return e.jsx(X,{maxWidth:"lg",sx:{py:4,textAlign:"center"},children:e.jsx(ve,{})});if(d||!(u!=null&&u.trade))return e.jsx(X,{maxWidth:"lg",sx:{py:4},children:e.jsx(me,{severity:"error",children:"Failed to load trade details. Please try again later."})});const T=u.trade,q=B(T),G=M(T);return e.jsxs(X,{maxWidth:"lg",sx:{py:4},children:[e.jsx(A,{startIcon:e.jsx(ys,{}),onClick:()=>r(-1),sx:{mb:3},children:"Back to Trades"}),e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[e.jsxs(h,{variant:"h4",component:"h1",children:["Trade #",T.id.slice(0,8)]}),e.jsx(Q,{label:_(T.status),color:m(T.status),variant:"outlined"})]}),P(T)&&e.jsxs(ae,{sx:{p:3,mb:4},children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Trade Actions"}),e.jsxs(p,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[T.status==="pending"&&(n==null?void 0:n.id)===T.responder_id&&e.jsxs(e.Fragment,{children:[e.jsx(A,{variant:"contained",color:"success",startIcon:e.jsx(Cs,{}),onClick:j,disabled:f.isLoading,children:"Accept Trade"}),e.jsx(A,{variant:"outlined",color:"error",startIcon:e.jsx(Ss,{}),onClick:C,disabled:f.isLoading,children:"Decline Trade"})]}),T.status==="accepted"&&e.jsx(A,{variant:"contained",color:"info",startIcon:e.jsx(ei,{}),onClick:v,disabled:f.isLoading,children:"Mark In Progress"}),T.status==="in_progress"&&e.jsx(A,{variant:"contained",color:"success",startIcon:e.jsx(ti,{}),onClick:S,disabled:f.isLoading,children:"Mark Complete"})]})]}),e.jsxs(I,{container:!0,spacing:4,children:[e.jsx(I,{item:!0,xs:12,md:6,children:e.jsxs(ae,{sx:{p:3},children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Your Item"}),q.images&&q.images.length>0?e.jsx("img",{src:q.images[0],alt:q.title,style:{width:"100%",borderRadius:"8px",marginBottom:"16px"}}):e.jsx(p,{sx:{width:"100%",height:200,bgcolor:"grey.200",borderRadius:"8px",mb:2,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(h,{color:"text.secondary",children:"No image available"})}),e.jsx(h,{variant:"h6",gutterBottom:!0,children:q.title}),e.jsx(h,{variant:"body2",color:"text.secondary",paragraph:!0,children:q.description}),e.jsxs(h,{variant:"subtitle2",color:"primary",gutterBottom:!0,children:["Condition: ",q.condition]}),T.swap_credits>0&&e.jsxs(h,{variant:"subtitle2",color:"primary",children:["Swap Credits: ",T.swap_credits]})]})}),e.jsx(I,{item:!0,xs:12,md:6,children:e.jsxs(ae,{sx:{p:3},children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Their Item"}),G.images&&G.images.length>0?e.jsx("img",{src:G.images[0],alt:G.title,style:{width:"100%",borderRadius:"8px",marginBottom:"16px"}}):e.jsx(p,{sx:{width:"100%",height:200,bgcolor:"grey.200",borderRadius:"8px",mb:2,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(h,{color:"text.secondary",children:"No image available"})}),e.jsx(h,{variant:"h6",gutterBottom:!0,children:G.title}),e.jsx(h,{variant:"body2",color:"text.secondary",paragraph:!0,children:G.description}),e.jsxs(h,{variant:"subtitle2",color:"primary",gutterBottom:!0,children:["Condition: ",G.condition]})]})}),e.jsx(I,{item:!0,xs:12,children:e.jsxs(ae,{sx:{p:3},children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Trade Details"}),e.jsx(ye,{sx:{mb:2}}),e.jsxs(I,{container:!0,spacing:2,sx:{mb:3},children:[e.jsxs(I,{item:!0,xs:12,sm:6,children:[e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Partner"}),e.jsx(h,{variant:"body1",children:L(T)})]}),e.jsxs(I,{item:!0,xs:12,sm:6,children:[e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Created"}),e.jsx(h,{variant:"body1",children:R(T.created_at)})]}),T.accepted_at&&e.jsxs(I,{item:!0,xs:12,sm:6,children:[e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Accepted"}),e.jsx(h,{variant:"body1",children:R(T.accepted_at)})]}),T.completed_at&&e.jsxs(I,{item:!0,xs:12,sm:6,children:[e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Completed"}),e.jsx(h,{variant:"body1",children:R(T.completed_at)})]})]}),(T.initiator_message||T.responder_message)&&e.jsxs(e.Fragment,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,sx:{mt:3},children:"Messages"}),e.jsx(ye,{sx:{mb:2}}),T.initiator_message&&e.jsxs(p,{sx:{mb:2,p:2,bgcolor:"grey.50",borderRadius:1},children:[e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(h,{variant:"subtitle2",color:"primary",children:T.initiator_username}),e.jsx(h,{variant:"caption",color:"text.secondary",children:R(T.created_at)})]}),e.jsx(h,{variant:"body2",children:T.initiator_message})]}),T.responder_message&&e.jsxs(p,{sx:{mb:2,p:2,bgcolor:"grey.50",borderRadius:1},children:[e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(h,{variant:"subtitle2",color:"primary",children:T.responder_username}),e.jsx(h,{variant:"caption",color:"text.secondary",children:T.accepted_at?R(T.accepted_at):"Recently"})]}),e.jsx(h,{variant:"body2",children:T.responder_message})]})]}),e.jsx(p,{sx:{mt:2},children:e.jsx(A,{variant:"contained",startIcon:e.jsx(mt,{}),children:"Send Message"})})]})})]}),e.jsxs(Ne,{open:i,onClose:()=>a(!1),children:[e.jsx(Me,{children:"Cancel Trade"}),e.jsx(Ue,{children:e.jsx(K,{autoFocus:!0,margin:"dense",label:"Reason for cancellation",type:"text",fullWidth:!0,variant:"outlined",value:o,onChange:F=>l(F.target.value),placeholder:"Please provide a reason for cancelling this trade",multiline:!0,rows:3})}),e.jsxs(Le,{children:[e.jsx(A,{onClick:()=>a(!1),children:"Cancel"}),e.jsx(A,{onClick:x,color:"error",variant:"contained",disabled:!o.trim()||f.isLoading,children:"Confirm Cancellation"})]})]})]})},jl=()=>{const t=[{id:"1",user:"gamer123",lastMessage:"Is the gaming console still available?",timestamp:"2 hours ago",unread:!0,avatar:"https://picsum.photos/40/40?random=7"},{id:"2",user:"craftsman",lastMessage:"I can meet you tomorrow at 3 PM",timestamp:"1 day ago",unread:!1,avatar:"https://picsum.photos/40/40?random=8"},{id:"3",user:"booklover",lastMessage:"Thanks for the trade!",timestamp:"3 days ago",unread:!1,avatar:"https://picsum.photos/40/40?random=9"}];return e.jsxs(X,{maxWidth:"md",sx:{py:4},children:[e.jsxs(p,{sx:{display:"flex",alignItems:"center",mb:4},children:[e.jsx(mt,{sx:{mr:2,fontSize:32}}),e.jsx(h,{variant:"h4",component:"h1",children:"Messages"})]}),e.jsx(ae,{children:e.jsx(hs,{children:t.map((r,n)=>e.jsxs(ne.Fragment,{children:[e.jsxs(fs,{button:!0,children:[e.jsx(ri,{children:e.jsx(tt,{src:r.avatar})}),e.jsx(ps,{primary:e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(h,{variant:"subtitle1",sx:{fontWeight:r.unread?"bold":"normal"},children:r.user}),e.jsx(h,{variant:"caption",color:"text.secondary",children:r.timestamp})]}),secondary:e.jsx(h,{variant:"body2",color:"text.secondary",sx:{fontWeight:r.unread?"bold":"normal"},children:r.lastMessage})})]}),n<t.length-1&&e.jsx(ye,{})]},r.id))})})]})},wl=()=>{var U;const[t,r]=O.useState(""),[n,s]=O.useState({q:"",category:"all",itemType:"all",condition:"all",minValue:"",maxValue:"",location:"",sortBy:"relevance",sortOrder:"desc"}),[i,a]=O.useState([]),[o,l]=O.useState(!1),[u,c]=O.useState(null),[d,f]=O.useState({page:1,limit:20,total:0,pages:0}),[j,C]=O.useState([]),[x,v]=O.useState(!1),[S,m]=O.useState(null),[_,R]=O.useState([]),[L,B]=O.useState(!0),[M,P]=O.useState([]),[T,q]=O.useState("grid");O.useEffect(()=>{G(),F();const g=localStorage.getItem("recentSearches");if(g)try{P(JSON.parse(g))}catch(E){console.error("Failed to parse recent searches:",E)}},[]),O.useEffect(()=>{t.length>=2?re(t):C([])},[t]),O.useEffect(()=>{if(n.q){const g=setTimeout(()=>{se(1)},500);return()=>clearTimeout(g)}},[n.category,n.itemType,n.condition,n.minValue,n.maxValue,n.location,n.sortBy]);const G=async()=>{try{const g=await pt.getPopularSearches();m(g)}catch(g){console.error("Failed to load popular searches:",g)}},F=async()=>{try{B(!0);const g=await _r.getCategories();R(g)}catch(g){console.error("Failed to load categories:",g)}finally{B(!1)}},re=async g=>{try{const ie=(await pt.getSuggestions(g,"items")).suggestions.map(ee=>ee.value);C(ie)}catch(E){console.error("Failed to load suggestions:",E)}},se=O.useCallback(async(g=1)=>{var E,ie;if(!(!t.trim()&&n.category==="all"&&n.itemType==="all")){l(!0),c(null);try{const ee={page:g,limit:d.limit,sortBy:n.sortBy,sortOrder:n.sortOrder};t.trim()&&(ee.q=t.trim()),n.category!=="all"&&(ee.category=n.category),n.itemType!=="all"&&(ee.itemType=n.itemType),n.condition!=="all"&&(ee.condition=n.condition),n.minValue&&(ee.minValue=parseFloat(n.minValue)),n.maxValue&&(ee.maxValue=parseFloat(n.maxValue)),n.location.trim()&&(ee.location=n.location.trim());const pe=await pt.searchItems(ee);a(pe.items),f(pe.pagination),s(Ze=>({...Ze,q:t}))}catch(ee){c(((ie=(E=ee.response)==null?void 0:E.data)==null?void 0:ie.error)||"Failed to perform search"),a([])}finally{l(!1)}}},[t,n,d.limit]),W=g=>{if(!g.trim())return;const E=[g,...M.filter(ie=>ie!==g)].slice(0,5);P(E),localStorage.setItem("recentSearches",JSON.stringify(E))},w=()=>{t.trim()&&(W(t),f(g=>({...g,page:1})),se(1))},D=(g,E)=>{f(ie=>({...ie,page:E})),se(E)},$=()=>{s({q:"",category:"all",itemType:"all",condition:"all",minValue:"",maxValue:"",location:"",sortBy:"relevance",sortOrder:"desc"}),r(""),a([]),f(g=>({...g,page:1,total:0,pages:0}))},V=()=>{P([]),localStorage.removeItem("recentSearches")},J=g=>{s(E=>({...E,category:g.toLowerCase().replace(/\s+/g,"-")})),r(g)},b=g=>{r(g)};return e.jsxs(X,{maxWidth:"lg",sx:{py:4},children:[e.jsx(h,{variant:"h4",component:"h1",gutterBottom:!0,children:"Search Items"}),e.jsx(ae,{sx:{p:3,mb:4},children:e.jsxs(I,{container:!0,spacing:3,children:[M.length>0&&e.jsxs(I,{item:!0,xs:12,md:6,children:[e.jsxs(p,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsx(h,{variant:"h6",children:"Recent Searches"}),e.jsx(cr,{title:"Clear Recent Searches",children:e.jsx(Pe,{size:"small",onClick:V,color:"secondary",children:e.jsx(Ur,{})})})]}),e.jsx(p,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:M.map((g,E)=>e.jsx(Q,{label:g,variant:"outlined",clickable:!0,onClick:()=>r(g),sx:{cursor:"pointer"}},E))})]}),S&&e.jsxs(I,{item:!0,xs:12,md:M.length>0?6:12,children:[e.jsxs(p,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(si,{sx:{mr:1,color:"primary.main"}}),e.jsx(h,{variant:"h6",children:"Popular Searches"})]}),e.jsxs(p,{sx:{mb:2},children:[e.jsx(h,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Popular Categories:"}),e.jsx(p,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:S.popularCategories.map(g=>e.jsx(Q,{label:g.name,variant:"outlined",clickable:!0,onClick:()=>J(g.name),sx:{cursor:"pointer"}},g.slug))})]}),e.jsxs(p,{children:[e.jsx(h,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Popular Tags:"}),e.jsx(p,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:S.popularTags.map(g=>e.jsx(Q,{label:g,variant:"outlined",clickable:!0,onClick:()=>b(g),sx:{cursor:"pointer"}},g))})]})]})]})}),e.jsxs(ae,{sx:{p:2,mb:3},children:[e.jsx(h,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Quick Filters:"}),e.jsxs(p,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:[e.jsx(Q,{label:"All Items",variant:n.itemType==="all"?"filled":"outlined",clickable:!0,onClick:()=>s(g=>({...g,itemType:"all"})),color:n.itemType==="all"?"primary":"default"}),e.jsx(Q,{label:"Goods Only",variant:n.itemType==="good"?"filled":"outlined",clickable:!0,onClick:()=>s(g=>({...g,itemType:"good"})),color:n.itemType==="good"?"primary":"default"}),e.jsx(Q,{label:"Services Only",variant:n.itemType==="service"?"filled":"outlined",clickable:!0,onClick:()=>s(g=>({...g,itemType:"service"})),color:n.itemType==="service"?"primary":"default"}),e.jsx(Q,{label:"Free Items",variant:n.minValue==="0"&&n.maxValue==="0"?"filled":"outlined",clickable:!0,onClick:()=>s(g=>({...g,minValue:"0",maxValue:"0"})),color:n.minValue==="0"&&n.maxValue==="0"?"primary":"default"}),e.jsx(Q,{label:"Under $50",variant:n.maxValue==="50"?"filled":"outlined",clickable:!0,onClick:()=>s(g=>({...g,maxValue:"50"})),color:n.maxValue==="50"?"primary":"default"})]})]}),e.jsxs(ae,{sx:{p:3,mb:4},children:[e.jsxs(I,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(I,{item:!0,xs:12,md:4,children:e.jsx(ni,{freeSolo:!0,options:j,inputValue:t,onInputChange:(g,E)=>{r(E),v(!0)},onChange:(g,E)=>{(typeof E=="string"||E)&&r(E),v(!1)},onBlur:()=>setTimeout(()=>v(!1),200),onKeyPress:g=>{g.key==="Enter"&&(g.preventDefault(),w())},renderInput:g=>e.jsx(K,{...g,fullWidth:!0,label:"Search items...",placeholder:"e.g., vintage camera, guitar lessons",InputProps:{...g.InputProps,endAdornment:e.jsxs(e.Fragment,{children:[o&&e.jsx(ve,{size:20}),g.InputProps.endAdornment]})}})})}),e.jsx(I,{item:!0,xs:12,md:2,children:e.jsxs(be,{fullWidth:!0,children:[e.jsx(je,{children:"Category"}),e.jsxs(we,{value:n.category,label:"Category",onChange:g=>s(E=>({...E,category:g.target.value})),disabled:L,children:[e.jsx(N,{value:"all",children:"All Categories"}),L?e.jsxs(N,{disabled:!0,children:[e.jsx(ve,{size:16,sx:{mr:1}}),"Loading..."]}):_.map(g=>e.jsx(N,{value:g.slug,children:g.name},g.id))]})]})}),e.jsx(I,{item:!0,xs:12,md:2,children:e.jsxs(be,{fullWidth:!0,children:[e.jsx(je,{children:"Item Type"}),e.jsxs(we,{value:n.itemType,label:"Item Type",onChange:g=>s(E=>({...E,itemType:g.target.value})),children:[e.jsx(N,{value:"all",children:"All Types"}),e.jsx(N,{value:"good",children:"Goods"}),e.jsx(N,{value:"service",children:"Services"})]})]})}),e.jsx(I,{item:!0,xs:12,md:2,children:e.jsxs(be,{fullWidth:!0,children:[e.jsx(je,{children:"Condition"}),e.jsxs(we,{value:n.condition,label:"Condition",onChange:g=>s(E=>({...E,condition:g.target.value})),children:[e.jsx(N,{value:"all",children:"All Conditions"}),e.jsx(N,{value:"new",children:"New"}),e.jsx(N,{value:"like-new",children:"Like New"}),e.jsx(N,{value:"good",children:"Good"}),e.jsx(N,{value:"fair",children:"Fair"}),e.jsx(N,{value:"poor",children:"Poor"})]})]})}),e.jsx(I,{item:!0,xs:12,md:2,children:e.jsx(A,{variant:"contained",fullWidth:!0,startIcon:e.jsx(Dt,{}),onClick:w,disabled:o,children:"Search"})})]}),e.jsxs(p,{sx:{mt:3},children:[e.jsx(ye,{sx:{mb:2},children:e.jsx(Q,{label:"Advanced Filters"})}),e.jsxs(I,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(I,{item:!0,xs:12,md:3,children:e.jsx(K,{fullWidth:!0,label:"Min Value ($)",type:"number",value:n.minValue,onChange:g=>s(E=>({...E,minValue:g.target.value})),placeholder:"0"})}),e.jsx(I,{item:!0,xs:12,md:3,children:e.jsx(K,{fullWidth:!0,label:"Max Value ($)",type:"number",value:n.maxValue,onChange:g=>s(E=>({...E,maxValue:g.target.value})),placeholder:"1000"})}),e.jsx(I,{item:!0,xs:12,md:3,children:e.jsx(K,{fullWidth:!0,label:"Location",value:n.location,onChange:g=>s(E=>({...E,location:g.target.value})),placeholder:"City, State"})}),e.jsx(I,{item:!0,xs:12,md:2,children:e.jsxs(be,{fullWidth:!0,children:[e.jsx(je,{children:"Sort By"}),e.jsxs(we,{value:n.sortBy,label:"Sort By",onChange:g=>s(E=>({...E,sortBy:g.target.value})),children:[e.jsx(N,{value:"relevance",children:"Relevance"}),e.jsx(N,{value:"newest",children:"Newest"}),e.jsx(N,{value:"oldest",children:"Oldest"}),e.jsx(N,{value:"value_high",children:"Value (High to Low)"}),e.jsx(N,{value:"value_low",children:"Value (Low to High)"}),e.jsx(N,{value:"popular",children:"Most Popular"}),e.jsx(N,{value:"trust",children:"Trust Score"})]})]})}),e.jsx(I,{item:!0,xs:12,md:1,children:e.jsx(cr,{title:"Clear Filters",children:e.jsx(Pe,{onClick:$,color:"secondary",children:e.jsx(Ur,{})})})})]})]})]}),u&&e.jsx(me,{severity:"error",sx:{mb:3},children:u}),i.length>0&&e.jsx(p,{sx:{mb:3},children:e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[e.jsxs(p,{children:[e.jsxs(h,{variant:"h6",gutterBottom:!0,children:["Search Results (",d.total,")"]}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:["Showing ",(d.page-1)*d.limit+1," - ",Math.min(d.page*d.limit,d.total)," of ",d.total," results"]})]}),e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsxs(p,{sx:{display:"flex",border:1,borderColor:"divider",borderRadius:1},children:[e.jsx(A,{size:"small",variant:T==="grid"?"contained":"text",onClick:()=>q("grid"),sx:{minWidth:"auto",px:2},children:"Grid"}),e.jsx(A,{size:"small",variant:T==="list"?"contained":"text",onClick:()=>q("list"),sx:{minWidth:"auto",px:2},children:"List"})]}),e.jsxs(p,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:[n.category!=="all"&&e.jsx(Q,{label:`Category: ${((U=_.find(g=>g.slug===n.category))==null?void 0:U.name)||n.category}`,size:"small",onDelete:()=>s(g=>({...g,category:"all"}))}),n.itemType!=="all"&&e.jsx(Q,{label:`Type: ${n.itemType==="good"?"Goods":"Services"}`,size:"small",onDelete:()=>s(g=>({...g,itemType:"all"}))}),n.condition!=="all"&&e.jsx(Q,{label:`Condition: ${n.condition}`,size:"small",onDelete:()=>s(g=>({...g,condition:"all"}))}),n.minValue&&e.jsx(Q,{label:`Min: $${n.minValue}`,size:"small",onDelete:()=>s(g=>({...g,minValue:""}))}),n.maxValue&&e.jsx(Q,{label:`Max: $${n.maxValue}`,size:"small",onDelete:()=>s(g=>({...g,maxValue:""}))}),n.location&&e.jsx(Q,{label:`Location: ${n.location}`,size:"small",onDelete:()=>s(g=>({...g,location:""}))})]})]})]})}),o&&e.jsxs(e.Fragment,{children:[e.jsxs(p,{sx:{mb:3},children:[e.jsx(Re,{variant:"text",width:200,height:32}),e.jsx(Re,{variant:"text",width:300,height:20})]}),e.jsx(I,{container:!0,spacing:3,children:Array.from(new Array(6)).map((g,E)=>e.jsx(I,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(Ee,{sx:{height:"100%"},children:[e.jsx(Re,{variant:"rectangular",height:200}),e.jsxs(Be,{children:[e.jsx(Re,{variant:"text",height:24,sx:{mb:1}}),e.jsx(Re,{variant:"text",height:16,sx:{mb:1}}),e.jsx(Re,{variant:"text",height:16,sx:{mb:2}}),e.jsxs(p,{sx:{display:"flex",gap:1,mb:2},children:[e.jsx(Re,{variant:"rectangular",width:60,height:24}),e.jsx(Re,{variant:"rectangular",width:80,height:24})]}),e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(Re,{variant:"text",width:60,height:24}),e.jsx(Re,{variant:"text",width:100,height:16})]})]})]})},E))})]}),!o&&i.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(I,{container:!0,spacing:T==="grid"?3:2,children:i.map(g=>e.jsx(I,{item:!0,xs:12,sm:T==="grid"?6:12,md:T==="grid"?4:12,children:e.jsxs(Ee,{sx:{height:T==="grid"?"100%":"auto",display:"flex",flexDirection:T==="grid"?"column":"row"},children:[e.jsx(st,{component:"img",height:T==="grid"?"200":"150",width:T==="grid"?"auto":"200",image:g.image_url||"https://picsum.photos/300/200?random="+Math.floor(Math.random()*1e3),alt:g.title,sx:{objectFit:"cover",flexShrink:0}}),e.jsxs(Be,{sx:{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[e.jsxs(p,{children:[e.jsx(h,{gutterBottom:!0,variant:"h6",component:"h2",children:g.title}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:2},children:g.description}),e.jsxs(p,{sx:{mb:2},children:[e.jsx(Q,{label:g.condition,color:"primary",size:"small",sx:{mr:1}}),e.jsx(Q,{label:g.category_name,variant:"outlined",size:"small",sx:{mr:1}}),g.tags&&g.tags.slice(0,2).map((E,ie)=>e.jsx(Q,{label:E,variant:"outlined",size:"small",sx:{mr:1}},ie))]})]}),e.jsxs(p,{children:[e.jsxs(p,{sx:{mb:2},children:[e.jsxs(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Offered by: ",g.username]}),(g.location_city||g.location_state)&&e.jsxs(h,{variant:"body2",color:"text.secondary",children:[" ",[g.location_city,g.location_state].filter(Boolean).join(", ")]})]}),e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(h,{variant:"h6",color:"primary",children:["$",g.estimated_value]}),e.jsxs(p,{sx:{display:"flex",gap:.5},children:[g.allows_shipping&&e.jsx(Q,{label:"",size:"small"}),g.allows_pickup&&e.jsx(Q,{label:"",size:"small"}),g.allows_meetup&&e.jsx(Q,{label:"",size:"small"})]})]})]})]})]})},g.id))}),d.pages>1&&e.jsx(p,{sx:{display:"flex",justifyContent:"center",mt:4},children:e.jsx(lr,{count:d.pages,page:d.page,onChange:D,color:"primary",size:"large"})})]}),!o&&i.length===0&&n.q&&e.jsxs(p,{sx:{textAlign:"center",py:8},children:[e.jsxs(h,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:['No items found for "',n.q,'"']}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Try adjusting your search terms or filters"}),S&&e.jsxs(p,{children:[e.jsx(h,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Try these popular searches instead:"}),e.jsx(p,{sx:{display:"flex",flexWrap:"wrap",gap:1,justifyContent:"center"},children:S.popularTags.slice(0,5).map(g=>e.jsx(Q,{label:g,variant:"outlined",clickable:!0,onClick:()=>{r(g),s(E=>({...E,q:g}))},sx:{cursor:"pointer"}},g))})]})]}),!o&&i.length===0&&!n.q&&e.jsxs(p,{sx:{textAlign:"center",py:8},children:[e.jsx(h,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"Start searching for items"}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Use the search form above to find items or browse popular categories and tags"}),e.jsxs(ae,{sx:{p:3,maxWidth:600,mx:"auto"},children:[e.jsx(h,{variant:"subtitle1",gutterBottom:!0,children:" Search Tips:"}),e.jsxs(p,{component:"ul",sx:{textAlign:"left",pl:2},children:[e.jsx(h,{component:"li",variant:"body2",color:"text.secondary",children:'Use specific keywords like "vintage camera" instead of just "camera"'}),e.jsx(h,{component:"li",variant:"body2",color:"text.secondary",children:"Try different categories to narrow down your search"}),e.jsx(h,{component:"li",variant:"body2",color:"text.secondary",children:"Use location filters to find items near you"}),e.jsx(h,{component:"li",variant:"body2",color:"text.secondary",children:"Set price ranges to find items within your budget"})]})]})]})]})},Cl=()=>{const[t,r]=O.useState({interests:"",location:"",maxDistance:"25"}),n=[{id:"1",title:"Vintage Gaming Console",description:"Classic gaming console in excellent condition. Perfect for retro gaming enthusiasts.",image:"https://picsum.photos/300/200?random=3",condition:"Like New",estimatedValue:150,category:"Electronics",user:"gamer123",location:"New York, NY",matchScore:95},{id:"2",title:"Handmade Wooden Shelf",description:"Beautiful handcrafted wooden shelf unit. Perfect for home organization.",image:"https://picsum.photos/300/200?random=4",condition:"Good",estimatedValue:80,category:"Home & Garden",user:"craftsman",location:"Portland, OR",matchScore:87}],s=()=>{console.log("Finding matches with preferences:",t)};return e.jsxs(X,{maxWidth:"lg",sx:{py:4},children:[e.jsxs(p,{sx:{display:"flex",alignItems:"center",mb:4},children:[e.jsx(Lr,{sx:{mr:2,fontSize:32,color:"primary.main"}}),e.jsx(h,{variant:"h4",component:"h1",children:"AI-Powered Matching"})]}),e.jsx(h,{variant:"body1",color:"text.secondary",sx:{mb:4},children:"Let our AI find the perfect items and services that match your interests and preferences."}),e.jsxs(ae,{sx:{p:3,mb:4},children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Your Preferences"}),e.jsxs(I,{container:!0,spacing:3,children:[e.jsx(I,{item:!0,xs:12,md:4,children:e.jsx(K,{fullWidth:!0,label:"Interests & Hobbies",value:t.interests,onChange:i=>r({...t,interests:i.target.value}),placeholder:"e.g., photography, music, cooking",multiline:!0,rows:1})}),e.jsx(I,{item:!0,xs:12,md:4,children:e.jsx(K,{fullWidth:!0,label:"Location",value:t.location,onChange:i=>r({...t,location:i.target.value}),placeholder:"City, State or ZIP"})}),e.jsx(I,{item:!0,xs:12,md:4,children:e.jsxs(be,{fullWidth:!0,children:[e.jsx(je,{children:"Max Distance"}),e.jsxs(we,{value:t.maxDistance,label:"Max Distance",onChange:i=>r({...t,maxDistance:i.target.value}),children:[e.jsx(N,{value:"10",children:"10 miles"}),e.jsx(N,{value:"25",children:"25 miles"}),e.jsx(N,{value:"50",children:"50 miles"}),e.jsx(N,{value:"100",children:"100 miles"})]})]})})]}),e.jsx(p,{sx:{mt:3,textAlign:"center"},children:e.jsx(A,{variant:"contained",size:"large",startIcon:e.jsx(Lr,{}),onClick:s,children:"Find Matches"})})]}),e.jsx(p,{sx:{mb:3},children:e.jsxs(h,{variant:"h6",gutterBottom:!0,children:["Recommended Matches (",n.length,")"]})}),e.jsx(I,{container:!0,spacing:3,children:n.map(i=>e.jsx(I,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(Ee,{sx:{height:"100%",display:"flex",flexDirection:"column",position:"relative"},children:[e.jsxs(p,{sx:{position:"absolute",top:16,right:16,backgroundColor:"primary.main",color:"white",borderRadius:"50%",width:48,height:48,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",zIndex:1},children:[i.matchScore,"%"]}),e.jsx(st,{component:"img",height:"200",image:i.image,alt:i.title}),e.jsxs(Be,{sx:{flexGrow:1},children:[e.jsx(h,{gutterBottom:!0,variant:"h6",component:"h2",children:i.title}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:2},children:i.description}),e.jsxs(p,{sx:{mb:2},children:[e.jsxs(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Owner: ",i.user]}),e.jsxs(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Location: ",i.location]}),e.jsxs(h,{variant:"h6",color:"primary",children:["$",i.estimatedValue]})]}),e.jsxs(p,{sx:{display:"flex",gap:1},children:[e.jsx(A,{variant:"contained",size:"small",fullWidth:!0,children:"Make Offer"}),e.jsx(A,{variant:"outlined",size:"small",children:e.jsx(js,{})}),e.jsx(A,{variant:"outlined",size:"small",children:e.jsx(ws,{})})]})]})]})},i.id))})]})},et=({children:t})=>{const{user:r,loading:n}=Ce();return n?e.jsx("div",{children:"Loading..."}):r?e.jsx(e.Fragment,{children:t}):e.jsx(It,{to:"/login",replace:!0})},Sl=()=>{const{user:t}=Ce();return e.jsx(p,{sx:{minHeight:"100vh",bgcolor:"background.default"},children:e.jsxs(hi,{children:[e.jsxs(de,{path:"/",element:e.jsx(cs,{}),children:[e.jsx(de,{index:!0,element:e.jsx(dl,{})}),e.jsx(de,{path:"login",element:t?e.jsx(It,{to:"/",replace:!0}):e.jsx(hl,{})}),e.jsx(de,{path:"register",element:t?e.jsx(It,{to:"/",replace:!0}):e.jsx(fl,{})}),e.jsx(de,{path:"items",element:e.jsx(pl,{})}),e.jsx(de,{path:"items/:id",element:e.jsx(ml,{})}),e.jsx(de,{path:"search",element:e.jsx(wl,{})}),e.jsx(de,{path:"users/:username",element:e.jsx(yl,{})})]}),e.jsxs(de,{path:"/",element:e.jsx(cs,{}),children:[e.jsx(de,{path:"create-item",element:e.jsx(et,{children:e.jsx(xl,{})})}),e.jsx(de,{path:"profile",element:e.jsx(et,{children:e.jsx(gl,{})})}),e.jsx(de,{path:"trades",element:e.jsx(et,{children:e.jsx(vl,{})})}),e.jsx(de,{path:"trades/:id",element:e.jsx(et,{children:e.jsx(bl,{})})}),e.jsx(de,{path:"messages",element:e.jsx(et,{children:e.jsx(jl,{})})}),e.jsx(de,{path:"matching",element:e.jsx(et,{children:e.jsx(Cl,{})})})]}),e.jsx(de,{path:"*",element:e.jsx(It,{to:"/",replace:!0})})]})})},Ol=new Ai({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1}}}),Rl=ii({palette:{primary:{main:"#4F46E5",light:"#6366F1",dark:"#3730A3"},secondary:{main:"#10B981",light:"#34D399",dark:"#059669"},background:{default:"#F9FAFB",paper:"#FFFFFF"}},typography:{fontFamily:'"Inter", "Roboto", "Helvetica", "Arial", sans-serif',h1:{fontWeight:700},h2:{fontWeight:600},h3:{fontWeight:600},h4:{fontWeight:600},h5:{fontWeight:600},h6:{fontWeight:600}},shape:{borderRadius:12},components:{MuiButton:{styleOverrides:{root:{textTransform:"none",fontWeight:600}}},MuiCard:{styleOverrides:{root:{boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)"}}}}});ur.createRoot(document.getElementById("root")).render(e.jsx(ne.StrictMode,{children:e.jsx(Ui,{client:Ol,children:e.jsxs(ai,{theme:Rl,children:[e.jsx(oi,{}),e.jsx(fi,{children:e.jsxs(ul,{children:[e.jsx(Sl,{}),e.jsx(Aa,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#10B981",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#EF4444",secondary:"#fff"}}}})]})})]})})}));
//# sourceMappingURL=index-CdM6JiYz.js.map
